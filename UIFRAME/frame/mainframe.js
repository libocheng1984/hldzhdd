var FrameVersion="20169.21.1523";(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}}(function(c){var a=c.scrollTo=function(e,d,f){return c(window).scrollTo(e,d,f)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1,limit:true};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var e=this,f=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return e}var d=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||d.compatMode=="BackCompat"?d.body:d.documentElement})};c.fn.scrollTo=function(j,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(j=="max"){j=9000000000}d=c.extend({},a.defaults,d);e=e||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){if(j==null){return}var o=this,k=c(o),l=j,h,f={},n=k.is("html,body");switch(typeof l){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(l)){l=b(l);break}l=c(l,this);if(!l.length){return}case"object":if(l.is||l.style){h=(l=c(l)).offset()}}var m=c.isFunction(d.offset)&&d.offset(o,l)||d.offset;c.each(d.axis.split(""),function(u,s){var q=s=="x"?"Left":"Top",w=q.toLowerCase(),t="scroll"+q,r=o[t],p=a.max(o,s);if(h){f[t]=h[w]+(n?0:r-k.offset()[w]);if(d.margin){f[t]-=parseInt(l.css("margin"+q))||0;f[t]-=parseInt(l.css("border"+q+"Width"))||0}f[t]+=m[w]||0;if(d.over[w]){f[t]+=l[s=="x"?"width":"height"]()*d.over[w]}}else{var v=l[w];f[t]=v.slice&&v.slice(-1)=="%"?parseFloat(v)/100*p:v}if(d.limit&&/^\d+$/.test(f[t])){f[t]=f[t]<=0?0:Math.min(f[t],p)}if(!u&&d.queue){if(r!=f[t]){g(d.onAfterFirst)}delete f[t]}});g(d.onAfter);function g(p){k.animate(f,e,d.easing,p&&function(){p.call(this,l,d)})}}).end()};a.max=function(h,g){var l=g=="x"?"Width":"Height",f="scroll"+l;if(!c(h).is("html,body")){return h[f]-c(h)[l.toLowerCase()]()}var k="client"+l,j=h.ownerDocument.documentElement,e=h.ownerDocument.body;return Math.max(j[f],e[f])-Math.min(j[k],e[k])};function b(d){return c.isFunction(d)||typeof d=="object"?d:{top:d,left:d}}return a}));(function(a){a.fn.fm_pager=function(b,c){c=jQuery.extend({items_total_show:"",items_per_page:10,num_display_entries:5,current_page:0,num_edge_entries:0,prev_text:"Prev",next_text:"Next",ellipse_text:"...",countText:true,prev_show_always:true,next_show_always:true,init_callback:function(){return false},sel_callback:function(){return false}},c||{});return this.each(function(){function g(){return Math.ceil(b/c.items_per_page)}function j(){var m=Math.ceil(c.num_display_entries/2);var n=g();var l=n-c.num_display_entries;var o=h>m?Math.max(Math.min(h-m,l),0):0;var k=h>m?Math.min(h+m,n):Math.min(c.num_display_entries,n);return[o,k]}function f(l,k){h=l;d();var m=c.selelct_callback(l+1,e);if(!m){if(k.stopPropagation){k.stopPropagation()}else{k.cancelBubble=true}}return m}function d(){e.empty();var l=j();var p=g();var q=function(r){return function(s){return f(r,s)}};var o=function(r,s){if(r==-100){var t=jQuery("<span>"+(s.text)+"</span>");if(s.classes){t.addClass(s.classes)}e.append(t);return}r=r<0?0:(r<p?r:p-1);s=jQuery.extend({text:r-0+1,classes:""},s||{});if(r==h){var t=jQuery("<a class='current'>"+(s.text)+"</a>")}else{var t=jQuery("<a>"+(s.text)+"</a>");t.bind("click",q(r))}if(s.classes){t.addClass(s.classes)}e.append(t)};if(c.prev_text&&(h>0||c.prev_show_always)){o(h-1,{text:c.prev_text,classes:"prev"})}if(l[0]>0&&c.num_edge_entries>0){var k=Math.min(c.num_edge_entries,l[0]);for(var m=0;m<k;m++){o(m)}if(c.num_edge_entries<l[0]&&c.ellipse_text){jQuery("<span>"+c.ellipse_text+"</span>").appendTo(e)}}for(var m=l[0];m<l[1];m++){o(m)}if(l[1]<p&&c.num_edge_entries>0){if(p-c.num_edge_entries>l[1]&&c.ellipse_text){jQuery("<span>"+c.ellipse_text+"</span>").appendTo(e)}var n=Math.max(p-c.num_edge_entries,l[1]);for(var m=n;m<p;m++){o(m)}}if(c.next_text&&(h<p-1||c.next_show_always)){o(h-0+1,{text:c.next_text,classes:"next"})}if(c.countText){if(c.num_edge_entries>0&&b-0>0){o(-100,{text:c.items_total_show,classes:"count"})}}}var h=c.current_page-1;if(h<0){h=0}b=(!b||b<0)?1:b;c.items_per_page=(!c.items_per_page||c.items_per_page<0)?1:c.items_per_page;var e=jQuery(this);this.selectPage=function(k){f(k)};this.prevPage=function(){if(h>0){f(h-1);return true}else{return false}};this.nextPage=function(){if(h<g()-1){f(h-0+1);return true}else{return false}};d();c.init_callback(h,this)})}})(jQuery);if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e},easeOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return g*Math.pow(2,-10*h)*Math.sin((h*l-j)*(2*Math.PI)/k)+m+e},easeInOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e
}if((h/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k)*0.5+m+e},easeInBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return j/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return j/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});(function(a,c){"function"===typeof define&&define.amd?define(["jquery"],c):a.jQuery?c(a.jQuery):c(a.Zepto)})(this,function(c,e){c.fn.jPlayer=function(b){var k="string"===typeof b,j=Array.prototype.slice.call(arguments,1),f=this;b=!k&&j.length?c.extend.apply(null,[!0,b].concat(j)):b;if(k&&"_"===b.charAt(0)){return f}k?this.each(function(){var m=c(this).data("jPlayer"),l=m&&c.isFunction(m[b])?m[b].apply(m,j):m;if(l!==m&&l!==e){return f=l,!1}}):this.each(function(){var l=c(this).data("jPlayer");l?l.option(b||{}):c(this).data("jPlayer",new c.jPlayer(b,this))});return f};c.jPlayer=function(b,j){if(arguments.length){this.element=c(j);this.options=c.extend(!0,{},this.options,b);var f=this;this.element.bind("remove.jPlayer",function(){f.destroy()});this._init()}};"function"!==typeof c.fn.stop&&(c.fn.stop=function(){});c.jPlayer.emulateMethods="load play pause";c.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";c.jPlayer.emulateOptions="muted volume";c.jPlayer.reservedEvent="ready flashreset resize repeat error warning";c.jPlayer.event={};c.each("ready flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){c.jPlayer.event[this]="jPlayer_"+this});c.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough".split(" ");c.jPlayer.pause=function(){c.each(c.jPlayer.prototype.instances,function(b,f){f.data("jPlayer").status.srcSet&&f.jPlayer("pause")})};c.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var a=function(){this.init()};a.prototype={init:function(){this.options={timeFormat:c.jPlayer.timeFormat}},time:function(j){var k=new Date(1000*(j&&"number"===typeof j?j:0)),f=k.getUTCHours();j=this.options.timeFormat.showHour?k.getUTCMinutes():k.getUTCMinutes()+60*f;k=this.options.timeFormat.showMin?k.getUTCSeconds():k.getUTCSeconds()+60*j;f=this.options.timeFormat.padHour&&10>f?"0"+f:f;j=this.options.timeFormat.padMin&&10>j?"0"+j:j;k=this.options.timeFormat.padSec&&10>k?"0"+k:k;f=""+(this.options.timeFormat.showHour?f+this.options.timeFormat.sepHour:"");f+=this.options.timeFormat.showMin?j+this.options.timeFormat.sepMin:"";return f+=this.options.timeFormat.showSec?k+this.options.timeFormat.sepSec:""}};var h=new a;c.jPlayer.convertTime=function(b){return h.time(b)};c.jPlayer.uaBrowser=function(j){j=j.toLowerCase();var l=/(opera)(?:.*version)?[ \/]([\w.]+)/,f=/(msie) ([\w.]+)/,k=/(mozilla)(?:.*? rv:([\w.]+))?/;j=/(webkit)[ \/]([\w.]+)/.exec(j)||l.exec(j)||f.exec(j)||0>j.indexOf("compatible")&&k.exec(j)||[];return{browser:j[1]||"",version:j[2]||"0"}};c.jPlayer.uaPlatform=function(j){var l=j.toLowerCase(),f=/(android)/,k=/(mobile)/;j=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(l)||[];l=/(ipad|playbook)/.exec(l)||!k.exec(l)&&f.exec(l)||[];j[1]&&(j[1]=j[1].replace(/\s/g,"_"));return{platform:j[1]||"",tablet:l[1]||""}};c.jPlayer.browser={};c.jPlayer.platform={};var d=c.jPlayer.uaBrowser(navigator.userAgent);d.browser&&(c.jPlayer.browser[d.browser]=!0,c.jPlayer.browser.version=d.version);d=c.jPlayer.uaPlatform(navigator.userAgent);d.platform&&(c.jPlayer.platform[d.platform]=!0,c.jPlayer.platform.mobile=!d.tablet,c.jPlayer.platform.tablet=!!d.tablet);c.jPlayer.getDocMode=function(){var b;c.jPlayer.browser.msie&&(document.documentMode?b=document.documentMode:(b=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(b=7)));return b};c.jPlayer.browser.documentMode=c.jPlayer.getDocMode();c.jPlayer.nativeFeatures={init:function(){var m=document,r=m.createElement("video"),j={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" ")},q=["w3c","moz","webkit","webkitVideo"],o,n;
this.fullscreen=r={support:{w3c:!!m[j.w3c[0]],moz:!!m[j.moz[0]],webkit:"function"===typeof m[j.webkit[3]],webkitVideo:"function"===typeof r[j.webkitVideo[2]]},used:{}};o=0;for(n=q.length;o<n;o++){var p=q[o];if(r.support[p]){r.spec=p;r.used[p]=!0;break}}if(r.spec){var k=j[r.spec];r.api={fullscreenEnabled:!0,fullscreenElement:function(b){b=b?b:m;return b[k[1]]},requestFullscreen:function(b){return b[k[2]]()},exitFullscreen:function(b){b=b?b:m;return b[k[3]]()}};r.event={fullscreenchange:k[4],fullscreenerror:k[5]}}else{r.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},r.event={}}}};c.jPlayer.nativeFeatures.init();c.jPlayer.focus=null;c.jPlayer.keyIgnoreElementNames="INPUT TEXTAREA";var g=function(b){var j=c.jPlayer.focus,f;j&&(c.each(c.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(l,k){if(b.target.nodeName.toUpperCase()===k.toUpperCase()){return f=!0,!1}}),f||c.each(j.options.keyBindings,function(l,k){if(k&&b.which===k.key&&c.isFunction(k.fn)){return b.preventDefault(),k.fn(j),!1}}))};c.jPlayer.keys=function(){};c.jPlayer.keys(!0);c.jPlayer.prototype={count:0,version:{script:"2.5.0",needFlash:"2.5.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:!1,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:0.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1000},loop:!1,repeat:function(b){b.jPlayer.options.loop?c(this).unbind(".jPlayerRepeat").bind(c.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){c(this).jPlayer("play")}):c(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:32,fn:function(b){b.status.paused?b.play():b.pause()}},fullScreen:{key:13,fn:function(b){(b.status.video||b.options.audioFullScreen)&&b._setOption("fullScreen",!b.options.fullScreen)}},muted:{key:8,fn:function(b){b._muted(!b.options.muted)}},volumeUp:{key:38,fn:function(b){b.volume(b.options.volume+0.1)}},volumeDown:{key:40,fn:function(b){b.volume(b.options.volume-0.1)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var b=this;
this.element.empty();this.status=c.extend({},this.status);this.internal=c.extend({},this.internal);this.options.timeFormat=c.extend({},c.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=c.jPlayer.platform.ipad||c.jPlayer.platform.iphone||c.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);this.options.keyEnabled&&!c.jPlayer.focus&&(c.jPlayer.focus=this);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=this._limitValue(this.options.volume,0,1);c.each(this.options.supplied.toLowerCase().split(","),function(o,n){var m=n.replace(/^\s+|\s+$/g,"");if(b.format[m]){var l=!1;c.each(b.formats,function(p,q){if(m===q){return l=!0,!1}});l||b.formats.push(m)}});c.each(this.options.solution.toLowerCase().split(","),function(o,n){var m=n.replace(/^\s+|\s+$/g,"");if(b.solution[m]){var l=!1;c.each(b.solutions,function(p,q){if(m===q){return l=!0,!1}});l||b.solutions.push(m)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=c.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=c.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:e});this.internal.video=c.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e});this.internal.flash=c.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")});this.internal.poster=c.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e});c.each(c.jPlayer.event,function(m,l){b.options[m]!==e&&(b.element.bind(l+".jPlayer",b.options[m]),b.options[m]=e)});this.require.audio=!1;this.require.video=!1;c.each(this.formats,function(m,l){b.require[b.format[l].media]=!0});this.options=this.require.video?c.extend(!0,{},this.optionsVideo,this.options):c.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);c.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){b.status.video&&!b.status.waitForPlay||b.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=c("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){b._trigger(c.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.flash.canPlay={};c.each(this.formats,function(m,l){b.html.canPlay[l]=b.html[b.format[l].media].available&&""!==b.htmlElement[b.format[l].media].canPlayType(b.format[l].codec);b.flash.canPlay[l]=b.format[l].flashCanPlay&&b.flash.available});this.html.desired=!1;this.flash.desired=!1;c.each(this.solutions,function(o,n){if(0===o){b[n].desired=!0}else{var m=!1,l=!1;c.each(b.formats,function(q,p){b[b.solutions[0]].canPlay[p]&&("video"===b.format[p].media?l=!0:m=!0)});b[n].desired=b.require.audio&&!m||b.require.video&&!l}});this.html.support={};this.flash.support={};c.each(this.formats,function(m,l){b.html.support[l]=b.html.canPlay[l]&&b.html.desired;b.flash.support[l]=b.flash.canPlay[l]&&b.flash.desired});this.html.used=!1;this.flash.used=!1;c.each(this.solutions,function(m,l){c.each(b.formats,function(o,n){if(b[l].support[n]){return b[l].used=!0,!1}})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:c.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SOLUTION,hint:c.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());
if(this.flash.used){var k,j="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(c.jPlayer.browser.msie&&(9>Number(c.jPlayer.browser.version)||9>c.jPlayer.browser.documentMode)){j=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+j+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];k=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var f=0;f<j.length;f++){k.appendChild(document.createElement(j[f]))}}else{f=function(m,o,l){var n=document.createElement("param");n.setAttribute("name",o);n.setAttribute("value",l);m.appendChild(n)},k=document.createElement("object"),k.setAttribute("id",this.internal.flash.id),k.setAttribute("name",this.internal.flash.id),k.setAttribute("data",this.internal.flash.swf),k.setAttribute("type","application/x-shockwave-flash"),k.setAttribute("width","1"),k.setAttribute("height","1"),k.setAttribute("tabindex","-1"),f(k,"flashvars",j),f(k,"allowscriptaccess","always"),f(k,"bgcolor",this.options.backgroundColor),f(k,"wmode",this.options.wmode)}this.element.append(k);this.internal.flash.jq=c(k)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=c("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=c("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){b._trigger(c.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){b.internal.ready=!0;b.version.flash="n/a";b._trigger(c.jPlayer.event.repeat);b._trigger(c.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();c.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");c.each(this.css.jq,function(b,f){f.length&&f.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===c.jPlayer.focus&&(c.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(b){try{return b.canPlayType(this.format.mp3.codec),!0}catch(f){return !1}},_testPlaybackRate:function(b){b=document.createElement("string"===typeof b?b:"audio");try{return"playbackRate" in b?(b.playbackRate=0.5,0.5===b.playbackRate):!1}catch(f){return !1}},_uaBlocklist:function(b){var j=navigator.userAgent.toLowerCase(),f=!1;c.each(b,function(l,k){if(k&&k.test(j)){return f=!0,!1}});return f},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(b,j){var f=this;b.preload=this.options.preload;b.muted=this.options.muted;b.volume=this.options.volume;this.status.playbackRateEnabled&&(b.defaultPlaybackRate=this.options.defaultPlaybackRate,b.playbackRate=this.options.playbackRate);b.addEventListener("progress",function(){j.gate&&(f.internal.cmdsIgnored&&0<this.readyState&&(f.internal.cmdsIgnored=!1),f._getHtmlStatus(b),f._updateInterface(),f._trigger(c.jPlayer.event.progress))},!1);b.addEventListener("timeupdate",function(){j.gate&&(f._getHtmlStatus(b),f._updateInterface(),f._trigger(c.jPlayer.event.timeupdate))},!1);b.addEventListener("durationchange",function(){j.gate&&(f._getHtmlStatus(b),f._updateInterface(),f._trigger(c.jPlayer.event.durationchange))
},!1);b.addEventListener("play",function(){j.gate&&(f._updateButtons(!0),f._html_checkWaitForPlay(),f._trigger(c.jPlayer.event.play))},!1);b.addEventListener("playing",function(){j.gate&&(f._updateButtons(!0),f._seeked(),f._trigger(c.jPlayer.event.playing))},!1);b.addEventListener("pause",function(){j.gate&&(f._updateButtons(!1),f._trigger(c.jPlayer.event.pause))},!1);b.addEventListener("waiting",function(){j.gate&&(f._seeking(),f._trigger(c.jPlayer.event.waiting))},!1);b.addEventListener("seeking",function(){j.gate&&(f._seeking(),f._trigger(c.jPlayer.event.seeking))},!1);b.addEventListener("seeked",function(){j.gate&&(f._seeked(),f._trigger(c.jPlayer.event.seeked))},!1);b.addEventListener("volumechange",function(){j.gate&&(f.options.volume=b.volume,f.options.muted=b.muted,f._updateMute(),f._updateVolume(),f._trigger(c.jPlayer.event.volumechange))},!1);b.addEventListener("ratechange",function(){j.gate&&(f.options.defaultPlaybackRate=b.defaultPlaybackRate,f.options.playbackRate=b.playbackRate,f._updatePlaybackRate(),f._trigger(c.jPlayer.event.ratechange))},!1);b.addEventListener("suspend",function(){j.gate&&(f._seeked(),f._trigger(c.jPlayer.event.suspend))},!1);b.addEventListener("ended",function(){j.gate&&(c.jPlayer.browser.webkit||(f.htmlElement.media.currentTime=0),f.htmlElement.media.pause(),f._updateButtons(!1),f._getHtmlStatus(b,!0),f._updateInterface(),f._trigger(c.jPlayer.event.ended))},!1);b.addEventListener("error",function(){j.gate&&(f._updateButtons(!1),f._seeked(),f.status.srcSet&&(clearTimeout(f.internal.htmlDlyCmdId),f.status.waitForLoad=!0,f.status.waitForPlay=!0,f.status.video&&!f.status.nativeVideoControls&&f.internal.video.jq.css({width:"0px",height:"0px"}),f._validString(f.status.media.poster)&&!f.status.nativeVideoControls&&f.internal.poster.jq.show(),f.css.jq.videoPlay.length&&f.css.jq.videoPlay.show(),f._error({type:c.jPlayer.error.URL,context:f.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})))},!1);c.each(c.jPlayer.htmlEvent,function(l,k){b.addEventListener(this,function(){j.gate&&f._trigger(c.jPlayer.event[k])},!1)})},_getHtmlStatus:function(k,o){var j=0,n=0,l=0,m=0;isFinite(k.duration)&&(this.status.duration=k.duration);j=k.currentTime;n=0<this.status.duration?100*j/this.status.duration:0;"object"===typeof k.seekable&&0<k.seekable.length?(l=0<this.status.duration?100*k.seekable.end(k.seekable.length-1)/this.status.duration:100,m=0<this.status.duration?100*k.currentTime/k.seekable.end(k.seekable.length-1):0):(l=100,m=n);o&&(n=m=j=0);this.status.seekPercent=l;this.status.currentPercentRelative=m;this.status.currentPercentAbsolute=n;this.status.currentTime=j;this.status.videoWidth=k.videoWidth;this.status.videoHeight=k.videoHeight;this.status.readyState=k.readyState;this.status.networkState=k.networkState;this.status.playbackRate=k.playbackRate;this.status.ended=k.ended},_resetStatus:function(){this.status=c.extend({},this.status,c.jPlayer.prototype.status)},_trigger:function(b,j,f){b=c.Event(b);b.jPlayer={};b.jPlayer.version=c.extend({},this.version);b.jPlayer.options=c.extend(!0,{},this.options);b.jPlayer.status=c.extend(!0,{},this.status);b.jPlayer.html=c.extend(!0,{},this.html);b.jPlayer.flash=c.extend(!0,{},this.flash);j&&(b.jPlayer.error=c.extend({},j));f&&(b.jPlayer.warning=c.extend({},f));this.element.trigger(b)},jPlayerFlashEvent:function(b,k){if(b===c.jPlayer.event.ready){if(!this.internal.ready){this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=k.version,this.version.needFlash!==this.version.flash&&this._error({type:c.jPlayer.error.VERSION,context:this.version.flash,message:c.jPlayer.errorMsg.VERSION+this.version.flash,hint:c.jPlayer.errorHint.VERSION}),this._trigger(c.jPlayer.event.repeat),this._trigger(b)}else{if(this.flash.gate){if(this.status.srcSet){var j=this.status.currentTime,f=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<j&&(f?this.pause(j):this.play(j))}this._trigger(c.jPlayer.event.flashreset)}}}if(this.flash.gate){switch(b){case c.jPlayer.event.progress:this._getFlashStatus(k);this._updateInterface();this._trigger(b);break;case c.jPlayer.event.timeupdate:this._getFlashStatus(k);this._updateInterface();this._trigger(b);break;case c.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(b);break;case c.jPlayer.event.pause:this._updateButtons(!1);this._trigger(b);break;case c.jPlayer.event.ended:this._updateButtons(!1);this._trigger(b);break;case c.jPlayer.event.click:this._trigger(b);break;case c.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:c.jPlayer.error.URL,context:k.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL});
break;case c.jPlayer.event.seeking:this._seeking();this._trigger(b);break;case c.jPlayer.event.seeked:this._seeked();this._trigger(b);break;case c.jPlayer.event.ready:break;default:this._trigger(b)}}return !1},_getFlashStatus:function(b){this.status.seekPercent=b.seekPercent;this.status.currentPercentRelative=b.currentPercentRelative;this.status.currentPercentAbsolute=b.currentPercentAbsolute;this.status.currentTime=b.currentTime;this.status.duration=b.duration;this.status.videoWidth=b.videoWidth;this.status.videoHeight=b.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_updateButtons:function(b){b===e?b=!this.status.paused:this.status.paused=!b;this.css.jq.play.length&&this.css.jq.pause.length&&(b?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));this.css.jq.currentTime.length&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));this.css.jq.duration.length&&this.css.jq.duration.text(this._convertTime(this.status.duration))},_convertTime:a.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.flash.active=!1},_escapeHtml:function(b){return b.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(b){var f=document.createElement("div");f.innerHTML='<a href="'+this._escapeHtml(b)+'">x</a>';return f.firstChild.href},_absoluteMediaUrls:function(b){var f=this;c.each(b,function(j,k){f.format[j]&&(b[j]=f._qualifyURL(k))});return b},setMedia:function(b){var k=this,j=!1,f=this.status.media.poster!==b.poster;this._resetMedia();this._resetGate();this._resetActive();b=this._absoluteMediaUrls(b);c.each(this.formats,function(n,m){var l="video"===k.format[m].media;c.each(k.solutions,function(o,q){if(k[q].support[m]&&k._validString(b[m])){var p="html"===q;l?(p?(k.html.video.gate=!0,k._html_setVideo(b),k.html.active=!0):(k.flash.gate=!0,k._flash_setVideo(b),k.flash.active=!0),k.css.jq.videoPlay.length&&k.css.jq.videoPlay.show(),k.status.video=!0):(p?(k.html.audio.gate=!0,k._html_setAudio(b),k.html.active=!0):(k.flash.gate=!0,k._flash_setAudio(b),k.flash.active=!0),k.css.jq.videoPlay.length&&k.css.jq.videoPlay.hide(),k.status.video=!1);j=!0;return !1}});if(j){return !1}});j?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(b.poster)||(f?this.htmlElement.poster.src=b.poster:this.internal.poster.jq.show()),this.status.srcSet=!0,this.status.media=c.extend({},b),this._updateButtons(!1),this._updateInterface()):this._error({type:c.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SUPPORT,hint:c.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(c.jPlayer.focus=this)},play:function(b){b="number"===typeof b?b:NaN;this.status.srcSet?(this.focus(),this.html.active?this._html_play(b):this.flash.active&&this._flash_play(b)):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(b){b="number"===typeof b?b:NaN;this.status.srcSet?this.html.active?this._html_pause(b):this.flash.active&&this._flash_pause(b):this._urlNotSetError("pause")},tellOthers:function(b,l){var k=this,j="function"===typeof l,f=Array.prototype.slice.call(arguments);"string"===typeof b&&(j&&f.splice(1,1),c.each(this.instances,function(){k.element!==this&&(j&&!l.call(this.data("jPlayer"),k)||this.jPlayer.apply(this,f))
}))},pauseOthers:function(b){this.tellOthers("pause",function(){return this.status.srcSet},b)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(b){b=this._limitValue(b,0,100);this.status.srcSet?this.html.active?this._html_playHead(b):this.flash.active&&this._flash_playHead(b):this._urlNotSetError("playHead")},_muted:function(b){this.mutedWorker(b);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},b)},mutedWorker:function(b){this.options.muted=b;this.html.used&&this._html_setProperty("muted",b);this.flash.used&&this._flash_mute(b);this.html.video.gate||this.html.audio.gate||(this._updateMute(b),this._updateVolume(this.options.volume),this._trigger(c.jPlayer.event.volumechange))},mute:function(b){b=b===e?!0:!!b;this._muted(b)},unmute:function(b){b=b===e?!0:!!b;this._muted(!b)},_updateMute:function(b){b===e&&(b=this.options.muted);this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):b?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(b){this.volumeWorker(b);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},b)},volumeWorker:function(b){b=this._limitValue(b,0,1);this.options.volume=b;this.html.used&&this._html_setProperty("volume",b);this.flash.used&&this._flash_volume(b);this.html.video.gate||this.html.audio.gate||(this._updateVolume(b),this._trigger(c.jPlayer.event.volumechange))},volumeBar:function(b){if(this.css.jq.volumeBar.length){var l=c(b.currentTarget),k=l.offset(),j=b.pageX-k.left,f=l.width();b=l.height()-b.pageY+k.top;l=l.height();this.options.verticalVolume?this.volume(b/l):this.volume(j/f)}this.options.muted&&this._muted(!1)},volumeBarValue:function(){},_updateVolume:function(b){b===e&&(b=this.options.volume);b=this.options.muted?0:b;this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*b+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(b){var f=this;this.options.cssSelectorAncestor=b;this._removeUiClass();this.ancestorJq=b?c(b):[];b&&1!==this.ancestorJq.length&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:b,message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();c.each(this.options.cssSelector,function(k,j){f._cssSelector(k,j)});this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(b,j){var f=this;"string"===typeof j?c.jPlayer.prototype.options.cssSelector[b]?(this.css.jq[b]&&this.css.jq[b].length&&this.css.jq[b].unbind(".jPlayer"),this.options.cssSelector[b]=j,this.css.cs[b]=this.options.cssSelectorAncestor+" "+j,this.css.jq[b]=j?c(this.css.cs[b]):[],this.css.jq[b].length&&this.css.jq[b].bind("click.jPlayer",function(k){k.preventDefault();f[b](k);c(this).blur()}),j&&1!==this.css.jq[b].length&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[b],message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[b].length+" found for "+b+" method.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:c.jPlayer.warning.CSS_SELECTOR_METHOD,context:b,message:c.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:c.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:c.jPlayer.warning.CSS_SELECTOR_STRING,context:j,message:c.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:c.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(b){if(this.css.jq.seekBar.length){var j=c(b.currentTarget),f=j.offset();b=b.pageX-f.left;j=j.width();this.playHead(100*b/j)}},playBar:function(){},playbackRate:function(b){this._setOption("playbackRate",b)},playbackRateBar:function(b){if(this.css.jq.playbackRateBar.length){var l=c(b.currentTarget),k=l.offset(),j=b.pageX-k.left,f=l.width();b=l.height()-b.pageY+k.top;l=l.height();this.playbackRate((this.options.verticalPlaybackRate?b/l:j/f)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},playbackRateBarValue:function(){},_updatePlaybackRate:function(){var b=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*b+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())
},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(b){this.options.loop!==b&&(this.options.loop=b,this._updateButtons(),this._trigger(c.jPlayer.event.repeat))},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},option:function(b,m){var l=b;if(0===arguments.length){return c.extend(!0,{},this.options)}if("string"===typeof b){var k=b.split(".");if(m===e){for(var l=c.extend(!0,{},this.options),j=0;j<k.length;j++){if(l[k[j]]!==e){l=l[k[j]]}else{return this._warning({type:c.jPlayer.warning.OPTION_KEY,context:b,message:c.jPlayer.warningMsg.OPTION_KEY,hint:c.jPlayer.warningHint.OPTION_KEY}),e}}return l}for(var j=l={},f=0;f<k.length;f++){f<k.length-1?(j[k[f]]={},j=j[k[f]]):j[k[f]]=m}}this._setOptions(l);return this},_setOptions:function(b){var f=this;c.each(b,function(k,j){f._setOption(k,j)});return this},_setOption:function(b,k){var j=this;switch(b){case"volume":this.volume(k);break;case"muted":this._muted(k);break;case"globalVolume":this.options[b]=k;break;case"cssSelectorAncestor":this._cssSelectorAncestor(k);break;case"cssSelector":c.each(k,function(l,m){j._cssSelector(l,m)});break;case"playbackRate":this.options[b]=k=this._limitValue(k,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",k);this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[b]=k=this._limitValue(k,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",k);this._updatePlaybackRate();break;case"minPlaybackRate":this.options[b]=k=this._limitValue(k,0.1,this.options.maxPlaybackRate-0.1);this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[b]=k=this._limitValue(k,this.options.minPlaybackRate+0.1,16);this._updatePlaybackRate();break;case"fullScreen":if(this.options[b]!==k){var f=c.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!f||f&&!this.status.waitForPlay){f||(this.options[b]=k),k?this._requestFullscreen():this._exitFullscreen(),f||this._setOption("fullWindow",k)}}break;case"fullWindow":this.options[b]!==k&&(this._removeUiClass(),this.options[b]=k,this._refreshSize());break;case"size":this.options.fullWindow||this.options[b].cssClass===k.cssClass||this._removeUiClass();this.options[b]=c.extend({},this.options[b],k);this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[b].cssClass!==k.cssClass&&this._removeUiClass();this.options[b]=c.extend({},this.options[b],k);this._refreshSize();break;case"autohide":this.options[b]=c.extend({},this.options[b],k);this._updateAutohide();break;case"loop":this._loop(k);break;case"nativeVideoControls":this.options[b]=c.extend({},this.options[b],k);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case"noFullWindow":this.options[b]=c.extend({},this.options[b],k);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();break;case"noVolume":this.options[b]=c.extend({},this.options[b],k);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case"emulateHtml":this.options[b]!==k&&((this.options[b]=k)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[b]=c.extend({},this.options[b],k);break;case"keyEnabled":this.options[b]=k;k||this!==c.jPlayer.focus||(c.jPlayer.focus=null);break;case"keyBindings":this.options[b]=c.extend(!0,{},this.options[b],k);break;case"audioFullScreen":this.options[b]=k}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(c.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var b=this,f=function(){b.css.jq.gui.fadeIn(b.options.autohide.fadeIn,function(){clearTimeout(b.internal.autohideId);
b.internal.autohideId=setTimeout(function(){b.css.jq.gui.fadeOut(b.options.autohide.fadeOut)},b.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",f),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",f),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var b=this,f=c.jPlayer.nativeFeatures.fullscreen;f.api.fullscreenEnabled&&f.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){b._fullscreenchange()}),document.addEventListener(f.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var b=c.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.addEventListener(b.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!c.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var b=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],f=c.jPlayer.nativeFeatures.fullscreen;f.used.webkitVideo&&(b=this.htmlElement.video);f.api.fullscreenEnabled&&f.api.requestFullscreen(b)},_exitFullscreen:function(){var b=c.jPlayer.nativeFeatures.fullscreen,f;b.used.webkitVideo&&(f=this.htmlElement.video);b.api.fullscreenEnabled&&b.api.exitFullscreen(f)},_html_initMedia:function(b){var f=c(this.htmlElement.media).empty();c.each(b.track||[],function(k,j){var l=document.createElement("track");l.setAttribute("kind",j.kind?j.kind:"");l.setAttribute("src",j.src?j.src:"");l.setAttribute("srclang",j.srclang?j.srclang:"");l.setAttribute("label",j.label?j.label:"");j.def&&l.setAttribute("default",j.def);f.append(l)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&this._html_load();this._trigger(c.jPlayer.event.timeupdate)},_html_setFormat:function(b){var f=this;c.each(this.formats,function(j,k){if(f.html.support[k]&&b[k]){return f.status.src=b[k],f.status.format[k]=!0,f.status.formatType=k,!1}})},_html_setAudio:function(b){this._html_setFormat(b);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(b)},_html_setVideo:function(b){this._html_setFormat(b);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(b.poster)?b.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(b)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(j){var f=this,l=this.htmlElement.media;this._html_load();if(isNaN(j)){l.play()}else{this.internal.cmdsIgnored&&l.play();try{if(!l.seekable||"object"===typeof l.seekable&&0<l.seekable.length){l.currentTime=j,l.play()}else{throw 1}}catch(k){this.internal.htmlDlyCmdId=setTimeout(function(){f.play(j)},250);return}}this._html_checkWaitForPlay()},_html_pause:function(j){var f=this,l=this.htmlElement.media;0<j?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);l.pause();if(!isNaN(j)){try{if(!l.seekable||"object"===typeof l.seekable&&0<l.seekable.length){l.currentTime=j}else{throw 1}}catch(k){this.internal.htmlDlyCmdId=setTimeout(function(){f.pause(j)},250);return}}0<j&&this._html_checkWaitForPlay()},_html_playHead:function(j){var f=this,l=this.htmlElement.media;this._html_load();try{if("object"===typeof l.seekable&&0<l.seekable.length){l.currentTime=j*l.seekable.end(l.seekable.length-1)/100}else{if(0<l.duration&&!isNaN(l.duration)){l.currentTime=j*l.duration/100}else{throw"e"}}}catch(k){this.internal.htmlDlyCmdId=setTimeout(function(){f.playHead(j)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(j,f){this.html.audio.available&&(this.htmlElement.audio[j]=f);this.html.video.available&&(this.htmlElement.video[j]=f)},_flash_setAudio:function(b){var j=this;
try{c.each(this.formats,function(k,l){if(j.flash.support[l]&&b[l]){switch(l){case"m4a":case"fla":j._getMovie().fl_setAudio_m4a(b[l]);break;case"mp3":j._getMovie().fl_setAudio_mp3(b[l]);break;case"rtmpa":j._getMovie().fl_setAudio_rtmp(b[l])}j.status.src=b[l];j.status.format[l]=!0;j.status.formatType=l;return !1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(f){this._flashError(f)}},_flash_setVideo:function(b){var j=this;try{c.each(this.formats,function(k,l){if(j.flash.support[l]&&b[l]){switch(l){case"m4v":case"flv":j._getMovie().fl_setVideo_m4v(b[l]);break;case"rtmpv":j._getMovie().fl_setVideo_rtmp(b[l])}j.status.src=b[l];j.status.format[l]=!0;j.status.formatType=l;return !1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(f){this._flashError(f)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(b){this._flashError(b)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(b){this._flashError(b)}this.status.waitForLoad=!1},_flash_play:function(j){try{this._getMovie().fl_play(j)}catch(f){this._flashError(f)}this.status.waitForLoad=!1;this._flash_checkWaitForPlay()},_flash_pause:function(j){try{this._getMovie().fl_pause(j)}catch(f){this._flashError(f)}0<j&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(j){try{this._getMovie().fl_play_head(j)}catch(f){this._flashError(f)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(j){try{this._getMovie().fl_volume(j)}catch(f){this._flashError(f)}},_flash_mute:function(j){try{this._getMovie().fl_mute(j)}catch(f){this._flashError(f)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var j=0,f;if(window.ActiveXObject){try{if(f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var l=f.GetVariable("$version");l&&(l=l.split(" ")[1].split(","),j=parseInt(l[0],10)+"."+parseInt(l[1],10))}}catch(k){}}else{navigator.plugins&&0<navigator.mimeTypes.length&&(f=navigator.plugins["Shockwave Flash"])&&(j=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"))}return 1*j},_checkForFlash:function(j){var f=!1;this._getFlashPluginVersion()>=j&&(f=!0);return f},_validString:function(b){return b&&"string"===typeof b},_limitValue:function(j,f,k){return j<f?f:j>k?k:j},_urlNotSetError:function(b){this._error({type:c.jPlayer.error.URL_NOT_SET,context:b,message:c.jPlayer.errorMsg.URL_NOT_SET,hint:c.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(b){var f;f=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:c.jPlayer.error[f],context:this.internal.flash.swf,message:c.jPlayer.errorMsg[f]+b.message,hint:c.jPlayer.errorHint[f]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(b){this._trigger(c.jPlayer.event.error,b);this.options.errorAlerts&&this._alert("Error!"+(b.message?"\n"+b.message:"")+(b.hint?"\n"+b.hint:"")+"\nContext: "+b.context)},_warning:function(b){this._trigger(c.jPlayer.event.warning,e,b);this.options.warningAlerts&&this._alert("Warning!"+(b.message?"\n"+b.message:"")+(b.hint?"\n"+b.hint:"")+"\nContext: "+b.context)},_alert:function(b){b="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+b;this.options.consoleAlerts?console&&console.log&&console.log(b):alert(b)},_emulateHtmlBridge:function(){var b=this;c.each(c.jPlayer.emulateMethods.split(/\s+/g),function(f,j){b.internal.domNode[j]=function(k){b[j](k)}});c.each(c.jPlayer.event,function(k,j){var f=!0;c.each(c.jPlayer.reservedEvent.split(/\s+/g),function(m,l){if(l===k){return f=!1}});f&&b.element.bind(j+".jPlayer.jPlayerHtml",function(){b._emulateHtmlUpdate();var l=document.createEvent("Event");l.initEvent(k,!1,!0);b.internal.domNode.dispatchEvent(l)})})},_emulateHtmlUpdate:function(){var b=this;c.each(c.jPlayer.emulateStatus.split(/\s+/g),function(f,j){b.internal.domNode[j]=b.status[j]});c.each(c.jPlayer.emulateOptions.split(/\s+/g),function(f,j){b.internal.domNode[j]=b.options[j]})},_destroyHtmlBridge:function(){var b=this;this.element.unbind(".jPlayerHtml");c.each((c.jPlayer.emulateMethods+" "+c.jPlayer.emulateStatus+" "+c.jPlayer.emulateOptions).split(/\s+/g),function(f,j){delete b.internal.domNode[j]})}};c.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};c.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+c.jPlayer.prototype.version.script+" needs Jplayer.swf version "+c.jPlayer.prototype.version.needFlash+" but found "};
c.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};c.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};c.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};c.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});
/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){var ax="undefined",aJ="object",ag="Shockwave Flash",aa="ShockwaveFlash.ShockwaveFlash",aK="application/x-shockwave-flash",ah="SWFObjectExprInst",aD="onreadystatechange",aj=window,aT=document,aH=navigator,ae=false,ac=[],aM=[],ak=[],ap=[],ar,aL,aw,az,ao=false,a0=false,aO,au,aR=true,aP=false,al=function(){var j=typeof aT.getElementById!=ax&&typeof aT.getElementsByTagName!=ax&&typeof aT.createElement!=ax,b=aH.userAgent.toLowerCase(),l=aH.platform.toLowerCase(),e=l?/win/.test(l):/win/.test(b),g=l?/mac/.test(l):/mac/.test(b),d=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,a=aH.appName==="Microsoft Internet Explorer",c=[0,0,0],h=null;if(typeof aH.plugins!=ax&&typeof aH.plugins[ag]==aJ){h=aH.plugins[ag].description;if(h&&(typeof aH.mimeTypes!=ax&&aH.mimeTypes[aK]&&aH.mimeTypes[aK].enabledPlugin)){ae=true;a=false;h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1");c[0]=aN(h.replace(/^(.*)\..*$/,"$1"));c[1]=aN(h.replace(/^.*\.(.*)\s.*$/,"$1"));c[2]=/[a-zA-Z]/.test(h)?aN(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}}else{if(typeof aj.ActiveXObject!=ax){try{var f=new ActiveXObject(aa);if(f){h=f.GetVariable("$version");if(h){a=true;h=h.split(" ")[1].split(",");c=[aN(h[0]),aN(h[1]),aN(h[2])]}}}catch(k){}}}return{w3:j,pv:c,wk:d,ie:a,win:e,mac:g}}(),aS=function(){if(!al.w3){return}if((typeof aT.readyState!=ax&&(aT.readyState==="complete"||aT.readyState==="interactive"))||(typeof aT.readyState==ax&&(aT.getElementsByTagName("body")[0]||aT.body))){aV()}if(!ao){if(typeof aT.addEventListener!=ax){aT.addEventListener("DOMContentLoaded",aV,false)}if(al.ie){aT.attachEvent(aD,function c(){if(aT.readyState=="complete"){aT.detachEvent(aD,c);aV()}});if(aj==top){(function a(){if(ao){return}try{aT.documentElement.doScroll("left")}catch(d){setTimeout(a,0);return}aV()}())}}if(al.wk){(function b(){if(ao){return}if(!/loaded|complete/.test(aT.readyState)){setTimeout(b,0);return}aV()}())}}}();function aV(){if(ao||!document.getElementsByTagName("body")[0]){return}try{var c,b=ay("span");b.style.display="none";c=aT.getElementsByTagName("body")[0].appendChild(b);c.parentNode.removeChild(c);c=null;b=null}catch(a){return}ao=true;var e=ac.length;for(var d=0;d<e;d++){ac[d]()}}function an(a){if(ao){a()}else{ac[ac.length]=a}}function aI(a){if(typeof aj.addEventListener!=ax){aj.addEventListener("load",a,false)}else{if(typeof aT.addEventListener!=ax){aT.addEventListener("load",a,false)}else{if(typeof aj.attachEvent!=ax){aU(aj,"onload",a)}else{if(typeof aj.onload=="function"){var b=aj.onload;aj.onload=function(){b();a()}}else{aj.onload=a}}}}}function ab(){var e=aT.getElementsByTagName("body")[0];var a=ay(aJ);a.setAttribute("style","visibility: hidden;");a.setAttribute("type",aK);var b=e.appendChild(a);if(b){var c=0;(function d(){if(typeof b.GetVariable!=ax){try{var f=b.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");al.pv=[aN(f[0]),aN(f[1]),aN(f[2])]}}catch(g){al.pv=[8,0,0]}}else{if(c<10){c++;setTimeout(d,10);return}}e.removeChild(a);b=null;at()}())}else{at()}}function at(){var d=aM.length;if(d>0){for(var e=0;e<d;e++){var m=aM[e].id;var j=aM[e].callbackFn;var k={success:false,id:m};if(al.pv[0]>0){var f=aY(m);if(f){if(av(aM[e].swfVersion)&&!(al.wk&&al.wk<312)){aE(m,true);if(j){k.success=true;k.ref=aB(m);k.id=m;j(k)}}else{if(aM[e].expressInstall&&aA()){var b={};b.data=aM[e].expressInstall;b.width=f.getAttribute("width")||"0";b.height=f.getAttribute("height")||"0";if(f.getAttribute("class")){b.styleclass=f.getAttribute("class")}if(f.getAttribute("align")){b.align=f.getAttribute("align")}var c={};var a=f.getElementsByTagName("param");var h=a.length;for(var g=0;
g<h;g++){if(a[g].getAttribute("name").toLowerCase()!="movie"){c[a[g].getAttribute("name")]=a[g].getAttribute("value")}}ai(b,c,m,j)}else{aZ(f);if(j){j(k)}}}}}else{aE(m,true);if(j){var l=aB(m);if(l&&typeof l.SetVariable!=ax){k.success=true;k.ref=l;k.id=l.id}j(k)}}}}}ac[0]=function(){if(ae){ab()}else{at()}};function aB(a){var c=null,b=aY(a);if(b&&b.nodeName.toUpperCase()==="OBJECT"){if(typeof b.SetVariable!==ax){c=b}else{c=b.getElementsByTagName(aJ)[0]||b}}return c}function aA(){return !a0&&av("6.0.65")&&(al.win||al.mac)&&!(al.wk&&al.wk<312)}function ai(e,d,h,f){var a=aY(h);h=ad(h);a0=true;aw=f||null;az={success:false,id:h};if(a){if(a.nodeName.toUpperCase()=="OBJECT"){ar=aq(a);aL=null}else{ar=a;aL=h}e.id=ah;if(typeof e.width==ax||(!/%$/.test(e.width)&&aN(e.width)<310)){e.width="310"}if(typeof e.height==ax||(!/%$/.test(e.height)&&aN(e.height)<137)){e.height="137"}var b=al.ie?"ActiveX":"PlugIn",c="MMredirectURL="+encodeURIComponent(aj.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+b+"&MMdoctitle="+encodeURIComponent(aT.title.slice(0,47)+" - Flash Player Installation");if(typeof d.flashvars!=ax){d.flashvars+="&"+c}else{d.flashvars=c}if(al.ie&&a.readyState!=4){var g=ay("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";aC(a)}aG(e,d,h)}}function aZ(a){if(al.ie&&a.readyState!=4){a.style.display="none";var b=ay("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aq(a),b);aC(a)}else{a.parentNode.replaceChild(aq(a),a)}}function aq(b){var c=ay("div");if(al.win&&al.ie){c.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aJ)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var d=0;d<f;d++){if(!(a[d].nodeType==1&&a[d].nodeName=="PARAM")&&!(a[d].nodeType==8)){c.appendChild(a[d].cloneNode(true))}}}}}return c}function aQ(c,b){var a=ay("div");a.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+c+"'>"+b+"</object>";return a.firstChild}function aG(b,d,j){var a,g=aY(j);j=ad(j);if(al.wk&&al.wk<312){return a}if(g){var h=(al.ie)?ay("div"):ay(aJ),e,c,f;if(typeof b.id==ax){b.id=j}for(f in d){if(d.hasOwnProperty(f)&&f.toLowerCase()!=="movie"){aW(h,f,d[f])}}if(al.ie){h=aQ(b.data,h.innerHTML)}for(e in b){if(b.hasOwnProperty(e)){c=e.toLowerCase();if(c==="styleclass"){h.setAttribute("class",b[e])}else{if(c!=="classid"&&c!=="data"){h.setAttribute(e,b[e])}}}}if(al.ie){ak[ak.length]=b.id}else{h.setAttribute("type",aK);h.setAttribute("data",b.data)}g.parentNode.replaceChild(h,g);a=h}return a}function aW(b,d,c){var a=ay("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aC(a){var b=aY(a);if(b&&b.nodeName.toUpperCase()=="OBJECT"){if(al.ie){b.style.display="none";(function c(){if(b.readyState==4){for(var d in b){if(typeof b[d]=="function"){b[d]=null}}b.parentNode.removeChild(b)}else{setTimeout(c,10)}}())}else{b.parentNode.removeChild(b)}}}function af(a){return(a&&a.nodeType&&a.nodeType===1)}function ad(a){return(af(a))?a.id:a}function aY(a){if(af(a)){return a}var c=null;try{c=aT.getElementById(a)}catch(b){}return c}function ay(a){return aT.createElement(a)}function aN(a){return parseInt(a,10)}function aU(a,c,b){a.attachEvent(c,b);ap[ap.length]=[a,c,b]}function av(a){a+="";var b=al.pv,c=a.split(".");c[0]=aN(c[0]);c[1]=aN(c[1])||0;c[2]=aN(c[2])||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function aF(b,f,a,c){var d=aT.getElementsByTagName("head")[0];if(!d){return}var g=(typeof a=="string")?a:"screen";if(c){aO=null;au=null}if(!aO||au!=g){var e=ay("style");e.setAttribute("type","text/css");e.setAttribute("media",g);aO=d.appendChild(e);if(al.ie&&typeof aT.styleSheets!=ax&&aT.styleSheets.length>0){aO=aT.styleSheets[aT.styleSheets.length-1]}au=g}if(aO){if(typeof aO.addRule!=ax){aO.addRule(b,f)}else{if(typeof aT.createTextNode!=ax){aO.appendChild(aT.createTextNode(b+" {"+f+"}"))}}}}function aE(a,d){if(!aR){return}var c=d?"visible":"hidden",b=aY(a);if(ao&&b){b.style.visibility=c}else{if(typeof a==="string"){aF("#"+a,"visibility:"+c)}}}function am(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=ax?encodeURIComponent(b):b}var aX=function(){if(al.ie){window.attachEvent("onunload",function(){var a=ap.length;for(var b=0;b<a;b++){ap[b][0].detachEvent(ap[b][1],ap[b][2])}var d=ak.length;for(var c=0;c<d;c++){aC(ak[c])}for(var e in al){al[e]=null}al=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,b,c){if(al.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=b;d.callbackFn=c;aM[aM.length]=d;aE(a,false)}else{if(c){c({success:false,id:a})}}},getObjectById:function(a){if(al.w3){return aB(a)}},embedSWF:function(h,b,e,c,m,j,k,f,d,g){var l=ad(b),a={success:false,id:l};if(al.w3&&!(al.wk&&al.wk<312)&&h&&b&&e&&c&&m){aE(l,false);an(function(){e+="";c+="";var s={};if(d&&typeof d===aJ){for(var p in d){s[p]=d[p]}}s.data=h;s.width=e;s.height=c;var o={};if(f&&typeof f===aJ){for(var r in f){o[r]=f[r]
}}if(k&&typeof k===aJ){for(var t in k){if(k.hasOwnProperty(t)){var q=(aP)?encodeURIComponent(t):t,n=(aP)?encodeURIComponent(k[t]):k[t];if(typeof o.flashvars!=ax){o.flashvars+="&"+q+"="+n}else{o.flashvars=q+"="+n}}}}if(av(m)){var u=aG(s,o,b);if(s.id==l){aE(l,true)}a.success=true;a.ref=u;a.id=u.id}else{if(j&&aA()){s.data=j;ai(s,o,b,g);return}else{aE(l,true)}}if(g){g(a)}})}else{if(g){g(a)}}},switchOffAutoHideShow:function(){aR=false},enableUriEncoding:function(a){aP=(typeof a===ax)?true:a},ua:al,getFlashPlayerVersion:function(){return{major:al.pv[0],minor:al.pv[1],release:al.pv[2]}},hasFlashPlayerVersion:av,createSWF:function(a,b,c){if(al.w3){return aG(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(al.w3&&aA()){ai(b,a,d,c)}},removeSWF:function(a){if(al.w3){aC(a)}},createCSS:function(a,b,c,d){if(al.w3){aF(a,b,c,d)}},addDomLoadEvent:an,addLoadEvent:aI,getQueryParamValue:function(a){var b=aT.location.search||aT.location.hash;if(b){if(/\?/.test(b)){b=b.split("?")[1]}if(a==null){return am(b)}var c=b.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==a){return am(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a0){var a=aY(ah);if(a&&ar){a.parentNode.replaceChild(ar,a);if(aL){aE(aL,true);if(al.ie){ar.style.display="block"}}if(aw){aw(az)}}a0=false}},version:"2.3"}}();var swffit=function(){var k=window,H=document,r=H.getElementsByTagName("html")[0],u=navigator.userAgent.toLowerCase(),b=/webkit/.test(u),o=/msie/.test(u)&&!k.opera,n=/firefox/.test(u)&&!k.opera,v="undefined",z,j,C,f,q,D,g,B,t,y,e;swfobject.createCSS("object","position:absolute; outline:none");function w(L,O,J,N,I,M,K){O=O||y;J=J||e;N=N||null;I=I||null;M=(M||M==null);K=(K||K==null);E({target:L,minWid:O,minHei:J,maxWid:N,maxHei:I,hCenter:M,vCenter:K})}function E(K){var J=function(L,M){return(typeof K[M]!=v)?K[M]:L},I=function(L,M){return(K[M]||(L&&typeof K[M]==v))};f=J(f,"minWid");q=J(q,"minHei");D=J(D,"maxWid");g=J(g,"maxHei");B=I(B,"hCenter");t=I(t,"vCenter");if(K.target&&(K.target!=C)){C=K.target;swfobject.addDomLoadEvent(m);if(o){swfobject.addLoadEvent(m)}}else{p()}}function m(){if(!r.style.overflowX){F(0,0)}if(!r.style.overflowY){F(0,1)}r.style.height=H.body.style.height="100%";H.body.style.margin=H.body.style.padding=0;var I="width:100%; height:100%";I+=(o)?"; overflow:hidden":"";swfobject.createCSS("#"+C,I);z=H.getElementById(C);z=(z!=v&&n&&/object/.test(z.innerHTML))?H.getElementById(C).getElementsByTagName("object")[0]:z;y=z.width;e=z.height;f=f||y;q=q||e;p()}function p(){A();if(!j){swffit.addResizeEvent(A);j=1}}function G(I,J){if(j){swffit.removeResizeEvent(A);j=0;h("top","auto");h("left","auto");h("marginTop",0);h("marginLeft",0);I=I||"100%";J=J||"100%";c(I);l(J);a()}}function a(){if(b){z.style.paddingBottom="1px";z.style.paddingBottom="0"}}function x(I,J){var K=(I)?["addEventListener","attachEvent"]:["removeEventListener","detachEvent"];if(k[K[0]]){k[K[0]]("resize",J,false)}else{if(k[K[1]]){k[K[1]]("onresize",J)}}}function c(I){var J=(isNaN(I))?I:I+"px";h("width",J)}function l(J){var I=(isNaN(J))?J:J+"px";h("height",I)}function h(J,I){if(z){z.style[J]=I}}function A(){var I=(k.innerWidth)?k.innerWidth:((H.documentElement.clientWidth)?H.documentElement.clientWidth:H.body.clientWidth),J=(k.innerHeight)?k.innerHeight:((H.documentElement.clientHeight)?H.documentElement.clientHeight:H.body.clientHeight);I-=(!o&&J<=q)?18:0;J-=(!o&&I<=f)?18:0;if(D&&I>=D){c(D);d(0,1)}else{if(I>f&&(I<D||!D)){c("100%")}else{c(f)}d(0,0)}if(g&&J>=g){l(g);d(1,1)}else{if(J>q&&(J<g||!g)){l("100%")}else{l(q)}d(1,0)}a()}function d(K,J){var L,I;if(K){L=(J&&t)?"50%":"auto";I=(J&&t)?-(g*0.5)+"px":0;h("top",L);h("marginTop",I)}else{L=(J&&B)?"50%":"auto";I=(J&&B)?-(D*0.5)+"px":0;h("left",L);h("marginLeft",I)}}function F(J,I){var K=(I)?"overflowY":"overflowX";r.style[K]=(J)?"scroll":"auto"}function s(I){var J={target:C,minWid:f,minHei:q,maxWid:D,maxHei:g,hCenter:B,vCenter:t};return J[I]}return{fit:w,configure:E,startFit:p,stopFit:G,getValueOf:s,addResizeEvent:function(I){x(1,I)},removeResizeEvent:function(I){x(0,I)},showScrollH:function(){F(1,0)},showScrollV:function(){F(1,1)},getScrollTop:function(){return H.body.scrollTop?H.body.scrollTop:(k.pageYOffset?k.pageYOffset:(H.body.parentElement?H.body.parentElement.scrollTop:0))},getScrollLeft:function(){return H.body.scrollLeft?H.body.scrollLeft:(k.pageXOffset?k.pageXOffset:(H.body.parentElement?H.body.parentElement.scrollLeft:0))}}}();(function(b){b.extend({getObjectInArray:function(e,c,f){if(isNull(f)||isNull(c)){return null}for(var d=0;d<e.length;d++){if(e[d][c]==f){return e[d];break}}return null},getDatagridTd:function(d,g,e){var c=d.datagrid("getPanel");var f=c.find('tr[datagrid-row-index="'+g+'"] td[field="'+e+'"]');return f},getDatagridLastTd:function(d,f){var c=d.datagrid("getPanel");var e=c.find('tr[datagrid-row-index="'+f+'"]:last  td:last');return e},getDatagridTr:function(d,f){var c=d.datagrid("getPanel");var e=c.find('tr[datagrid-row-index="'+f+'"]:last');
return e},slideTo:function(d,g,f,c,e){if(!d){return}c=c||0.5;g=g?g:{};f.top=(f.top==0)?"0px":f.top;f.left=(f.left==0)?"0px":f.left;g.top=(g.top==0)?"0px":g.top;g.left=(g.left==0)?"0px":g.left;f.left?(g.left?d.css({left:g.left+(isNaN(g.left)?"":"px")}):null):null;f.top?(g.top?d.css({top:g.top+(isNaN(g.top)?"":"px")}):null):null;d.cssAnimate({left:f.left+(isNaN(f.left)?"":"px"),top:f.top+(isNaN(f.top)?"":"px")},c,null,e)}});b.fn.cssAnimate=function(g,e,c,f,d){b(this).each(function(){var m=b(this);if(!supportCss("transition")){if(d>0){m.stop(true).delay(d*1000).animate(g,e,c,f)}else{m.stop(true).animate(g,e*1000,c,f)}}else{var l="";for(var j in g){var k=j+" "+e+"s "+(c||"")+",";if(j.indexOf("transform")==0){k+="-webkit-"+j+" "+e+"s "+(c||"")+","}l+=k;getComputedStyle(m.get(0))[j]}l=l.substr(0,l.length-1);var n=b.extend({},g,{transition:l,"-webkit-transition":l});if(d&&d>0){n["transition-delay"]=d+"s";n["-webkit-transition-delay"]=d+"s"}var h="transitionend webkitTransitionEnd";m.unbind(h).one(h,function(){try{(typeof f=="function")?f():null}catch(o){console.log(o)}});m.css(n)}});return b(this)};b.fn.endCssAnimate=function(){b(this).each(function(){var d=b(this);d.stop(true,true);var c="transitionend webkitTransitionEnd";d.unbind(c);d.css({transition:"none","-webkit-":"none"})});return b(this)};b.fn.beclick=function(c){b(this).unbind("click").bind("click",c);return b(this)};b.fn.rebind=function(d,c){b(this).unbind(d).bind(d,c);return b(this)};b.fn.reone=function(d,c){b(this).unbind(d).one(d,c);return b(this)};b.fn.scrollY=function(c){c=(c==null)?true:c;b(this).css({"overflow-y":!c?"hidden":"auto"});return b(this)};b.fn.scrollX=function(c){c=(c==null)?true:c;b(this).css({"overflow-x":!c?"hidden":"auto"});return b(this)};b.fn.toggleSelected=function(d){d=d?d:"nowid";var c=b(this);c.siblings().removeClass(d);c.addClass(d);return c};b.fn.disableSelect=function(){b(this).css({"-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","user-select":"none"}).attr("unselectable","on")};b.fn.del=function(){b(this).clear();b(this).unbind().empty().remove()};b.fn.clear=function(){b(this).each(function(){var c=b(this).get(0);b("*",c).add([c]).each(function(){b.event.remove(this);b.removeData(this)});c.innerHTML?c.innerHTML="":null});return b(this)};b.fn.enter=function(c){b(this).unbind("keydown").bind("keydown",function(d){if(d.keyCode==13){c()}});return b(this)};b.fn.changeValue=function(g){var f;var e=b(this);if(e.attr("type")=="radio"){e.each(function(){if(b(this).get(0).checked){f=b(this).val()}})}else{if(e.attr("type")=="checkbox"){e.each(function(){if(b(this).get(0).checked){f+=b(this).val()+","}});if(f.length>1){f=f.substr(0,f.length-1)}if(typeof g=="object"){f=f.split(",")}}else{f=e.val()}}if(compare(g,f)||(!isNull(g.value)&&g.value==f)){return}if(e.attr("type")=="radio"){var d=false;if(typeof g=="object"){g=g[0]}e.each(function(){if(b(this).get(0).value==g){b(this).get(0).checked=true;d=true;b(this).change()}else{b(this).get(0).checked=false}});if(!d){e.change()}}else{if(e.attr("type")=="checkbox"){if(typeof g=="string"){g=g.split(",")}e.val(g).change()}else{if(typeof g=="object"&&!isNull(g.text)&&!isNull(g.value)){var c=e.data("textinput");if(c){c.val(g.text)}e.val(g.value).change()}else{e.val(g).change()}}}return e};b.fn.checkPower=function(){if(!CHECKPOWER){return true}var c=b(this).powerFlag();return WINDOW.checkPower(c)};b.fn.powerFlag=function(g){var f="";var d=b(this);var h="data-allow";if(g){if(b.isArray(g)){for(var e=0;e<g.length;e++){f+=g[e]+"|"}if(f.length>1){f=f.substr(0,f.length-1)}}else{if(typeof g=="string"){f=g}}if(f){d.attr(h,f);return f.split("|")}else{d.removeAttr(h);return null}}else{var c=trim(d.attr(h));return(c&&c!="undefined")?c.split("|"):null}};b.fn.dataOptions=function(h,c){c=c?c:"data-option";if(h){try{var f=JSON.stringify(h);f=f.replace(/\"/g,"'");b(this).attr(c,f)}catch(g){}return}var d={};var f=b(this).attr(c)+"";try{f=f.replace(/\'/g,'"');d=JSON.parse(f)}catch(g){}return d};b.fn.getDataOptions=function(c){return b(this).dataOptions(null,c)};b.fn.setRealSize=function(c,d){b(this).each(function(){var e=b(this);if(c){e.width(Math.floor(c-(e.outerWidth(true)-e.width())))}if(d){e.height(Math.floor(d-(e.outerHeight(true)-e.height())))}});return b(this)};b.fn.fillParent=function(){b(this).each(function(){var f=b(this);var d=f.parent().css("overflow");f.parent().css("overflow","hidden");var c=f.parent().width();var e=f.parent().height();f.setRealSize(c,e);f.parent().css("overflow",d)});return b(this)};b.fn.centerInWindow=function(){b(this).css({left:Math.floor((b(window).width()-b(this).width())/2)+"px",top:Math.floor((b(window).height()-b(this).height())/2)+"px"});return b(this)};b.fn.getCenter=function(){var d=b(this).offset();var c=[Math.floor(d.left+b(this).outerWidth(true)/2)-b(window).scrollLeft(),Math.floor(d.top+b(this).outerHeight(true)/2)-b(window).scrollTop()];return c};b.fn.getBounce=function(){var c=b(this).offset();var d={x:Math.floor(c.left-b(window).scrollLeft()),y:Math.floor(c.top-b(window).scrollTop()),w:Math.floor(b(this).outerWidth()),h:Math.floor(b(this).outerHeight())};
return d};b.fn.getMinSize=function(){var k=b(this);var d=k.css("min-width")+"";var g=k.css("min-height")+"";var c=k.css("width")+"";var f=k.css("height")+"";d=parseInt(d.replace("px",""))||0;g=parseInt(g.replace("px",""))||0;c=parseInt(c.replace("px",""))||0;f=parseInt(f.replace("px",""))||0;var e=k.get(0).style.flex+"";var l=e.split(" ");e=e?Number(l[0])||0:0;var j=0;if(e&&e!="NaN"){c=d||0;f=g||0;k.css({"-ms-flex":e+" "+(l[1]||1)+" "+(l[2]||"auto")});if(l[2]){j=parseInt(l[2].replace("px",""));c=Math.max(c,j);f=Math.max(f,j)}}else{c=Math.max(c,d);f=Math.max(f,g)}return{minw:c,minh:f}};b.fn.fillFont=function(c){b(this).each(function(){var e=b(this);if(e.data("fillfont")){return}var d=new fillWraperFont(e,c);e.data("fillfont",d)})};b.fn.resizeFillFont=function(){b(this).each(function(){var c=b(this).data("fillfont");if(c&&typeof c.resize=="function"){c.resize()}})};b.fn.fitImg=function(){b(this).each(function(){var c=b(this).width();var f=b(this).height();var e=b(this).find(">img:eq(0)");if(e.length==0){return}var d;if(b(this).hasClass("fm_piccut")){d=b(this)}else{d=b('<div class="fm_piccut"></div>');e.after(d);d.css("overflow","hidden").width(c).height(f);d.append(e)}if(e.get(0).complete){a(e,c,f)}else{e.one("load",function(){a(e,c,f)}).one("error",function(){e.remove();d.addClass("fm_imagerror")});e.get(0).src=e.get(0).src}});return b(this)};function a(e,c,g){e.css({"margin-top":"0px","margin-left":"0px"});var f=e.width();var j=e.height();if(f>0&&j>0&&c>0&&g>0){}else{e.css({width:"100%",height:"100%"});return}if(f==c||j==g){return}if(j*c/f>g){j=Math.ceil(j*c/f);f=c}else{f=Math.ceil(f*g/j);j=g}var k=Math.floor((c-f)/2)+"px";var d=Math.floor((g-j)/2)+"px";e.height(j).width(f).css({"margin-top":d,"margin-left":k})}b.fn.getDatagridSelectedIds=function(g){var c=b(this);var f=c.datagrid("getChecked");var e="";for(var d=0;d<f.length;d++){e+=f[d][g]+","}if(e.length>0){e=e.substr(0,e.length-1)}return e};b.fn.DropDown=function(j){var c=b(this).eq(0);if(c.length==0){return}var e=c.dataOptions();b.extend(e,j);e.action=!e.action?"click":(e.action=="mouseenter"?"mouseenter":"click");e.hideaction=e.action=="mouseenter"?"mouseleave":"click";if(!e){return}c.css({position:"relative"});var d=c.find("#"+e.dropid);var h=d.outerWidth()-d.width();d.hide();d.css({position:"absolute",top:(c.outerHeight()-2)+"px",left:"0px","min-width":(c.outerWidth()-h)+"px","z-index":9999});var f=function(){d.unbind().stop().slideUp("fast");d.removeClass("open");c.unbind(e.hideaction)};var g=function(){if(d.hasClass("open")){if(e.action=="click"){f();return}}d.stop().slideDown("fast").addClass("open");d.one("mouseleave",f);if(e.action=="mouseenter"){c.one(e.hideaction,f)}if(e.hidebyclick){d.one("click",f)}};c.bind(e.action,g)};b.fn.AccordionFrame=function(f){var d=b(this);var g=d.find(">*");g.each(function(){var j=b(this).dataOptions();var h=b('<div class="fm_AccordionBar"><i class="fa fa-angle-down"></i> '+(j.title||"")+"</div>");b(this).before(h);j.open?h.addClass("open").find("i").attr("class","fa fa-angle-up"):b(this).hide()});var e=d.find(">div.fm_AccordionBar");if(e.length==0){e.eq(0).addClass("open").find("i").attr("class","fa fa-angle-up");g.eq(0).show()}var c=function(){var h=e.index(b(this));if(b(this).hasClass("open")){b(this).removeClass("open").find("i").attr("class","fa fa-angle-down");g.eq(h).hide();return}if(f){e.removeClass("open").find("i").attr("class","fa fa-angle-down");g.hide()}b(this).addClass("open").find("i").attr("class","fa fa-angle-up");g.eq(h).show()};e.bind("click",c)}})(jQuery);function getDateString(a){if(!a){a=new Date()}return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}function delHostUrl(htmlStr){var host=window.location.href.split("://")[0]+"\\:\\/\\/"+window.location.host.replace(/\:/g,"\\:");host="/"+host+"/g";htmlStr=htmlStr.replace(eval(host),"");return htmlStr}function trim(a){if(isNull(a)){return""}return(a+"").replace(/^\s*|\s*$/g,"")}function delBlank(a){if(isNull(a)){return""}return(a+"").replace(/(\s+)$/g,"").replace(/\s+/g,"")}function delHtmlTag(a){return a.replace(/<[^>]+>/g,"")}function delReturn(a){a=a.replace(/[\n]/ig,"");a=a.replace(/[\r]/ig,"");return a}function addCookie(e,a,d){var f=e+"="+escape(a);d=d?d:0;if(d>0){var c=new Date();var b=d*3600*1000;c.setTime(c.getTime()+b);f+="; expires="+c.toGMTString()}document.cookie=f+"; path=/"}function getCookie(c){var d=document.cookie.split("; ");for(var b=0;b<d.length;b++){var a=d[b].split("=");if(a[0]==c){return unescape(a[1])}}}function delCookie(b){var a=new Date();a.setTime(a.getTime()-10000);document.cookie=b+"=a; expires="+a.toGMTString()+"; path=/"}function allCookie(){var a=document.cookie;return a}function saveToLocal(b,c){var a=(typeof c=="string")?c:JSON.stringify(c);if(!window.localStorage){addCookie(b,a,5*365*24);return}var d=window.localStorage;d.setItem(b,a)}function readFromLocal(b){var a="";if(!window.localStorage){a=getCookie(b)}else{var d=window.localStorage;a=d.getItem(b)
}try{a=JSON.parse(a)}catch(c){}return a}function removeLocal(a){if(!window.localStorage){delCookie(a)}else{var b=window.localStorage;b.removeItem(a)}}function stopPP(b){var a=b||window.event;a.stopPropagation?a.stopPropagation():(a.cancelBubble=true)}function HTMLEncode(c){var b=document.createElement("div");(b.textContent!=null)?(b.textContent=c):(b.innerText=c);var a=b.innerHTML;b=null;return a}function formatHtml(f){try{var b=$(f);var a=$("<div></div>");a.append(b);var c=a.html();a.empty().remove();a=null;return c}catch(d){return""}}function Html2Str(d){try{var a=$("<div></div>");a.text(d);var b=a.text();a.empty().remove();a=null;return b}catch(c){return""}}function formatSqlStr(c){try{var a=c.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;");return a}catch(b){console.log(b)}return""}function HTMLDecode(c){var b=document.createElement("div");b.innerHTML=c;var a=b.innerText||b.textContent;b=null;return a}function creatCode(a,c){var f="";var b=new Date();f=""+b.getTime();f=f.substr(c,f.length);f=Math.floor(100*Math.random())+""+f;var e="";for(var d=0;d<f.length;d++){if(d%2==0){e+=a.substr(f[d],1)}else{e+=f[d]+""}}return e}function delSelect(a){$("select[name="+a+"]").find("option").each(function(){if($(this).get(0).selected==true){$(this).remove()}})}function delSelectOption(a){a.find("option").each(function(){if($(this).get(0).selected==true){$(this).remove()}})}function mergeJson(a){try{return $.extend({},a)}catch(b){return null}}function cloneJson(a){try{return JSON.parse(JSON.stringify(a))}catch(b){try{return $.extend(true,{},a)}catch(b){return null}}}function inArray(a,b){for(i=0;i<a.length;i++){if(a[i]==b){return true;break}}return false}function getDateFromStr(c){if(!c||c==""){return null}var a=c.split("-");var b=new Date();if(a[0]){b.setYear(parseInt(a[0]))}if(a[1]){b.setMonth(parseInt(a[1]-1))}if(a[2]){b.setDate(parseInt(a[2]))}return b}function getDateStingForce2(a){return a.getFullYear()+"-"+formatTo2((a.getMonth()+1))+"-"+formatTo2(a.getDate())}function getDateTimeStingForce2(a){return a.getFullYear()+"-"+formatTo2((a.getMonth()+1))+"-"+formatTo2(a.getDate())+" "+formatTo2(a.getHours())+":"+formatTo2(a.getMinutes())+":"+formatTo2(a.getSeconds())}function formatTo2(a){a="0"+a;return a.substr(a.length-2,2)}function getObjectValue(b){if(typeof b=="string"){if(b.indexOf("[")==0||b.indexOf("{")==0){b=b.replace(/\'/g,'"');try{b=JSON.parse(b)}catch(a){b=null}}else{if(b===""){b=null}else{b=b.split(",")}}}return b}function getArrayFromString(a,b){if(a==""){return[]}if(typeof a=="string"){b=b?b:",";if(a.indexOf("[")==0){try{return JSON.parse(a)}catch(c){return a.split(b)}}else{return a.split(b)}}else{if($.isArray(a)){return a}}return[]}function cutArrayStringTail(a){if(a.length==0){return a}while(a.substr(a.length-1,1)==","){a=a.substr(0,a.length-1)}return a}function getQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");var c=decodeURI(window.location.search).substr(1).match(b);if(c!=null){return unescape(c[2])}return null}function delInputHtml(){var a=$(this);a.css("opacity",0.01);setTimeout(function(){var b=trim(a.html()+"");b=clearHtml(b);a.html(b);a.css("opacity",1)},30)}function clearHtml(html){var tempDIv=$("<div></div>");var replaceArr=["/\\<\\/div\\>\\<div\\>/g","/\\<\\/DIV\\>\\<DIV\\>/g","/\\<div\\>/g","/\\<DIV\\>/g","/\\<\\/div\\>/g","/\\<\\/DIV\\>/g","/\\<\\/p\\>\\<p\\>/g","/\\<\\/P\\>\\<P\\>/g","/\\<br\\>/g","/\\<BR\\>/g","/\\<br\\/\\>/g","/\\<BR\\/\\>/g"];str=html;if(browserIsOpera){str=str.replace(/\<div\>\<br\>\<\/div\>/g,"###br###");str=str.replace(/\<div\>\<br\/\>\<\/div\>/g,"###br###")}for(var i=0;i<replaceArr.length;i++){str=str.replace(eval(replaceArr[i]),"###br###")}tempDIv.html(str);str=tempDIv.text()+"";str=str.replace(/###br###/g,"<br/>");tempDIv=null;return str}function formatHtml(html){var replaceArr=["/\\<\\/div\\>\\<div\\>/g","/\\<\\/DIV\\>\\<DIV\\>/g","/\\<div\\>/g","/\\<DIV\\>/g","/\\<\\/div\\>/g","/\\<\\/DIV\\>/g","/\\<\\/p\\>\\<p\\>/g","/\\<\\/P\\>\\<P\\>/g","/\\<br\\>/g","/\\<BR\\>/g","/\\<br\\/\\>/g","/\\<BR\\/\\>/g"];str=html;if(browserIsOpera){str=str.replace(/\<div\>\<br\>\<\/div\>/g,"###br###");str=str.replace(/\<div\>\<br\/\>\<\/div\>/g,"###br###")}for(var i=0;i<replaceArr.length;i++){str=str.replace(eval(replaceArr[i]),"###br###")}str=Html2Str(str);str=formatSqlStr(str);str=str.replace(/###br###/g,"<br/>");return str}function isNull(a){return(a==null||typeof a=="undefined")?true:false}function getObjectName(c){for(var b in window){if(window[b]==c){return(b.toString());break}}return null}function compare(o,m){var r=/undefined|number|string|boolean/,l=/^(function\s*)(\w*\b)/,j="constructor",n="childNodes",g="parentNode",c=arguments.callee;if(o===null&&m===null){return true}if(r.test(typeof o)||r.test(typeof m)||o===null||m===null){var f=(o===null||typeof o=="undefined")?"":o;var p=(m===null||typeof m=="undefined")?"":m;return f.toString()===p.toString()}if(o[j]!==m[j]){return false}switch(o[j]){case Date:return o.valueOf()===m.valueOf();
case Function:return o.toString().replace(l,"$1")===m.toString().replace(l,"$1");case Array:if(o.length!==m.length){return false}for(var h=0;h<o.length;h++){if(!c(o[h],m[h])){return false}}break;default:var e=0,q=0,k;if(o===m){return true}if(o[n]||o[g]||m[n]||m[g]){return o===m}for(k in o){e++}for(k in m){q++}if(e!==q){return false}for(k in o){if(!c(o[k],m[k])){return false}}break}return true}function destroyDom(a){if(!a){return}a.each(function(){var b=$(this).get(0);$("*",b).add([b]).each(function(){$.event.remove(this);$.removeData(this)});b.innerHTML=""})}function flashChecker(){var a=0;var b=0;if(document.all){var d;try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){return{f:0,v:0}}if(d){a=1;VSwf=d.GetVariable("$version");b=parseInt(VSwf.split(" ")[1].split(",")[0])}else{return{f:0,v:0}}}else{if(navigator.plugins&&navigator.plugins.length>0){var d=navigator.plugins["Shockwave Flash"];if(d){a=1;var g=d.description.split(" ");for(var c=0;c<g.length;++c){if(isNaN(parseInt(g[c]))){continue}b=parseInt(g[c])}}}}return{f:a,v:b}}function supportCss(d){var f=["webkit","Moz","ms","o"],c,e=[],a=document.documentElement.style,b=function(g){return g.replace(/-(\w)/g,function(j,h){return h.toUpperCase()})};for(c in f){e.push(b(f[c]+"-"+d));e.push(b(d))}for(c in e){if(e[c] in a){return true}}return false}function getPicRealSize(d){var b=new Image();b.src=d.attr("src");var c=b.width;var a=b.height;b=null;return{width:c,height:a}}function isScroll(a){if(a.get(0).style.overflow=="hidden"||a.get(0).style.overflowY=="hidden"){return false}var b=a.scrollTop();if(b>0){return true}a.scrollTop(10);b=a.scrollTop();if(b>0){a.scrollTop(0);return true}return false}function getScrollBarWidth(){var c=$("<div></div>");c.height($(window).height()+100);$("body").append(c);$("body").hide();var b=$(window).width();$("body").show();var a=$(window).width();c.remove();c=null;return b-a}function fillWraperFont(a,b){var c=this;this.option={min:1,max:9999,length:1};this.install=function(){$.extend(c.option,b);c.resize()};this.resize=function(){var e=a.width();e=Math.floor(e/c.option.length);var g=a.height();if(e==0||g==0){return}var f=Math.floor(Math.min(e,g));f=(f<c.option.min)?c.option.min:(f>c.option.max)?c.option.max:f;var d=g+"px";a.css({"font-size":f+"px","line-height":d})};this.install()}function dateDiff(c,h,f){var d={D:1000*60*60*24,H:1000*60*60,M:1000*60,S:1000,T:1};c=c.toUpperCase();var b=Date.parse(h.replace(/-/g,"/"));var a=Date.parse(f.replace(/-/g,"/"));try{return Math.round((a-b)/d[c])}catch(g){return g.message}}function checkArrayDeep(e,a,g){a=a||"children";var b=g||1;var c=b;var f=false;for(var d=0;d<e.length;d++){if(e[d][a]&&e[d][a].length>0){if(!f){b++;c++;f=true}b=Math.max(b,checkArrayDeep(e[d][a],a,c))}}return b}(function(n,p,u){var w=n([]),s=n.resize=n.extend(n.resizediv,{}),o,l="setTimeout",m="resizediv",t=m+"-special-event",v="delay",r="throttleWindow";s[v]=250;s[r]=true;n.event.special[m]={setup:function(){if(!s[r]&&this[l]){return false}var a=n(this);w=w.add(a);n.data(this,t,{w:a.width(),h:a.height()});if(w.length===1){q()}},teardown:function(){if(!s[r]&&this[l]){return false}var a=n(this);w=w.not(a);a.removeData(t);if(!w.length){clearTimeout(o)}},add:function(b){if(!s[r]&&this[l]){return false}var c;function a(d,h,g){var f=n(this),e=n.data(this,t);if(!e){return}e.w=h!==u?h:f.width();e.h=g!==u?g:f.height();c.apply(this,arguments)}if(n.isFunction(b)){c=b;return a}else{c=b.handler;b.handler=a}}};function q(){o=p[l](function(){w.each(function(){var d=n(this),a=d.width(),b=d.height(),c=n.data(this,t);if(c&&(a!==c.w||b!==c.h)){d.trigger(m,[c.w=a,c.h=b])}});q()},s[v])}})(jQuery,this);function getIndex(a){if(typeof ZINDEX=="object"){return ZINDEX[a]||99999}return 99999}(function(c){c.extend({alert:function(d){b(d)},confirm:function(d,e){b(d,"confirm",e)},success:function(d){b(d,"success")},errormsg:function(d){b(d,"error")},loading:function(e,d){var f=new loadingRoll();if(e){setTimeout(function(){try{f.destroy()}catch(g){}},e)}f.show(d)},loaded:function(){c(document).trigger("CLEAR_MASK").trigger("HIDE_LOADING")},progress:function(d,f){var h=c("#fm_loading");if(h.length==0){h=new loadingRoll();h.show(f)}else{h=h.data("loadobj")}try{h.progress(d)}catch(g){}},message:function(f,e){e=e>0?e:2000;c("#fm_popShowMessage").stop().remove();var d=c('<div id="fm_popShowMessage">'+HTMLDecode(f)+"</div>");c("body").append(d);d.css({position:"fixed",bottom:"0px",padding:"8px",width:"70%","text-align":"center","z-index":getIndex("messager"),"background-color":"#000",color:"#fff","border-radius":"4px",opacity:0,"font-size":"12px","max-width":"800px","box-shadow":"0px 0px 5px #000","max-height":(c(window).height()-100)+"px","overflow-y":"auto","overflow-x":"hidden"});d.css("left",((c(window).width()-d.outerWidth(true))/2)+"px");d.animate({bottom:"50px",opacity:0.7},800).delay(e).fadeOut("slow",function(){d.stop().remove()}).bind("mousedown",function(){d.stop().remove()})},lockMask:function(e,g,f){var d=new popMask(e);f?d.name=f:null;
if(g){setTimeout(d.destroy,g)}return d},clearMask:function(d){c(".fm_Mask").each(function(){try{var f=c(this).data("obj");if(f.name==d){f.destroy();c(this).del()}}catch(g){}})},clearAllMask:function(){c(".fm_Mask").each(function(){try{var d=c(this).data("obj");d.destroy()}catch(f){}c(this).del()})},popMessage:function(g,h,e,k,d,j){var f=new popOutSelfMsg(g,h,e,k,d,j)},clearPopMessage:function(){c(document).trigger("HIDE_MSG")},slideUpMessage:function(j,r,l,o,d,k){d=d?d:0;var p=getIndex("popMsg");var f=c("body").find(".fm_slideUpMsgWindow"+(k?("#"+k):""));if(f.length>0){try{f.data("destroy")()}catch(h){}f.remove();f=null}f=c('<div class="fm_slideUpMsgWindow" id="'+k+'"><div class="fm_slmsgTitle bkflash"><a  style="float:right"><i class="fa fa-remove"/></a><i class="fa fa-comment"/>\u6d88\u606f\u63d0\u9192</div><div class="fm_slmsgContent" style="overflow:hidden"></div></div>');f.css({position:"fixed",right:d+"px",bottom:"0px","z-index":p});c("body").append(f);var g=f.find(".fm_slmsgContent");g.append(j);g.height(0).width(r[0]).animate({height:r[1]},600);var q;var n;if(o){var q=new popMask(p-1)}var m=function(t,s){if(s&&s.msgId&&k&&s.msgId!=k){return}if(n){clearTimeout(n);n=null}if(!f){return}if(q){q.destroy();q=null}c(document).unbind("HIDE_SLIDE_MSG",m);g.stop().del();f.del();f=null};f.data({destroy:m,id:k});c(document).bind("HIDE_SLIDE_MSG",m);f.find(".fm_slmsgTitle a").bind("click",m);if(l>0){n=setTimeout(m,l)}},closeSlideUpMessage:function(d){c(document).trigger("HIDE_SLIDE_MSG",{msgId:d})},closetips:function(){c(".fm_popShowTips").stop().each(function(){try{var f=c(this);f.data("destroy")()}catch(d){}c(this).del()})},tips:function(k,q,l,p,m){m=m?m:2000;var r;var o;if(!k){return}if(k.html||k.innerHTML){try{var j=c(k).getBounce();switch(q){case"left":r=[j.x,Math.floor(j.y+j.h/2)];break;case"right":r=[j.x+j.w,Math.floor(j.y+j.h/2)];break;case"top":r=[Math.floor(j.x+j.w/2),j.y];break;case"bottom":r=[Math.floor(j.x+j.w/2),j.y+j.h];break}}catch(u){return}}else{if(c.isArray(k)){r=k}else{return}}c.closetips();q=q?q:"top";var f=c('<div class="fm_popShowTips"><div class="relpos"></div></div>');var g=c('<div class="fm_arrow arrow_'+q+'"></div></div>');var x=c('<span><i class="fa fa-remove"></i></span>');f.find(".relpos").append(g).append(x);var s=c('<div class="fm_tipsContent" style="padding:8px"></div>');l=(typeof l=="function")?l():l;(typeof l=="object")?s.append(l):s.html(l+"");c("body").append(f);f.append(s);if(p){p[0]?s.width(p[0]):null;p[1]?s.height(p[1]):null}else{s.getFitSize(4/3,80)}f.css({position:"absolute","z-index":getIndex("tips")});g.css({position:"absolute"});x.css({position:"absolute",cursor:"pointer",display:"block",width:"16px",height:"16px","line-height":"16px","font-size":"14px","text-align":"center",color:"#e68546"}).find("i").css({cursor:"pointer"});var h=g.outerWidth()-1;var n=g.outerHeight();var d={w:f.outerWidth(),h:f.outerHeight()};switch(q){case"left":f.css({left:(r[0]-d.w-h)+"px",top:Math.floor(r[1]-d.h/2)+"px"});g.css({top:Math.floor((d.h-n)/2)+"px",right:-h+"px"});x.css({top:"0px",left:"2px"});break;case"right":f.css({left:(r[0]+h)+"px",top:Math.floor(r[1]-d.h/2)+"px"});g.css({top:Math.floor((d.h-n)/2)+"px",left:-h+"px"});x.css({top:"1px",right:"2px"});break;case"top":f.css({left:Math.floor(r[0]-d.w/2)+"px",top:(r[1]-d.h-n)+"px"});g.css({left:Math.floor((d.w-h)/2)+"px",top:(d.h-1)+"px"});x.css({top:"1px",right:"2px"});break;case"bottom":f.css({left:Math.floor(r[0]-d.w/2)+"px",top:(r[1]+n)+"px"});g.css({left:Math.floor((d.w-h)/2)+"px",top:-n+"px"});x.css({top:(d.h-3-x.outerHeight())+"px",right:"1px"});break}var t=function(y){y.stopPropagation()};var w=function(){if(o){clearTimeout(o);o=null}if(f){f.css({opacity:0}).del();f=null}c(window).unbind("resize",w).unbind("scroll",w);c(document).unbind("mousedown",w).unbind("mouseup",w).unbind("CLEAR_MASK")};var v=function(){f.css("opacity",0);o=setTimeout(w,1000)};f.data("destroy",w);o=setTimeout(v,m);f.css({opacity:1}).bind("mousedown",t).bind("mouseup",t).bind("mouseenter",function(){if(o){clearTimeout(o);o=null}}).bind("mouseleave",function(){o=setTimeout(v,m)});c(window).one("resize",w).one("scroll",w);c(document).one("mousedown",w).one("mouseup",w);x.one("click",w)}});c.fn.Tips=function(g,j,f,h,e){g=g?g:"mouseenter";var d=c(this);f=f?f:"right";d.bind(g,function(){c.closetips();c.tips(d,f,j,h);if(!e){d.unbind("mouseleave").one("mouseleave",c.closetips)}})};c.fn.ZoomBigPic=function(){c(this).unbind("click").bind("click",function(){var d=c(this).is("img")?c(this):c(this).find("img:eq(0)");var f=d.attr("src");var e=d.attr("title");if(f){new showPopBigPic(f,e)}return false})};c.fn.getFitSize=function(f,g){f=f?f:(4/3);g=g?g:60;var e=c(this);e.width("auto").height("auto");var d=e.width();if(d<=g){e.width(g);return}while(e.width()/e.height()>f){d-=10;if(d<=g){e.width(g);break}else{e.width(d)}}e.css("overflow-y","auto")};function a(h,f){var e="";switch(f){case"confirm":e="fa fa-question-circle";break;case"success":e="fa fa-check-circle";break;case"alert":e="fa fa-exclamation-circle";
break;case"error":e="fa fa-times-circle";break;default:e="fa fa-warning";break}var g=c('<div class="fm_alertContentDiv '+f+'"><i class="'+e+'"></i></div>');var d=c("<div></div>");h=HTMLDecode(h).replace(/\n/g,"<br/>");d.html(h);g.append(d).append(c('<p><a class="confirmbut" >\u786e\u5b9a</a>'+(f=="confirm"?'<a class="cancelbut" >\u53d6\u6d88</a>':"")+"</p>"));return g}function b(e,g,l){var m=new popMask(getIndex("messager")-1);var k=a(e,g||"alert");c("body").append(k);k.getFitSize(c(window).width()/c(window).height(),180);var h=new dragDivObj();h.install(k,k);var d=new CenterInWindow(k);k.css("z-index",getIndex("messager"));var f=function(n){if(!k){c(document).unbind("keydown",f);return}if(n.keyCode==13||n.keyCode==27){j(n.keyCode==13)}};var j=function(n){c(document).unbind("keydown",f);h.stopDrag();h=null;d.destroy();d=null;k.remove();k=null;m.destroy();m=null;if(typeof l=="function"){l(n)}};c(document).one("keydown",f);k.find("p a").bind("click",function(){j(c(this).hasClass("confirmbut"))})}})(jQuery);function popMask(b,c){var e=this;this.mask=$('<div class="fm_Mask"></div>');this.mask.data("obj",e);this.name=c||"mask";this.install=function(){$("body").append(e.mask);e.mask.hide().css({position:"fixed",top:"0px",left:"0px","z-index":b||999});a();e.mask.fadeIn("normal");$(window).bind("resize",a).one("CLEAR_MASK",e.destroy);e.mask.bind("mousewheel",d)};function d(f){f.stopPropagation();f.preventDefault()}this.hide=function(){e.mask.stop(true,true).hide()};this.show=function(){e.mask.stop(true,true).show()};function a(){if(!e.mask){e.destroy();return}var f=$(window).width();var g=$(window).height();e.mask.width(f).height(g)}this.destroy=function(){$(window).unbind("resize",a).unbind("CLEAR_MASK",e.destroy);if(!e.mask){return}e.mask.unbind();e.mask.fadeOut("normal",function(){e.mask.remove();e.mask=null})};this.install()}function CenterInWindow(g,h){var f=this;var d=true;var e=[];this.install=function(){h=h?h:[0.5,0.5];g.css({position:"fixed"});a();d=false;$(window).bind("resize",b)};this.destroy=function(){$(window).unbind("resize",b)};var c;function b(){if(c){clearTimeout(c);c=null}c=setTimeout(a,100)}function a(){var j=$(window).width();var k=$(window).height();if(typeof h[0]=="string"){if(h[0]=="right"){e[0]=j-g.outerWidth(true)}else{e[0]=0}}else{e[0]=h[0]>1?h[0]:j*h[0];e[0]-=(g.outerWidth(true)/2)}if(typeof h[1]=="string"){if(h[1]=="bottom"){e[1]=k-g.outerHeight(true)}else{e[1]=0}}else{e[1]=h[1]>1?h[0]:k*h[0];e[1]-=(g.outerHeight(true)/2)}e[1]=e[1]>0?e[1]:0;if(d){g.css({left:Math.floor(e[0])+"px",top:Math.floor(e[1])+"px"})}else{g.stop().animate({left:Math.floor(e[0])+"px",top:Math.floor(e[1])+"px"},500)}}this.install()}function popOutSelfMsg(f,g,k,c,j){var l;var d;var e;var b=this;var a;var h=j||getIndex("tips");this.show=function(){b.destroy();if(!c){d=new popMask(h-1)}l=$('<div id="fm_popMsgContainer"></div>');l.css({position:"fixed","z-index":h,"min-height":"40px","min-width":"40px","background-color":"#fff","border-radius":"6px",padding:"8px","box-shadow":"0px 0px 3px #666",overflow:"auto"});$("body").append(l);l.append(f);if(k){l.setRealSize(k[0],k[1])}a=new CenterInWindow(l);l.data("msgobj",b).hide().fadeIn("slow");$(document).one("HIDE_MSG",b.destroy);if(g&&g>0){e=setTimeout(b.destroy,g)}return l};this.destroy=function(){$(document).unbind("HIDE_MSG",b.destroy);if(e){clearTimeout(e);e=null}if(a){a.destroy()}if(l){l.del();l=null}if(d){d.destroy();d=null}};b.show()}function loadingRoll(){var h;var b;var c;var g=1;var a;var e=this;var d;this.show=function(j){e.destroy();if(!j){c=new popMask(getIndex("loadingMask"))}b=$('<div id="fm_loading"></div>');b.css({position:"fixed","z-index":"9999",height:"40px",width:"40px","background-color":"#000","border-radius":"8px",opacity:"0.7","background-repeat":"no-repeat","background-position":"center 0px",overflow:"hidden"});$("body").append(b);d=new CenterInWindow(b);b.data("loadobj",e).hide().fadeIn("slow");h=setInterval(f,66);$(document).one("HIDE_LOADING",e.destroy)};this.progress=function(j){var k=b.find(".fm_progress");if(k.length==0){k=$('<div class="progressBar"><div></div></div>');b.append(k);b.css({overflow:"visible"});k.css({position:"relative",height:"20px"}).find(">div").css({position:"absolute","text-align":"center",margin:"0px",padding:"3px","padding-left":"15px","padding-right":"15px","border-radius":"15px","line-height":"18px",color:"#fff","background-color":"#000",opacity:1,top:(b.height()+10)+"px","min-width":"140px","max-width":"600px"})}k.find(">div").text(j);k.find(">div").css({left:-Math.floor((k.find(">div").outerWidth()-b.outerWidth())/2)+"px"})};function f(){b.css("background-position","center "+(g*-40)+"px");g=(g+1)%12}this.destroy=function(){$(document).unbind("HIDE_LOADING",e.destroy);if(a){clearTimeout(a);a=null}if(d){d.destroy()}if(b){b.del();b=null}if(c){c.destroy();c=null}if(h){clearInterval(h);h=null}}}function LoadingProgress(c,e){var f=this;var b;var a;var d;this.showLoading=function(){$("#fm_loadingbar").del();if(!d){d=$("<div id='fm_loadingbar'></div>");
$("body").append(d);d.addClass("waiting")}d.show().width((50+Math.random()*30)+"%")};this.progress=function(){if(!d){return}d.width("101%").delay(200).fadeOut(400,function(){d.hide().width(0)})};this.destroy=function(){if(d){d.remove();d=null}}}function showPopBigPic(a,l){var c=this;var f;var e;var o;var q;var j=0.9;var b;var m;var h;var d=0;this.install=function(){q=new popMask(getIndex("image"));f=$('<img src="'+a+'"/>');f.css({position:"fixed",border:"1px solid #CCC","box-shadow":"2px 2px 8px #666666","z-index":getIndex("image")+1,opacity:0,transition:"opacity 0.5s,transform 0.5s","background-color":"#fff"});$("body").append(f);if(supportCss("transform")||l){h=$('<div class="bigPicTitle">'+(supportCss("transform")?'<a id="rotationLeft"><i class="fa fa-undo"></i></a><a id="rotationRight"><i class="fa fa-repeat"></i></a>':"")+'<a id="closePicBut"><i class="fa fa-remove"></i></a></div>');h.css({position:"fixed",bottom:"0px",left:"0px",right:"0px",padding:"4px","z-index":getIndex("image")+2,"text-align":"center","background-color":"#333",opacity:0.8});h.find("a").css({"border-radius":"120px",color:"#FFF","font-size":"16px",padding:"4px","line-height":"22px","background-color":"#000","margin-left":"3px",display:"inline-block",width:"22px",height:"22px","vertical-align":"middle"}).bind("click",n);if(l){var p=$("<div>"+l+"</div>");h.prepend(p);p.css({"border-radius":"120px",color:"#CCC",padding:"4px","line-height":"22px","background-color":"#000",margin:"auto","padding-left":"30px","padding-right":"30px",display:"inline-block","max-width":"70%","vertical-align":"middle"})}$("body").append(h)}else{b=$('<div class="closePicBut"></div>');q.mask.append(b)}q.mask.bind("click",c.destroy);f.bind("dblclick",g);f.bind("load",c.resetSize);f.bind("mousewheel",k);f.fadeIn("normal");$(window).bind("resize",c.resetSize);m=new dragDivObj();m.install(f,f)};function n(){switch($(this).attr("id")){case"rotationRight":d+=90;d=d==360?360:d;f.css({transform:"rotate("+d+"deg)"});break;case"rotationLeft":d-=90;d=d==360?360:d;f.css({transform:"rotate("+d+"deg)"});break;case"closePicBut":c.destroy();break}}function k(u,z){var r=z;var v=$(this);var t=0.1;var x=(d%180==0);var A=v.width();var w=v.height();var s={left:parseInt(v.css("left").replace("px","")),top:parseInt(v.css("top").replace("px",""))};var p=Math.floor(v.width()*(1+z*t));p=(p<32)?32:p;v.width(p);v.height("auto");var y=v.height();x?v.css({left:(s.left-Math.floor((p-A)/2))+"px",top:(s.top-Math.floor((y-w)/2))+"px"}):v.css({left:(s.left-Math.floor((y-w)/2))+"px",top:(s.top-Math.floor((p-A)/2))+"px"});return false}function g(){window.open(a)}this.resetSize=function(){e=$(window).width();o=$(window).height();var t=f.width();var w=f.height();var s=e/o;var v=Math.floor(e*j);var r=Math.floor(o*j);var u=Math.floor(e*(1-j)/2);var p=Math.floor(o*(1-j)/2);if(t<=v&&w<=r){f.height(w).width(t).css({left:Math.floor((e-f.width())/2)+"px",top:Math.floor((o-f.height())/2)+"px"})}else{if((t/w)<s){f.height(r).width("auto").css({left:Math.floor((e-f.width())/2)+"px",top:p+"px"})}else{f.width(v).height("auto").css({top:Math.floor((o-f.height())/2)+"px",left:u+"px"})}}f.css("opacity",1)};this.destroy=function(){$(window).unbind("resize",c.resetSize);f.unbind().fadeOut("normal",function(){f.del()});if(h){h.del();h=null}q.destroy();m.destroy()};this.install()}function creatPostParam(a,e,c,d){var b={event:a,content:{},extend:{}};b.content={};b.content["condition"]=e||{};b.content["value"]=c||{};b.extend=d||{};return b}function formatPostParam(b){for(var a in b){b[a]=(typeof b[a]=="string")?b[a]:JSON.stringify(b[a])}return b}function formatHostJson(a){if(a){if(a.value){return a.value}else{checkResponse(a);return a}}return null}function sessionListener(){$.ajaxSetup({global:true,beforeSend:formatPostVars});$(document).ajaxSuccess(function(b,a){checkResponseStatus(a)})}function formatPostVars(b,a){if(a.url.toLowerCase().indexOf(".html")<0){a.url+=((a.url.indexOf("?")<0)?("?project="+projectName):("&project="+projectName))}}function checkResponseStatus(c){var a=c.responseText+"";if(a){if(typeof a=="string"){try{a=JSON.parse(a)}catch(b){return true}}checkResponse(a)}return true}function checkResponse(b,a){if(isNull(b.head)||isNull(b.head["code"])){$.message("\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u9519\u8bef!");return false}if(b.head["code"]+""=="1"){b.head["message"]?$.message(b.head["message"],2000):null;return true}else{switch(b.head["code"]+""){case"0":!a?$.errormsg(b.head["message"]||"\u64cd\u4f5c\u5931\u8d25!"):null;break;case"3":!a?$.message(b.head["message"]||"\u64cd\u4f5c\u672a\u5b8c\u6210",2000):null;break;case"8":$.message(b.head["message"]||"\u65e0\u6743\u64cd\u4f5c",2000);break;case"9":logoutDeal(9);break}return false}}function AJAXObj(){var e=this;this.isasync=true;this.silent=false;this.timeout=60000;var d=new LoadingProgress();var a;function b(g,h){if(d){d.destroy()}e.destroy();if(g.status=="success"||g.status=="200"){if(h=="parsererror"){$(e).trigger("SYS_ERROR","\u8fd4\u56de\u6570\u636e\u89e3\u6790\u5931\u8d25!");
!e.silent?$.message("\u8fd4\u56de\u6570\u636e\u89e3\u6790\u5931\u8d25!",2000):null}return}switch(g.status.toString()){case"0":$(e).trigger("SYS_ABORT","\u8bf7\u6c42\u88ab\u7ec8\u6b62");break;case"404":$(e).trigger("SYS_ERROR","\u7cfb\u7edf\u9519\u8bef404");!e.silent?$.message("\u7f51\u7edc\u9519\u8bef\uff0c\u53ef\u80fd\u7f51\u7edc\u4e0d\u901a!",2000):null;break;case"500":$(e).trigger("SYS_ERROR","\u7cfb\u7edf\u9519\u8bef500");!e.silent?$.message("\u670d\u52a1\u5668\u9519\u8bef!",2000):null;break;default:$(e).trigger("SYS_ERROR","\u7cfb\u7edf\u9519\u8bef");!e.silent?$.message("\u672a\u77e5\u7f51\u7edc\u9519\u8bef!",2000):null;break}}function f(g){if(checkResponse(g,true)){$(e).trigger("JSON_LOADED",g)}else{$(e).trigger("SYS_ERROR",g.head["message"])}}this.Post=function(g,h){e.POSTDATA(g,h)};this.POSTDATA=function(h,j){e.destroy();if(j){for(var g in j){if(typeof j[g]=="object"){j[g]=JSON.stringify(j[g])}}}a=$.ajax({type:"post",dataType:"json",data:j||{},url:h,async:e.isasync,complete:b,timeout:e.timeout,success:f,beforeSend:c}).always(d.progress)};function c(h,g){if(g.url.toLowerCase().indexOf(".html")<0){g.url+=((g.url.indexOf("?")<0)?("?project="+projectName):("&project="+projectName))}d.showLoading()}this.destroy=function(){if(a){$(a).unbind();a.abort();a=null}};this.GetHtml=function(h,j){if(!useCache){var g=new Date();g=g.getTime();h+=(h.indexOf("?")<0)?("?i="+g):("&i="+g)}$.ajax({type:"get",dataType:"html",url:h,async:e.isasync,complete:b,success:function(k){if(k.indexOf("{")==0){var l=JSON.parse(k);checkResponse(l);return}$(e).trigger("HTML_LOADED",k)},beforeSend:d.showLoading}).always(d.progress)}}function LoadHtml(a,d,c){var b=new AJAXObj();b.silent=true;$(b).one("HTML_LOADED",function(j,g){g=trim(g+"");var f=g.substr(0,1);if(f=="{"||f=="["){try{var h=JSON.parse(g);checkResponse(h)}catch(j){}return}b.destroy();b=null;c(j,g)}).one("SYS_ERROR",function(f,g){b.destroy();b=null;var h='<script type="text/javascript">function ACTION(){this.READY=function(){}}<\/script><div class="fm_e404"><h1>:( <span>\u51fa\u9519\u5566~~</span></h1><p>\u60a8\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u3002</p><p>URL: '+a+"</p></div>";c(null,h)});b.GetHtml(a)}function ajaxGetSelectOption(g,d,c,a){var e=function(){if(d=="select"){g.empty().append($("<option>--\u6570\u636e\u9519\u8bef--</option>")).addClass("errorload")}else{g.after($("<span>\u6570\u636e\u9519\u8bef</span>")).remove()}c()};var b=function(n,h){var s=h.value;var l=g.attr("name");switch(d){case"select":var m="";if(s.length==0){m+='<option value="" selected="selected">\u65e0</option>'}else{if(g.hasClass("fm_forSelect")){m+='<option value="" selected="selected">\u8bf7\u9009\u62e9</option>'}else{if(g.hasClass("fm_selectAll")){m+='<option value="" selected="selected">\u5168\u90e8</option>'}}var o="";if(a["default"]){if(typeof a["default"]=="object"){m+='<option value="'+a["default"]["value"]+'" selected="selected">'+a["default"]["text"]+"</option>";o+=a["default"]["value"]+","}else{o+=a["default"]+","}}for(var k=0;k<s.length;k++){var j="";if(s[k]["selected"]){j='selected="selected"';o+=s[k]["value"]+","}m+='<option value="'+s[k]["value"]+'" '+j+">"+s[k]["text"]+"</option>"}o=o.length>0?o.substr(0,o.length-1):s[0]["value"]}g.empty().append($(m));if(a.mulit==true){o=(typeof o=="string")?o.split(","):o}else{o=(typeof o=="string")?o.split(",")[0]:o}g.val(o);break;case"radio":var r="";var o=[];if(a["default"]){o=(typeof a["default"]=="string")?a["default"].split(","):a["default"]}for(var k=0;k<s.length;k++){if(s[k]["selected"]){o.push(s[k]["value"])}r+='<label><input type="radio" name="'+l+'" id="'+l+"_"+k+'" value="'+s[k]["value"]+'" />'+s[k]["text"]+"</label>"}var p=$(r);g.after(p).remove();p.find(">input").val(o);break;case"checkbox":var r="";var o=[];if(a["default"]){o=(typeof a["default"]=="string")?a["default"].split(","):a["default"]}for(var k=0;k<s.length;k++){if(s[k]["selected"]){o.push(s[k]["value"])}r+='<label><input type="checkbox" name="'+l+'" id="'+l+"_"+k+'" value="'+s[k]["value"]+'" />'+s[k]["text"]+"</label>"}var q=$(r);g.after(q).remove();q.find(">input").val(o);break;default:g.data("selectdata",s);break}c()};if(!a){e();return}var f=a.param;LoadListData(a,g.attr("name"),f,b,e)}function LoadListData(c,b,h,g,e){if(!c||!c.url){e();return}var d=c.url;var h=$.extend({selecFieldName:b},h||{});var a=creatPostParam(b,h);var f=new AJAXObj();f.silent=true;$(f).one("JSON_LOADED",g).one("SYS_ERROR",e);f.POSTDATA(d,a)}function callHost(a,b){$.ajax({type:"post",data:formatPostParam(b||{}),url:a,async:true})}(function(a){a.fn.menuButton=function(b){a(this).bind("click",function(){var d=a(this);var f=d.dataOptions();a.extend(b,(typeof f.param=="object")?f.param:{});var c=f.name||d.data("windowName");if(!c){c=new Date();c="Window_"+c.getTime()+Math.round(1000*Math.random());d.data("windowName",c)}f.name=c;f.target=f.target?f.target:"popwin";var e=d.getCenter();var g=d.powerFlag();WINDOW.open(f,b,e,null,g)})}})(jQuery);
function MenuAction(){var a=this;$(document).bind("PAGE_REFRESH",function(c,f){var d=f.winid;PAGER.reload(d)});this.open=function(g,k,h){var c=g.name;if(!c){c=b();g.name=c}var d=PAGER.getWindowById(c);if(d){if(g.toggle==true){PAGER.destroy(c)}else{d.Restore();$(document).trigger("PREPARE_OPEN",{winid:c,target:g.target});if(g.reload==true){PAGER.reload(c,k)}}return}if(g.target=="slide"||g.target=="panel"){PAGER.OPEN(c,g,k)}else{if(h){var f;if(h.html||h.innerHTML){try{f=$(h).getCenter()}catch(j){f=[Math.floor($(window).width()/2),Math.floor($(window).height()/2)]}}else{f=h}}else{f=[Math.floor($(window).width()/2),Math.floor($(window).height()/2)]}f[0]=f[0]-$(window).scrollLeft();f[1]=f[1]-$(window).scrollTop();PAGER.OPEN(c,g,k,f)}};function b(){var c=new Date();return"Window_"+c.getTime()+Math.round(1000*Math.random())}}function PageCtrl(globalFormat){var p=this;this.PAGES={};this.install=function(){$(document).bind("WINDOW_DESTROY",function(e,data){p.destroy(data.windowName)})};this.OPEN=function(windowId,option,condition,fromPos){var Window;$(document).trigger("PREPARE_OPEN",{winid:windowId,target:option.target});var PAGE=p.PAGES[windowId];if(PAGE){if(option.toggle==true){p.destroy(windowId)}else{PAGE.WINDOW.Restore();if(option.reload==true){PAGE.WINDOW.reload()}}return}switch(option.target){case"blank":window.open(option.url);return;break;case"tab":if(TAB){Window=new tabPageWindow(TAB)}else{option.target="pop";Window=new popOutWindow()}break;case"panel":Window=new sidePanel();break;case"slide":Window=SLIDEWIN[option.side];if(Window.ID){p.destroy(Window.ID,true)}$(Window).unbind();break;case"still":Window=new stillPanel();break;default:Window=new popOutWindow();break}p.PAGES[windowId]=PAGE={WINDOW:Window,CONDITION:condition,TARGET:option.target};PAGE.WINDOW.ID=windowId;var creatWindowObj=function(e,htmlStr){var actionid=new Date();actionid="Window_"+actionid.getTime()+Math.round(1000*Math.random());htmlStr=htmlStr.replace("function ACTION()","function ACTION_"+actionid+"()");var htmlObj=$(htmlStr);$(PAGE.WINDOW).one("WINDOW_SHOW_COMPLETE",function(e,WindowVars){try{(typeof globalFormat=="function")?globalFormat(htmlObj):null}catch(e){}var theClass;if(htmlStr.indexOf("ACTION_"+actionid)>-1){theClass=eval("ACTION_"+actionid)}else{theClass=function(){}}PAGE.pageClass=theClass;Window.container.find("script").remove();htmlStr=Window.scrollBox.html();PAGE.html=htmlStr;PAGE.ACTION=new theClass();PAGE.ACTION["WINDOW"]=Window;PAGE.ACTION["CONTAINER"]=Window.container;PAGE.ACTION["WRAPER"]=Window.scrollBox;PAGE.ACTION["WINID"]=windowId;PAGE.ACTION["CONDITION"]=condition||{};PAGE.ACTION.find=function(selector){return Window.container.find(selector)};PAGE.ACTION.close=function(){PAGER.destroy(windowId)};formatHtml(PAGE)});PAGE.WINDOW.Show(htmlObj,option,fromPos)};LoadHtml(option.url,condition,creatWindowObj)};function formatHtml(PAGE,tm){if(PAGE.ACTION&&typeof PAGE.ACTION.READY=="function"){PAGE.ACTION.READY()}$(PAGE.WINDOW).trigger("PAGE_LOADED",{windowName:PAGE.WINDOW.ID})}this.reload=function(windowId,condition){var PAGE=p.PAGES[windowId];if(PAGE&&PAGE.ACTION){try{$(PAGE.ACTION["WINDOW"]).unbind("WINDOW_RESIZE");PAGE.ACTION.DESTROY()}catch(e){}if(condition){$.extend(PAGE.CONDITION,condition);$.extend(PAGE.ACTION["CONDITION"],condition)}PAGE.WINDOW.renew((typeof PAGE.html=="string")?$(PAGE.html):PAGE.html);formatHtml(PAGE)}};this.getWindowById=function(windowId){return p.PAGES[windowId]?p.PAGES[windowId]["WINDOW"]:null};this.getActionById=function(windowId){return p.PAGES[windowId]?p.PAGES[windowId]["ACTION"]:null};this.getWraperById=function(windowId){var PAGE=p.PAGES[windowId];return PAGE?PAGE.WINDOW?PAGE.WINDOW.scrollBox:null:null};this.destroy=function(windowId,nomove){if(!p.PAGES[windowId]){return}var PAGE=p.PAGES[windowId];try{if(PAGE){if(PAGE.ACTION){if(PAGE.ACTION["CONTAINER"]){PAGE.ACTION["CONTAINER"].clearWidget()}if(typeof PAGE.ACTION["DESTROY"]=="function"){try{PAGE.ACTION["DESTROY"]()}catch(e){}}if(PAGE.ACTION["CONTAINER"]){PAGE.TARGET!="slide"?PAGE.ACTION["CONTAINER"].del():null;PAGE.ACTION["CONTAINER"]=null}delete PAGE.ACTION;PAGE.ACTION=null}$(PAGE.WINDOW).unbind();try{PAGE.WINDOW.clearContent()}catch(e){}delete p.PAGES[windowId];PAGE.pageClass?delete PAGE.pageClass:null}}catch(e){console.log("WINDOW DESTROY:",e)}PAGE?delete PAGE:null;p.PAGES[windowId]=null;delete p.PAGES[windowId]};this.install()}(function(a){a.fn.widget=function(b){a(this).each(function(){var c=a(this);var e=c.dataOptions();var d=e.name;if(!d){d="WIDGET"+(e.name||"")+"_"+(new Date()).getTime();e.name=d}e.container=c;e.target="still";PAGER.OPEN(d,e,b);c.attr({"data-widget":"is","data-widgetName":d})});a.fn.destroyWidget=function(){var d=a(this);var c=d.attr("data-widgetName");if(c){PAGER.destroy(c)}return d};a.fn.removeWidget=function(){var c=a(this);c.find("[data-widget='is']").each(function(){a(this).destroyWidget()});c.destroyWidget();return c};a.fn.clearWidget=function(){var c=a(this);c.find("[data-widget='is']").each(function(){a(this).destroyWidget()
});return c}}})(jQuery);function stillPanel(){var c=this;this.scrollBox;this.ID="";this.container;this.option={};var a;this.renew=function(d){c.scrollBox.empty().append(d)};this.Show=function(g,e,d,f){$.extend(c.option,e);c.scrollBox=c.container=e.container;c.scrollBox.empty().append(g);$(window).bind("resize",c.resize);$(c).trigger("WINDOW_SHOW_COMPLETE",{WID:c.ID})};this.disAutoResize=function(){$(window).unbind("resize",c.resize)};this.Restore=function(){};this.close=function(){};this.toFront=function(){};this.resize=function(){if(a){clearTimeout(a);a=null}a=setTimeout(b,100)};function b(){$(c).trigger("WINDOW_RESIZE",{windowname:c.ID,width:c.container.width(),height:c.container.height()})}this.reload=function(){$(document).trigger("PAGE_REFRESH",{winid:c.ID})};this.clearContent=function(){$(window).unbind("resize",c.resize);c.scrollBox.empty()};this.destroy=function(){$(document).trigger("WINDOW_DESTROY",{windowName:c.ID})};this.clear=function(){c.scrollBox.empty()}}function pageTab(){var f=this;this.container;var a;var d;var e;var h;var b;this.install=function(j){a=j;f.container=$('<div class="fm_mainBackground fm_pagetabbox"></div>');a.append(f.container);f.container.css({"box-sizing":"border-box",width:"100%",height:"100%",position:"relative",overflow:"hidden"});d=$("<div></div>");d.css({position:"absolute",left:"0px",bottom:"0px"});f.container.empty().append(d);b=new dragToMove(d,"a")};this.addTab=function(m,k,j){var l=d.find("a[rel="+k+"]");d.find("a.nowid").removeClass("nowid");if(l.length>0){f.movetabTo(k);return}l=$('<a rel="'+k+'" class="nowid" title="'+m+'"><span>'+m.substr(0,20)+"</span>"+(j?"":"<p></p>")+"</a>");l.disableSelect();l.find("p").unbind().bind("click",g);l.find("span").unbind().bind("click",c);d.append(l);f.resizeTab();$(f).trigger("TAB_ADDTAB",k)};this.resizeTab=function(){e=f.container.width();h=0;d.find("a").each(function(){h+=$(this).outerWidth(true)});d.width(h+2);if(h>e){b.enable()}else{b.disable()}if(d.find("a.nowid").length>0){var j=d.find("a.nowid").attr("rel");f.movetabTo(j)}};this.movetabTo=function(j){d.find("a.nowid").removeClass("nowid");var k=d.find("a[rel="+j+"]");k.addClass("nowid");b.moveToTab(k)};function g(){var j=$(this).parent().attr("rel");$(f).trigger("TAB_DESTROY",j)}this.removeTab=function(j){var k=d.find("a[rel="+j+"]");if(k.length==0){return false}if(k.hasClass("nowid")){var n=k.index();var l=d.find("a:eq("+(n-1)+")");l=(l.length==0)?d.find("a:eq("+(n+1)+")"):l;var m=l.attr("rel");if(l.length==0||j==m){$(document).trigger("SHOW_HOMEPAGE")}else{$(f).trigger("TAB_SHOW",m)}}k?k.del():null;f.resizeTab();if(m){f.movetabTo(m)}return true};this.delTabOutSide=function(j){d.find("a[rel="+j+"]").del();f.resizeTab()};function c(){if(b.isdrag){return}d.find("a.nowid").removeClass("nowid");var j=$(this).parent().attr("rel");$(f).trigger("TAB_SHOW",j);f.movetabTo(j)}}function TABObj(b){var c=this;var k;var l;var e;this.TabContDiv;this.onShow="";var h={pos:"top"};this.install=function(){var m=b.dataOptions();$.extend(h,m);k=$('<div class="fm_pageWindow fm_tabWraper"></div>');l=$('<div class="tabWraper"></div>');c.TabContDiv=$("<div></div>");k.append(l).append(c.TabContDiv);b.append(k);k.css({position:"relative",width:"100%",height:"100%",overflow:"hidden"});if(h.pos=="bottom"){l.css({position:"absolute",left:"0px",right:"0px",bottom:"0px"});k.addClass("fm_tabBottom");c.TabContDiv.css({position:"absolute",left:"0px",right:"0px",top:"0px"})}else{l.css({position:"absolute",left:"0px",right:"0px",top:"0px"});c.TabContDiv.css({position:"absolute",left:"0px",right:"0px",bottom:"0px"})}e=new pageTab();e.install(l);$(e).bind("TAB_SHOW",function(o,n){g(n)}).bind("TAB_DESTROY",function(o,n){$(document).trigger("WINDOW_DESTROY",{windowName:n})}).bind("TAB_HOME",function(n){$(document).trigger("SHOW_HOMEPAGE")});c.TabContDiv.hide();l.hide();a();$(window).unbind("resize",d).bind("resize",d)};this.AddPage=function(q,o,n,m){var p=f(n);if(p){c.ChgToPage(n);return}c.TabContDiv.show();l.show();e.addTab(q,n,m);c.TabContDiv.append(o);o.data("PageName",n);c.ChgToPage(n)};this.RemovePage=function(n){e.removeTab(n);var m=c.TabContDiv.find(">div").length;if(m==0){c.TabContDiv.hide();l.hide();$(document).trigger("SHOW_HOMEPAGE")}};function f(m){var n=null;c.TabContDiv.find(">div").each(function(){if($(this).data("PageName")==m){n=$(this);return false}});return n}this.ChgToPage=function(m){c.onShow=m;e.movetabTo(m);g(m)};function g(m){c.TabContDiv.find(">div").hide().removeClass("onshow");var n=f(m);if(n){n.show().addClass("onshow");var o=n.data("action");if(o.needResize){o.resize()}}}var j;function d(){if(j){clearTimeout(j);j=null}j=setTimeout(a,100)}function a(){var m=b.height();e.resizeTab();m-=l.outerHeight(true);c.TabContDiv.height(m);$(c).trigger("TAB_RESIZE",{w:b.width(),h:m})}this.getSize=function(){return{w:b.width(),h:b.height()}}}function tabPageWindow(a){var c=this;this.scrollBox;this.ID="";this.container;this.option={};this.needResize=false;var b=false;this.renew=function(d){c.scrollBox.empty().append(d)
};this.Show=function(g,e,d,f){$.extend(c.option,e);c.container=$('<div class="contentContainer"></div>');c.scrollBox=$('<div class="scrollContent"></div>');c.scrollBox.css({overflow:"hidden"});c.container.empty().append(c.scrollBox);c.container.data("action",c);a.AddPage(e.title,c.container,c.ID,false);c.scrollBox.empty().append(g);$(c).trigger("WINDOW_SHOW_COMPLETE",{WID:c.ID});c.resize();$(a).bind("TAB_RESIZE",c.resize)};this.Restore=function(){a.ChgToPage(c.ID)};this.close=function(){c.destroy();a.RemovePage(c.ID)};this.toFront=function(){a.ChgToPage(c.ID)};this.reload=function(){$(document).trigger("PAGE_REFRESH",{winid:c.ID})};this.clearContent=function(){a.RemovePage(c.ID);$(a).unbind("TAB_RESIZE",c.resize)};this.destroy=function(){a.RemovePage(c.ID)};this.clear=function(){};this.resize=function(){if(!c.container.hasClass("onshow")){c.needResize=true;return}c.needResize=false;$(c).trigger("WINDOW_RESIZE")}}function popOutWindow(j){var m=this;this.option={width:0.8,height:0.6,title:"\u672a\u547d\u540d",minw:130,minh:130,topdis:0,leftdis:0,rightdis:0,bottomdis:0};this.popWin;var c;this.PageCondition;this.container;this.scrollBox;this.ID="";var b;var r;var a=[0,0];var q;this.baseIndex=j?j:ZINDEX.pop;var s=j?j+2:ZINDEX.popActive;var e=j?j-1:ZINDEX.popLockMask;var l=ZINDEX.frontClass;var f;var w;if(typeof GLOBAL=="object"&&GLOBAL.windis){$.extend(m.option,GLOBAL.windis);m.option.topdis+=0;m.option.leftdis+=0;m.option.rightdis+=0;m.option.bottomdis+=0}this.renew=function(p){m.scrollBox.empty().append(p)};this.Show=function(z,x,p,y){$.extend(m.option,x);m.popWin=$('<div class="popoutWindow fm_pageWindow"><div class="fm_titleBar" title="'+m.option.title+'" ><i class="fa fa-th-large"></i><strong>'+(m.option.title.substr(0,20))+'</strong><span><a class="reloadbut"><i class="fa fa-refresh"></i></a><a class="minbut"><i class="fa fa-minus"></i></a><a class="closebut"><i class="fa fa-times"></i></a></span></div><div class="contentContainer"></div></div>');m.popWin.css("z-index",m.baseIndex);m.popWin.css({width:"auto",height:"auto"});m.scrollBox=$('<div class="scrollContent"></div>');m.scrollBox.empty().append(z);m.container=m.popWin.find(".contentContainer");m.container.append(m.scrollBox);m.popWin.data("obj",m);$("body").append(m.popWin);a=[(m.container.outerWidth(true)-m.container.width()),(m.container.outerHeight(true)-m.container.height())];w=$(window).width()-m.option.leftdis-m.option.rightdis-a[0];f=$(window).height()-m.option.topdis-m.option.bottomdis-a[1];m.option.width=(m.option.width>1)?m.option.width:Math.floor(w*m.option.width);m.option.height=(m.option.height>1)?m.option.height:Math.floor(f*m.option.height);m.option.width=(m.option.width>m.option.minw)?m.option.width:m.option.minw;m.option.height=(m.option.height>m.option.minh)?m.option.height:m.option.minh;if(!m.option.locksize){var A=$('<div class="dragSizeBox"><a></a></div>');m.popWin.append(A);A.css({position:"relative",height:"0px",overflow:"visible"}).find("a").css({position:"absolute",top:"-10px",right:"-10px",width:"20px",height:"20px",cursor:"nw-resize"});q=new dragWindowSize(A.find(">a"),m.popWin);$(q).bind("DRAG_RESIZE",function(C,B){if(isWin32&&browserIsIE){B.width-=20;B.height-=15}t(B.width,B.height);m.option.width=B.width;m.option.height=B.height})}o(p)};function o(x){m.container.css({width:"0px",height:"0px"});m.popWin.css({width:"auto",height:"auto"});if(x){m.popWin.css({top:(x[1]-Math.floor(m.popWin.height()/2))+"px",left:(x[0]-Math.floor(m.popWin.width()/2))+"px"})}var y;if(typeof m.option.position=="string"){switch(m.option.position){case"center_top":y=[Math.floor(($(window).width()-m.option.width)/2),m.option.topdis];break;case"center_bottom":y=[Math.floor(($(window).width()-m.option.width)/2),($(window).height()-m.option.height)-m.option.bottomdis];break;case"left_top":y=[m.option.leftdis,m.option.topdis];break;case"left_bottom":y=[m.option.leftdis,($(window).height()-m.option.height)-m.option.bottomdis];break;case"left_center":y=[m.option.leftdis,Math.floor(($(window).height()-m.option.height)/2)];break;case"right_top":y=[($(window).width()-m.option.width)-m.option.rightdis,m.option.leftdis];break;case"right_bottom":y=[($(window).width()-m.option.width)-m.option.rightdis,($(window).height()-m.option.height)-m.option.bottomdis];break;case"right_center":y=[($(window).width()-m.option.width)-m.option.rightdis,Math.floor(($(window).height()-m.option.height)/2)];break;default:y=[Math.floor(($(window).width()-m.option.width)/2),Math.floor(($(window).height()-m.option.height)/2)];break}}else{if($.isArray(m.option.position)){y=m.option.position}else{y=[Math.floor(($(window).width()-m.option.width)/2),Math.floor(($(window).height()-m.option.height)/2)]}}t(m.option.width,m.option.height);h(y[0],y[1]);g();var p=m.popWin.find(".fm_titleBar");c=new dragDivObj();c.install(p,m.popWin);if(m.option.fullscreen){m.fullScreen()}m.toFront();if(m.option.lock){r=new popMask(e);r.mask.bind("mouseenter",m.toFront)}}function t(x,A,z){if(!m.popWin){m.destroy();
return}x=(x>w)?(w):x;A=(A>f)?(f):A;if(!z){x=(x<m.option.minw)?m.option.minw:x;A=(A<m.option.minh)?m.option.minh:A}var y=(A-m.popWin.find(".fm_titleBar").outerHeight(true));var p=x;if(isWin32&&browserIsIE){p-=15}m.scrollBox.css({visibility:"hidden"});m.container.cssAnimate({height:y+"px",width:x+"px"},0.5,null,k)}function k(){$(m).trigger("WINDOW_SHOW_COMPLETE",{WID:m.ID,width:m.scrollBox.width(),height:m.scrollBox.height()});$(m).trigger("WINDOW_RESIZE",{windowname:m.ID,width:m.scrollBox.width(),height:m.scrollBox.height()});m.scrollBox.css({visibility:"inherit"})}function h(p,z){m.popWin.addClass("divMove");m.popWin.cssAnimate({left:(typeof p=="string")?p:((p<0)?0:p+"px"),top:(typeof z=="string")?z:((z<0)?0:z+"px")},0.5,null,function(){m.popWin.endCssAnimate()})}var u;function g(){m.popWin.find(".fm_titleBar a.minbut").bind("click",function(){m.popWin.removeClass("max");m.popWin.addClass("mini");$(m).trigger("WINDOW_MINI");c.Enabled=true;if(u){t(100,32,true);h(u[0],u[1]);u=null}else{t(100,32,true)}});m.popWin.find(".fm_titleBar").bind("dblclick",function(){$(window).unbind("resize",v);if(m.popWin.hasClass("mini")||m.popWin.hasClass("max")){m.normal()}else{m.fullScreen()}});m.popWin.find(".fm_titleBar a.reloadbut").bind("click",m.reload);m.popWin.find(".fm_titleBar a.closebut").bind("click",m.destroy);m.popWin.find(".fm_titleBar").bind("mousedown",function(){m.popWin.removeClass("divMove");m.toFront()});m.popWin.bind("mousedown",function(){m.toFront()})}this.fullScreen=function(){if(!m.popWin){m.destroy();return}d();u=[m.popWin.css("left"),m.popWin.css("top")];m.popWin.removeClass("mini");m.popWin.addClass("max");h(m.option.leftdis,m.option.topdis);c.Enabled=false;$(window).unbind("resize",v).bind("resize",v)};this.normal=function(){if(!m.popWin){m.destroy();return}if(u){h(u[0],u[1]);t(m.option.width,m.option.height);u=null}else{t(m.option.width,m.option.height)}m.popWin.removeClass("max");m.popWin.removeClass("mini");c.Enabled=true};var n;function v(){if(n){clearTimeout(n);n=null}n=setTimeout(d,100)}function d(){w=$(window).width()-m.option.leftdis-m.option.rightdis-a[0];f=$(window).height()-m.option.topdis-m.option.bottomdis-a[1];t(w,f)}this.Restore=function(){m.toFront();m.normal();m.scrollBox.css({visibility:"inherit"})};this.reload=function(){$(document).trigger("PAGE_REFRESH",{winid:m.ID})};this.toFront=function(){if(!m.popWin){m.destroy();return}$("body").find("."+l).each(function(){var p=$(this).data("obj");try{$(this).css("z-index",p.baseIndex).removeClass(l)}catch(x){}});m.popWin.css("z-index",s).addClass(l)};this.clear=function(){m.popWin.empty()};this.clearContent=function(){if(m.popWin){m.popWin.del();m.popWin=null}else{return}if(r){r.destroy();r=null}if(b){clearTimeout(b);b=null}if(c){c.destroy();c=null}if(q){$(q).unbind();q.destroy();q=null}$(window).unbind("resize",v);$(m).trigger("WINDOW_CLOSE")};this.destroy=function(p){$(m).trigger("WINDOW_BEFORE_CLOSE");$(document).trigger("WINDOW_DESTROY",{windowName:m.ID})}}function slideWindow(e){var b=this;this.container=SLIDER.container(e);this.ID="";this.scrollBox;var g={width:200,maxw:null,minw:100,title:"\u672a\u547d\u540d",locksize:false,side:"left"};this.option;var h;var j;var c=false;this.renew=function(k){b.scrollBox.empty().append(k)};this.Show=function(l,k){b.option={};$.extend(b.option,g,k);b.scrollBox=b.container.find(".scrollContent");b.scrollBox.empty().append(l);b.option.width=(b.option.fullscreen)?SLIDER.maxWidth():b.option.width||300;b.option.dragable=(b.option.dragable==false)?false:true;SLIDER.dragable=b.option.dragable;SLIDER.lockwidth=b.option.lockwidth?true:false;SLIDER.slideTo(e,b.option.width||300,null,d);$(SLIDER).unbind("RESIZE",b.resize).unbind("SLIDE_CLOSE",b.destroy).unbind("SLIDE_RELOAD",b.reload).unbind("SLIDE_DRAG");$(SLIDER).bind("RESIZE",b.resize).bind("SLIDE_CLOSE",b.destroy).bind("SLIDE_RELOAD",b.reload).bind("SLIDE_DRAG",b.resize)};function d(){$(b).trigger("WINDOW_SHOW_COMPLETE",{WID:b.ID})}var f;this.resize=function(){if(f){clearTimeout(f);f=null}f=setTimeout(a,100)};function a(){$(b).trigger("WINDOW_RESIZE")}this.Restore=function(){SLIDER.dragable=b.option.dragable;SLIDER.slideTo(e,b.option.width||300)};this.reload=function(k,l){if(b.option.side==l.pos){$(document).trigger("PAGE_REFRESH",{winid:b.ID})}};this.clear=function(){b.container.clear()};this.clearContent=function(){b.scrollBox.clear();if(e!=1){SLIDER.slideTo(1)}var k=SLIDER.container("map");k.find(">*").css({"float":"none"})};this.destroy=function(k){if(c){return}c=true;$(document).trigger("WINDOW_DESTROY",{windowName:b.ID});c=false}}function PageSlider(a){var b=this;var e;this.blankDis=23;var f;var k;var j=1;var d={id:1,w:0};this.option={topdis:0,leftdis:0,rightdis:0,bottomdis:0};this.dragable=true;this.lockwidth=false;var r;var l;var m;var q;var o=ZINDEX.slide;var h=22;if(typeof GLOBAL=="object"&&GLOBAL.windis){$.extend(b.option,GLOBAL.windis)}this.install=function(){e=a.find(">*");e.addClass("fm_pageWindow");r=$("<div></div>");l=$("<div></div>");l.append(e);
r.append(l);a.append(r);a.css({position:"fixed",top:b.option.topdis+"px",left:b.option.leftdis+"px",bottom:b.option.bottomdis+"px",right:b.option.rightdis+"px","z-index":o});r.css({position:"relative",overflow:"hidden"});l.css({position:"absolute",overflow:"hidden"});n();e.css({"float":"left",position:"relative"});e.each(function(y){var v=$(this);v.css("z-index",Math.abs(y-j));if(y==j){v.addClass("midSlide");return}var u=$('<div class="fm_dragBar"></div>');var w=$('<div class="closebar"><i class="fa '+(y>j?"fa-chevron-right":"fa-chevron-left")+'"></i></div>');var p=$('<div class="refreshbar" rel="'+(y>j?"right":"left")+'"><i class="fa fa-refresh"></i></div>');var t=$('<div class="scrollContent"></div>');var x=v.find(">div.contentContainer");x.append(t).css("overflow","hidden");v.append(u).append(w).append(p);w.bind("click",b.close);p.bind("click",g);if(y!=j){var s=function(z,B){if(!b.dragable){return}var C=y>j?"right":"left";l.css("transition","");if(C=="right"){l.css("left",-m-(m-z)+"px")}else{if(C=="left"){l.css("left",-(m-z)+"px")}}if(B){if(C=="right"){pagew=(m-z)}else{if(C=="left"){pagew=z}}var A=pagew-2*v.data("paddingW");(C=="right")?v.css({width:(A)+"px","padding-right":(m-v.data("paddingW")-A)+"px"}):v.css({width:(A)+"px","padding-left":(m-v.data("paddingW")-A)+"px"});$(b).trigger("SLIDE_DRAG",{side:C})}}}v.data({paddingW:(v.outerWidth()-v.width())/2});if(y>j){w.setRealSize(h,h+5);p.setRealSize(h,h+5);v.addClass("rightSlide");u.css({position:"absolute",top:"0px",bottom:"0px"});w.css({position:"absolute",top:"0px",left:(-h+1)+"px"});p.css({position:"absolute",top:h+"px",left:(-h+1)+"px"});u.css({left:"-5px"});k=new DragResize(u,{dis:b.option.leftdis,min:b.blankDis,max:(m-b.blankDis)},s);k.install()}else{if(y<j){w.setRealSize(h,h+5);p.setRealSize(h,h+5);v.addClass("leftSlide");u.css({position:"absolute",top:"0px",bottom:"0px"});w.css({position:"absolute",top:"0px",right:-h+"px"}).show();p.css({position:"absolute",top:h+"px",right:-h+"px"});u.css({right:"-5px"});f=new DragResize(u,{dis:b.option.leftdis,min:b.blankDis,max:(m-b.blankDis)},s);f.install()}}});l.find(".closebar,.fm_dragBar,.refreshbar").hide();c();$(window).unbind("resize",c).bind("resize",c);l.css("left",-(j*m)+"px")};function n(){m=$(window).width()-(b.option.leftdis+b.option.rightdis);q=$(window).height()-(b.option.topdis+b.option.bottomdis);r.setRealSize(m,q);l.setRealSize(e.length*m+e.length,q)}this.pageWidth=function(){return m};this.maxWidth=function(){return m-b.blankDis};function g(){$(b).trigger("SLIDE_RELOAD",{pos:$(this).attr("rel")})}this.close=function(){$(b).trigger("SLIDE_CLOSE")};this.container=function(p){switch(p){case"left":case 0:return e.eq(0).find(">.contentContainer");break;case"right":case 2:return e.eq(2).find(">.contentContainer");break;case"center":case 1:return e.eq(1).find(">.contentContainer");break;case"map":return e.eq(1);break}};this.hide=function(){d.id!==1?b.slideTo(1):null};this.slideTo=function(t,u,s,p){if(!s&&t==d.id){return}u=u?u:m;d={id:t,w:u};var y=-m;l.find(".closebar,.fm_dragBar,.refreshbar").hide();var v;if(t>j){var w=e.eq(2);v=w.find(".scrollContent");u=(u>b.maxWidth()-2*w.data("paddingW"))?b.maxWidth()-2*w.data("paddingW"):u;w.css({width:(u)+"px","padding-right":(m-w.data("paddingW")-u)+"px"});u+=2*w.data("paddingW");y-=u;w.find(".closebar,.refreshbar").show();(!b.dragable)?w.find(".fm_dragBar").hide():w.find(".fm_dragBar").show()}else{if(t<j){var w=e.eq(0);v=w.find(".scrollContent");u=(u>b.maxWidth()-2*w.data("paddingW"))?b.maxWidth()-2*w.data("paddingW"):u;w.css({width:(u)+"px","padding-left":(m-w.data("paddingW")-u)+"px"});u+=2*w.data("paddingW");y+=u;w.find(".closebar,.refreshbar").show();(!b.dragable)?w.find(".fm_dragBar").hide():w.find(".fm_dragBar").show()}}v?v.css({visibility:"hidden"}):null;var x=function(){v?v.css({visibility:"inherit"}):null;(typeof p=="function")?p():null};if(s){if(supportCss("transition")){l.css("transition","");getComputedStyle(l.get(0))["transition"]}l.css("left",y+"px");x()}else{l.cssAnimate({left:y+"px"},0.5,null,x)}};function c(){n();e.setRealSize(m,q);f.dragSize.min=b.blankDis;f.dragSize.max=m-b.blankDis;k.dragSize.min=b.blankDis;k.dragSize.max=m-b.blankDis;if(d){b.slideTo(d.id,d.w,true)}var p=Math.floor($(window).height()/2-50);l.find(".closebar").css("top",p+"px");l.find(".refreshbar").css("top",(p+h+5)+"px");$(b).trigger("RESIZE")}this.install()}function sidePanel(){var d=this;var c;var g;this.scrollBox;this.ID="";this.container;this.option={width:200,maxw:null,minw:100,title:"\u672a\u547d\u540d",locksize:false,side:"left",topdis:0,leftdis:0,rightdis:0,bottomdis:0};this.blankDis=30;this.dragable=true;var l;var n=ZINDEX.panal;var e=false;var m;var h;if(typeof GLOBAL=="object"&&GLOBAL.windis){$.extend(d.option,GLOBAL.windis);l=$(window).height()-d.option.topdis-d.option.bottomdis}this.renew=function(p){d.scrollBox.empty().append(p)};this.reload=function(){$(document).trigger("PAGE_REFRESH",{winid:d.ID})};this.Show=function(u,s,q,t){$.extend(d.option,s);d.option.width=(d.option.width>1)?d.option.width:Math.floor($(window).width()*d.option.width);
d.option.width=(d.option.width>100)?d.option.width:100;d.option.minw=(d.option.minw<100)?100:d.option.minw;c=$('<div class="fm_pageWindow fm_sidePanel  '+d.option.side+'"><div class="fm_panelSideTabs"><div class="fm_dragBar"></div><div class="fm_titleBar noselect hand" title="'+d.option.title+'"><a class="destroy"><i class="fa fa-remove"></i></a>'+((d.option.side=="left")?'<a class="close"><i class="fa fa-chevron-left"></i></a>':'<a class="close"><i class="fa fa-chevron-right"></i></a>')+'<a class="refresh"><i class="fa fa-refresh"></i></a><span>'+d.option.title+'</span></div></div><div class="contentContainer"></div></div>');d.scrollBox=$('<div class="scrollContent"></div>');d.scrollBox.empty().append(u);d.container=c.find(".contentContainer");d.container.append(d.scrollBox);$("body").append(c);c.css({position:"fixed",top:d.option.topdis+"px","z-index":n});c.setRealSize(d.option.width);c.find(".fm_panelSideTabs").css({position:"relative",height:"0px",overflow:"visible"});m=c.find(".fm_titleBar");m.css({position:"absolute",width:"24px"});h=c.find(".fm_dragBar");h.hide();var r=d.container.outerWidth(true)-d.container.width();var v=r/2;if(d.option.side=="left"){c.css({left:-d.option.width+"px"});h.css({position:"absolute",right:-(h.outerWidth()+v)+"px",cursor:"w-resize",top:-v+"px"});m.css({right:-(m.outerWidth()+v)+"px"})}else{c.css({right:-d.option.width+"px"});h.css({position:"absolute",left:-(h.outerWidth()+v)+"px",cursor:"w-resize",top:-v+"px"});m.css({left:-(m.outerWidth()+v)+"px"})}if(!d.option.locksize){h.show();var p=function(w,x){if(!d.dragable||w<d.option.minw){return}if(d.option.side=="left"){c.css("width",(w-d.option.leftdis-r)+"px")}else{c.css("width",($(window).width()-w-d.option.rightdis-r)+"px")}if(x){d.option.width=c.outerWidth();$(d).trigger("WINDOW_RESIZE",{windowname:d.ID,width:d.scrollBox.width(),height:d.scrollBox.height()})}};g=new DragResize(h,{min:d.option.minw,max:($(window).width()-d.option.minw)},p);g.install()}c.bind("click",d.toFront);a();$(window).bind("resize",f);d.slideOut();c.find(".fm_titleBar a").bind("click",o);$(c).data("winid",d);d.resetBarPos()};this.slideOut=function(){d.scrollBox.css({visibility:"hidden"});if(d.option.side=="left"){c.cssAnimate({left:d.option.leftdis+"px"},0.5,null,j)}else{c.cssAnimate({right:d.option.rightdis+"px"},0.5,null,j)}d.toFront();m.unbind();c.find(".fm_titleBar a").show();if(!d.option.locksize){h.show()}var p=$("body").find(".fm_sidePanel."+d.option.side);p.each(function(){var q=$(this);var r=$(q).data("winid");if(r&&r.ID!=d.ID){r.close()}});return false};function j(){$(d).trigger("WINDOW_SHOW_COMPLETE",{WID:d.ID});d.scrollBox.css({visibility:"inherit"})}this.resetBarPos=function(){var q=$("body").find(".fm_sidePanel."+d.option.side);var p=q.index(c);var r=Math.floor(($(window).height()-100)/q.length);r=(r>58)?58:(r<20)?20:r;m.css("top",(r*p+10)+"px")};function b(){var p=$("body").find(".fm_sidePanel."+d.option.side);var q=Math.floor(($(window).height()-100)/p.length);q=(q>58)?58:(q<20)?20:q;p.each(function(r){$(this).find(".fm_titleBar").css("top",(q*r)+"px")})}this.close=function(){if(d.option.side=="left"){c.cssAnimate({left:(-d.option.width+d.option.leftdis-1)+"px"},0.5)}else{c.cssAnimate({right:(-d.option.width+d.option.rightdis-1)+"px"},0.5)}c.removeClass("open");c.find(".fm_titleBar a").hide();h.hide();m.one("click",d.slideOut)};this.Restore=function(){d.slideOut();d.toFront();m.unbind();c.find(".fm_titleBar a").show();if(!d.option.locksize){h.show()}};this.toFront=function(){if(!c){d.destroy();return}d.scrollBox.css({visibility:"inherit"});$("body").find(".fm_sidePanel."+d.option.side).css("z-index",n-1).removeClass("open");c.css("z-index",n+2).addClass("open")};function o(p){switch($(this).attr("class")){case"close":d.close();return false;break;case"refresh":$(document).trigger("PAGE_REFRESH",{winid:d.ID});return false;break;case"destroy":d.destroy();return false;break}}this.clearContent=function(){if(g){$(g).unbind();g.destroy();g=null}m.unbind().find("a").unbind();$(window).unbind("resize",f);c.unbind("click");c.del()};this.destroy=function(){if(e){return}e=true;$(document).trigger("WINDOW_DESTROY",{windowName:d.ID});b();e=false};this.clear=function(){c.empty()};var k;function f(){if(k){clearTimeout(k);k=null}k=setTimeout(a,100)}function a(){if(!d.scrollBox||d.scrollBox.length==0){d.destroy();return}l=$(window).height()-d.option.topdis-d.option.bottomdis;c.setRealSize(null,l);h.height(l);var p=$(window)-d.blankDis;d.option.maxw=(d.option.maxw>p)?p:d.option.maxw;$(d).trigger("WINDOW_RESIZE")}}(function(a){a.fn.Layout=function(c,b){return new frameLayout(a(this).eq(0),c,b)}})(jQuery);function frameLayout(a,f,e){var d=this;this.option={layoutType:""};var b;var c={};this.install=function(){var g=a.dataOptions()||{};$.extend(d.option,g);b=new flexLayout(a);a.find(">div >*").each(function(l){var o=$(this);var k="Layout_"+(new Date()).getTime()+"_"+Math.floor(Math.random()*10000);var q=o.attr("id");q=q?q:k;o.attr("id",q);var j=o.dataOptions();
var n=!(j.url==null||j.url=="");c[q]={winName:k,isframe:n,pannal:o};o.data({layout_winName:k,layout_isframe:n});if(n&&j.url){var p={};p.url=j.url;p.container=o;p.target="still";PAGER.OPEN(k,p,$.extend({},j.param||{},f));var m=WINDOW.getWindowById(k);m.LAYOUT=d;o.attr({"data-widget":"is","data-widgetName":k})}});var h=function(k,j){$(d).trigger(k,j)};$(b).bind({BLOCK_SHOW:h,BLOCK_HIDE:h});if(typeof e=="function"){e()}};this.show=function(h,g){b.show(h,g)};this.getPannalById=function(g){return c[g]?c[g]["pannal"]:null};this.reload=function(j,h){if(c[j]&&c[j]["isframe"]){var g=c[j]["winName"];WINDOW.reload(g,h)}};this.destroy=function(){for(var g in c){if(c[g]&&c[g]["isframe"]){WINDOW.close(c[g]["winName"])}delete c[g]}b?b.destroy():null;b=null};this.run=function(k,j,h){if(c[k]&&c[k]["isframe"]){var g=c[k]["winName"];WINDOW.run(g,j,h)}};this.resize=function(){if(!b){d.destroy();return}b.resize();for(var g in c){if(c[g]){if(c[g]["isframe"]){WINDOW.resize(c[g]["winName"])}else{$(c[g]["pannal"]).trigger("RESIZE")}}}$(d).trigger("LAYOUT_RESIZE")};this.install()}function flexLayout(c){var e=this;var k;var a={};this.option={};this.install=function(){var l=c.dataOptions();$.extend(e.option,l);if(!e.option.frameSet){return}c.css({overflow:"hidden"});e.option.flexdir=e.option.flexdir?e.option.flexdir:"x";c.find(">*").wrapAll('<div class="layout_Wraper"></div>');k=c.find(">.layout_Wraper");k.css({position:"relative",overflow:"hidden",width:"100%",height:"100%","box-sizing":"border-box"});b();d();$(e).trigger("LAYOUT_INSTALLED")};this.show=function(r,o){var u=h(r);if(!u){return}var w=u.block;var z=u.blocktype;var t=w.hasClass("open");if(o==t){return}switch(z){case"pannal":var B=0;var q=u.position;if(!o){var n;switch(q){case"left":case"right":n=k.width();break;case"top":case"bottom":n=k.height();break}B=-Math.ceil(g(u.size,n))}o?w.css({visibility:"inherit"}):null;o?w.addClass("open"):w.removeClass("open");var l=function(){!o?w.css({visibility:"hidden"}):null;$(e).trigger((o?"BLOCK_SHOW":"BLOCK_HIDE"),{name:r,block:u.block,blocktype:u.blocktype})};w.css({transition:u.position+" 0.3s"});w.css(u.position,B+"px");setTimeout(l,250);break;case"flex":case"fixed":case"slide":if(!o||e.option.frameSet!="layoutSlide"){return}if(!e.option.slidedir||e.option.slidedir=="none"){for(var A=0;A<a.slide.length;A++){var s=a.slide[A]["block"];s.removeClass("open").css({"z-index":-1,visibility:"hidden"})}w.css({"z-index":(o?3:-1),visibility:(o?"visible":"hidden")});o?w.addClass("open"):w.removeClass("open");$(e).trigger((o?"BLOCK_SHOW":"BLOCK_HIDE"),{name:r,block:w})}else{var y=null;for(var A=0;A<a.slide.length;A++){var s=a.slide[A]["block"];if(s.hasClass("open")){y=s;y.css({"z-index":2,visibility:"inherit"})}else{s.css({"z-index":-1,visibility:"hidden"})}}var p=y?y.index():0;var v=w.index();if(p==v){if(w.css("visibility")=="hidden"){w.css({visibility:"inherit","z-index":1})}return}var C=(e.option.slidedir=="v")?k.outerHeight():k.outerWidth();var x=(e.option.slidedir=="v")?e.option.start["y"]:e.option.start["x"];if(y){if(e.option.slidedir=="v"){y.removeClass("open").stop().animate({top:(p<v?-C:C)+"px"},1200)}else{y.removeClass("open").stop().animate({left:(p<v?-C:C)+"px"},1200)}}w.addClass("open");var m=function(){if(y){y.removeClass("open").stop(true,true);y.css({"z-index":-1,visibility:"hidden"});$(e).trigger("BLOCK_HIDE",{name:r,block:y})}$(e).trigger("BLOCK_SHOW",{name:r,block:w})};if(e.option.slidedir=="v"){w.css({top:(p>v?-C:C)+"px","z-index":3,visibility:"inherit"});w.stop().animate({top:x+"px"},600,m)}else{w.css({left:(p>v?-C:C)+"px","z-index":3,visibility:"inherit"});w.stop().animate({left:x+"px"},600,m)}}break}};function h(m){var o;for(var l in a){for(var n=0;n<a[l].length;n++){if(a[l][n]["id"]==m){o=a[l][n];break}}}return o}function b(){a.fitw=[];a.fixed=[];a.flex=[];a.pannal=[];a.slide=[];a.side=[];k.find(">*").each(function(l){var m=j($(this));a[m.blocktype].push(m);if(m.blocktype=="flex"||m.blocktype=="fixed"){a.fitw.push(m)}});f()}function f(){var l=0;for(var m=0;m<a.flex.length;m++){l+=Number(a.flex[m]["flex"])}for(var m=0;m<a.flex.length;m++){a.flex[m]["weight"]=a.flex[m]["flex"]/l}}function j(n){var m=n.dataOptions();if(e.option.frameSet=="layoutSlide"){m.layoutType=(m.layoutType=="flex"||m.layoutType=="fixed")?"slide":m.layoutType;n.dataOptions(m)}var l;n.css({position:"absolute",overflow:"hidden"});m.scrollX?n.css({"overflow-x":"auto"}):null;m.scrollY?n.css({"overflow-y":"auto"}):null;(e.option.frameSet=="layoutSlide")?n.removeClass("open"):n.addClass("open");switch(m.layoutType){case"fixed":m.size=m.size||((e.option.flexdir=="x")?n.outerWidth(true):n.outerHeight(true));l={size:m.size,block:n,zindex:1};switch(e.option.flexdir){case"x":n.css({top:"0px",bottom:"0px"});break;case"y":n.css({left:"0px",right:"0px"});break}break;case"flex":l={minsize:m.minsize||15,weight:1,flex:m.flex||1,block:n,zindex:1};switch(e.option.flexdir){case"x":n.css({top:"0px",bottom:"0px"});break;case"y":n.css({left:"0px",right:"0px"});break}break;case"pannal":m.position=m.position||"left";
m.size=m.size||((m.position=="left"||m.position=="right")?n.outerWidth(true):n.outerHeight(true));l={position:m.position,open:m.open,size:m.size,ctrlBar:m.ctrlBar,disableOther:m.disableOther||false,block:n,zindex:(m.zindex||0)+99};n.addClass("side_"+m.position);m.open?n.addClass("open"):n.removeClass("open");switch(m.position){case"top":case"bottom":n.css({left:"0px",right:"0px"});break;case"left":case"right":n.css({top:"0px",bottom:"0px"});break}break;case"slide":l={block:n,zindex:1};if(m.open){n.css("visibility","inherit").addClass("open")}else{n.css("visibility","hidden").removeClass("open")}break;case"side":m.position=m.position||"left";m.size=m.size||((m.position=="left"||m.position=="right")?n.outerWidth(true):n.outerHeight(true));n.addClass("side_"+m.position);switch(m.position){case"top":case"bottom":n.css({left:"0px",right:"0px"});break;case"left":case"right":n.css({top:"0px",bottom:"0px"});break}l={position:m.position,size:m.size,block:n,zindex:9+(m.zindex||0)};break;default:m.layoutType="slide";l={block:n,zindex:1};break}l.blocktype=m.layoutType;l.id=n.attr("id")||"none";n.css({"z-index":l.zindex});return l}function g(n,m){n=Math.abs(n);var l=0;if(n>1){l=n}else{l=n*m}return l}function d(){var n=k.width();var u=k.height();var C=n;var p=u;var B=0;var z=0;for(var y=0;y<a.side.length;y++){var r=a.side[y]["position"];var l=a.side[y]["block"];var q=null;var w=null;switch(r){case"left":q=g(a.side[y]["size"],C);B+=q;n-=q;l.css({left:"0px"});break;case"right":q=g(a.side[y]["size"],C);l.css({right:"0px"});n-=q;break;case"top":w=g(a.side[y]["size"],p);z+=w;u-=w;l.css({top:"0px"});break;case"bottom":w=g(a.side[y]["size"],p);u-=w;l.css({bottom:"0px"});break}l.setRealSize(q,w);e.option.start={x:B,y:z}}for(var y=0;y<a.pannal.length;y++){var r=a.pannal[y]["position"];var v=a.pannal[y]["block"];var q=null;var w=null;var t=v.hasClass("open");var m=t?"inherit":"hidden";switch(r){case"left":q=g(a.pannal[y]["size"],C);v.css({left:(t?0:-q)+"px",visibility:m});break;case"right":q=g(a.pannal[y]["size"],C);v.css({right:(t?0:-q)+"px",visibility:m});break;case"top":w=g(a.pannal[y]["size"],p);v.css({top:(t?0:-w)+"px",visibility:m});break;case"bottom":w=g(a.pannal[y]["size"],p);v.css({bottom:(t?0:-w)+"px",visibility:m});break}v.setRealSize(q,w)}if(e.option.frameSet=="layoutSlide"){for(var y=0;y<a.slide.length;y++){var s=a.slide[y]["block"];s.css({left:B+"px",top:z+"px",visibility:((y>0)?"hidden":"inherit"),"z-index":-1});s.hasClass("open")?s.css({visibility:"inherit","z-index":3}):null;s.setRealSize(n,u)}return}var x=(e.option.flexdir=="x")?n:u;for(var y=0;y<a.fixed.length;y++){x-=g(a.fixed[y]["size"],(e.option.flexdir=="x")?n:u)}var o=0;for(var y=0;y<a.fitw.length;y++){var s=a.fitw[y]["block"];var A=0;if(a.fitw[y]["blocktype"]=="flex"){A=Math.floor(a.fitw[y]["weight"]*x)+o;if(A<a.fitw[y]["minsize"]){s.css({visiblility:"hidden","z-index":-1});o+=A}else{o=0;s.css({visiblility:"visible","z-index":a.fitw[y]["zindex"]});if(e.option.flexdir=="x"){s.setRealSize(A,u)}else{s.setRealSize(n,A)}}}else{A=(e.option.flexdir=="x")?g(a.fitw[y]["size"],n):g(a.fitw[y]["size"],u);if(e.option.flexdir=="x"){s.setRealSize(A,u)}else{s.setRealSize(n,A)}}s.css({left:B+"px",top:z+"px"});(e.option.flexdir=="x")?B+=A:z+=A}}this.destroy=function(){};this.resize=function(){d()};this.install()}function fixFreeLayout(a,e){var b=this;this.option={leftdis:0,rightdis:0};var g;var k;var d;var c;this.install=function(){e?$.extend(b.option,e):null;for(var o=0;o<b.option.wraper.length;o++){b.option.wraper[o]["contentObjDiv"]=b.option.wraper[o]["contentObj"]?a.find(b.option.wraper[o]["contentObj"]).eq(0):null}b.option.pannal=b.option.pannal?b.option.pannal:[];for(var o=0;o<b.option.pannal.length;o++){b.option.pannal[o]["contentObjDiv"]=b.option.pannal[o]["contentObj"]?a.find(b.option.pannal[o]["contentObj"]).eq(0):null}b.destroy();if(!g){g=$('<div class="layout_containerWraper"></div>');g.css({position:"relative",width:"100%",height:"100%",overflow:"hidden"});a.append(g)}else{g.empty()}for(var o=0;o<b.option.wraper.length;o++){var n=$('<div class="layout_fixpannel '+b.option.wraper[o]["class"]+'" id="'+b.option.wraper[o]["id"]+'"><div class="layout_content"></div></div>');b.option.wraper[o]["div"]=n;n.css({position:"absolute",top:"0px",bottom:"0px","overflow-x":"hidden","overflow-y":"hidden","z-index":1});g.append(n);n.find("div.layout_content").css({"overflow-x":"hidden","overflow-x":"auto"});b.option.wraper[o]["contentObjDiv"]?n.find(">.layout_content").append(b.option.wraper[o]["contentObjDiv"]):null}for(var o=0;o<b.option.pannal.length;o++){var q=$('<div class="layout_slidepannel '+b.option.pannal[o]["class"]+'" id="'+b.option.pannal[o]["id"]+'" rel="'+o+'"><div class="layout_content"></div></div>');var p=$('<div class="layout_dragbar"></div>');q.append(p);b.option.pannal[o]["div"]=q;g.append(q);q.find("div.layout_content").css({"overflow-x":"hidden","overflow-x":"auto"});b.option.pannal[o]["contentObjDiv"]?q.find(">.layout_content").append(b.option.pannal[o]["contentObjDiv"]):null;
q.css({position:"absolute",top:"0px",bottom:"0px","overflow-x":"hidden","overflow-y":"hidden","z-index":b.option.pannal[o]["zindex"]});b.option.pannal[o]["closepadding"]=(b.option.pannal[o]["openslide"])?{size:b.option.pannal[o]["closew"],hide:false}:{size:0,hide:true};b.option.pannal[o]["openpadding"]=(b.option.pannal[o]["closeslide"])?{size:b.option.pannal[o]["closew"],hide:false}:{size:0,hide:true};if(b.option.pannal[o]["dir"]=="right"){q.css({right:" 0px"});b.option.pannal[o]["closepadding"]["dir"]=b.option.pannal[o]["openpadding"]["dir"]="padding-left";p.addClass("rightSide").css({position:"absolute",top:"0px",bottom:"0px",overflow:"hidden",width:b.option.pannal[o]["closew"]+"px",left:"0px"});b.option.rightdis=b.option.pannal[o]["closepadding"]["size"]}else{q.css({left:" 0px"});b.option.pannal[o]["closepadding"]["dir"]=b.option.pannal[o]["openpadding"]["dir"]="padding-right";p.addClass("leftSide").css({position:"absolute",top:"0px",bottom:"0px",overflow:"hidden",width:b.option.pannal[o]["closew"]+"px",right:"0px"});b.option.leftdis=b.option.pannal[o]["closepadding"]["size"]}var m=b.option.pannal[o]["width"];q.find(">.layout_content").setRealSize(j(m));p.data("open",o);b.option.pannal[o]["openslide"]=b.option.pannal[o]["openslide"]?b.option.pannal[o]["openslide"]:b.option.openslide?b.option.openslide:null;b.option.pannal[o]["closeslide"]=b.option.pannal[o]["closeslide"]?b.option.pannal[o]["closeslide"]:b.option.closeslide?b.option.closeslide:null;l(q,true)}b.resize()};function j(m){if(typeof m=="function"){return m()}else{if(m>1){return m}else{return Math.floor(m*g.width())}}return 0}this.destroy=function(){$(b).unbind();if(g){g.del();g=null}a.empty()};this.getContainerById=function(n){for(var m=0;m<b.option.wraper.length;m++){if(b.option.wraper[m]["id"]==n){return b.option.wraper[m]["div"].find(".layout_content");break}}for(var m=0;m<b.option.pannal.length;m++){if(b.option.pannal[m]["id"]==n){return b.option.pannal[m]["div"].find(".layout_content");break}}return null};function h(){var m=$(this);var n=m.parent();if(n.hasClass("open")){l(n)}else{f(n)}}this.closeAllOpen=function(){g.find(">.layout_slidepannel.open").each(function(){l($(this),true)})};this.openPannalById=function(o){for(var m=0;m<b.option.pannal.length;m++){if(b.option.pannal[m]["id"]==o){var n=b.option.pannal[m]["div"];f(n);break}}};this.closePannalById=function(o){for(var m=0;m<b.option.pannal.length;m++){if(b.option.pannal[m]["id"]==o){var n=b.option.pannal[m]["div"];l(n);break}}};function f(o,p){if(!o.hasClass("open")||p){b.closeAllOpen();var n=o.find(">.layout_dragbar");var m=n.data("open");n.unbind();b.option.pannal[m]["closeslide"]?n.bind(b.option.pannal[m]["closeslide"],h):null;b.option.pannal[m]["openpadding"]["hide"]?n.hide():n.show();pwidth=j(b.option.pannal[m]["width"]);b.option.pannal[m]["closeslide"]?n.unbind().bind(b.option.pannal[m]["closeslide"],h):null;pwidth+=(b.option.pannal[m]["openpadding"]["size"]==0)?b.option.pannal[m]["closew"]:0;p?o.css({transition:""}):o.css({transition:"0.4s"});o.css(b.option.pannal[m]["openpadding"]["dir"],b.option.pannal[m]["openpadding"]["size"]);o.width(pwidth);o.addClass("open").find(">.layout_content").css({visibility:"inherit"}).setRealSize(pwidth);if(p){return}setTimeout(function(){$(b).trigger("SLIDE_RESIZE",{id:o.attr("id"),open:o.hasClass("open")})},p?50:450)}}function l(o,p){if(o.hasClass("open")||p){var n=o.find(">.layout_dragbar");var m=n.data("open");b.option.pannal[m]["closepadding"]["hide"]?n.hide():n.show();o.removeClass("open").find(">.layout_content").css({visibility:"hidden"});setTimeout(function(){b.option.pannal[m]["openslide"]?n.unbind().bind(b.option.pannal[m]["openslide"],h):null},1000);p?o.css({transition:""}):o.css({transition:"0.4s"});o.css(b.option.pannal[m]["closepadding"]["dir"],b.option.pannal[m]["closepadding"]["size"]);o.width(0);if(p){return}setTimeout(function(){$(b).trigger("SLIDE_RESIZE",{id:o.attr("id"),open:o.hasClass("open")})},p?50:450)}}this.resize=function(){var o=a.width();var v=a.height();o-=b.option.leftdis;o-=b.option.rightdis;g.height(v);var t=0;var y=0;for(var q=0;q<b.option.wraper.length;q++){b.option.wraper[q]["width"]>1?t+=b.option.wraper[q]["width"]:y+=b.option.wraper[q]["width"]}var p=1;if(o<t+b.option.minContWidth){p=o/(t+b.option.minContWidth)}var n=o;for(var q=0;q<b.option.wraper.length;q++){if(b.option.wraper[q]["width"]>1){var m=Math.floor(b.option.wraper[q]["width"]*p);n-=m}}var w=n/(y==0?1:y);var u=b.option.leftdis;for(var q=0;q<b.option.wraper.length;q++){var m;if(b.option.wraper[q]["width"]>1){m=Math.floor(b.option.wraper[q]["width"]*p)}else{m=Math.floor(b.option.wraper[q]["width"]*w)}b.option.wraper[q]["div"].css({left:u+"px"}).setRealSize(m);u+=m}for(var q=0;q<b.option.pannal.length;q++){var s=b.option.pannal[q]["div"];var r=s.find(">.layout_dragbar");if(s.hasClass("open")){f(s,true)}}g.find("div.layout_content").fillParent();$(b).trigger("LAYOUT_RESIZE")};this.install()}function VFlexLayout(a){var e=this;var d;var c=[];var b=[];var f=0;
this.install=function(){d=a.find(">*");d.each(function(){var h=$(this);var g=h.dataOptions();if(g.flex){h.data("flex",Number(g.flex));c.push(h);f+=Number(g.flex)}else{b.push(h)}});e.resize()};this.resize=function(){a.fillParent();var j=a.height();for(var g=0;g<b.length;g++){j-=b[g].outerHeight(true)}var k=j/f;for(var g=0;g<c.length;g++){c[g].setRealSize(null,Math.floor(k*c[g].data("flex"))).scrollY()}};this.destroy=function(){};this.install()}function LineFlowLayout(a){var c=this;var b={minWidth:100,maxWidth:200,wdis:0};var d;this.install=function(){var e=a.dataOptions();$.extend(b,e||{});c.resize()};this.resize=function(){d=a.find(">*");if(d.length==0){return}var e=a.width()-b.wdis;var h=d.eq(0).outerWidth(true)-d.eq(0).width();b.realspace=h;var f=Math.round(e/(b.realspace+(b.maxWidth+b.minWidth)/2));var g=e/f-b.realspace;g=100*g/e;d.css({width:g+"%"})};this.install()}function slideLayout(b,l){var c=this;this.option={};var k;var f;var g=[];var m;var a;var r;var q={};this.install=function(){l?$.extend(c.option,l):null;b.find(">*").each(function(){var p=$(this).attr("id");q[p]=$(this).clone()});k=$('<div class="fm_layoutWraper"></div>');k.css({position:"relative",overflow:"hidden"});b.empty().append(k);f=$('<div class="fm_layoutSlideButbox"><span></span> <a id="next" title="\u524d\u8fdb" class="but-green"><i class="fa fa-chevron-right"/></a><a id="prev" title="\u540e\u9000"  class="but-green"><i class="fa fa-chevron-left"/> </a> <a id="home" title="\u8fd4\u56de"  class="but-green"><i class="fa fa-step-backward"/></a></div>');b.append(f);f.find(">a").addClass("disabled").bind("click",h);c.resize()};function e(v,t,u){var s=$('<div id="'+v+'" class="fm_layoutSlideBlock"></div>');k.append(s);s.css({position:"absolute",top:"0px",left:"0px",visibility:"hidden",overflow:"auto","z-index":-1});s.fillParent();var p=q[t]?q[t].clone():null;if(p){s.append(p);p.fillParent().attr("id","layout_slide_widget")}return s}function h(){if($(this).hasClass("disabled")){return}var u=$(this).attr("id");switch(u){case"prev":if(m){var p=m.data("prevdiv");if(p){n(p.attr("id"),false,true)}}break;case"next":if(m){var t=m.data("nextdiv");if(t){n(t.attr("id"))}}break;case"home":if(m){var s=o(m);if(s){n(s.attr("id"),false,true)}}break}}function o(s){var p=s.data("prevdiv");if(p){return o(p)}else{return s}}this.getContainerById=function(s){var p=k.find(">#"+s);return p.length>0?p.eq(0):null};this.goTo=function(y,w,z,v){if(m){var u=m.data("nextdiv");u?d(u):null;m.data("nextdiv",null)}var s=cloneJson(z);var t=c.getContainerById(y);var x;if(!t){t=e(y,w,s);var A=t.find("#layout_slide_widget");A.widget(s);var x=A.attr("data-widgetName");t.attr("winName",x)}else{x=t.attr("winName");setTimeout(function(){WINDOW.reload(x,s)},100)}t.data("title",v);var p=WINDOW.getWindowById(x);p.disAutoResize();$.loading(3000);$(p).one("PAGE_LOADED",function(){n(y,true);$.loaded()}).bind("GOTO_PAGE",j)};function j(p,s){$(c).trigger("GOTO_PAGE",$.extend({stepid:m.attr("id")},s))}function d(p){var s=p.data("nextdiv");if(s){d(s)}p.data("prevdiv",null);p.data("nextdiv",null)}function n(t,x,w){if(!t){return}var v=c.getContainerById(t);a=v;var u=m;if(u){if(t==u.attr("id")){return}x?u.data("nextdiv",a):null;u.css({"z-index":1});var s=w?r:-r;$.slideTo(u,{},{left:s},2,function(){$(c).trigger("SLIDE_OUT",{obj:u,id:u.attr("id")})})}x?a.data("prevdiv",u):null;a.css({"z-index":2,visibility:"inherit"});var p=w?-r:r;$.slideTo(a,{left:p},{left:0},0.5,function(){u?u.css({visibility:"hidden","z-index":-1}):null;$(c).trigger("SLIDE_IN",{obj:a,id:a.attr("id")})});m=a;f.find(">span").text(m.data("title")||"");f.find(">a").addClass("disabled");m.data("prevdiv")?f.find(">a#prev,>a#home").removeClass("disabled"):null;m.data("nextdiv")?f.find(">a#next").removeClass("disabled"):null}this.resize=function(){k.setRealSize(null,b.height()-f.outerHeight(true));k.find(">*").fillParent();k.find(">*").each(function(){var t=$(this);t.find(">*").fillParent();var s=t.attr("winName");var p=WINDOW.getWindowById(s);p.resize()});r=k.outerWidth();$(c).trigger("LAYOUT_RESIZE")};this.destroy=function(){$(c).unbind();if(f){f.find(">a").unbind();f.del()}if(k){k.del();k=null}};this.install()}function Tabs(c,g){var f=this;var e={position:"top",width:90,"default":0};var b;var a;this.index;this.install=function(){var h=c.dataOptions();$.extend(e,h);if(g){b=$('<div class="fm_tabContent"></div>');b.append(g)}a=$('<div class="fm_tabPartWraper"></div>');a.css({width:"100%",height:"100%",overflow:"hidden"});c.before(a).css({visibility:"hidden"});a.append(c);if(g){a.append(b)}if(e.position=="left"){c.addClass("fm_tableft").css({"float":"left","overflow-x":"hidden","overflow-y":"auto"}).attr("dir","rtl");if(g){b.css({"float":"right",width:"100%",height:"100%","overflow-x":"hidden","overflow-y":"auto"}).after('<div class="cl"></div>')}}else{c.addClass("fm_tabtop");if(g){b.css({"float":"none","overflow-x":"hidden","overflow-y":"auto"});b.setRealSize(null,a.height()-c.outerHeight(true))}}c.find(">*").attr("dir","ltr").bind("click",d);
if(e.width){c.find(">*").setRealSize(e.width)}f.resize();c.css({visibility:"inherit"});if(!isNaN(e["default"])){f.gotoTab(e["default"])}};this.gotoTab=function(h){f.index=h;c.find(">*").eq(h).click()};function d(){c.find(".nowid").removeClass("nowid");$(this).addClass("nowid");f.index=$(this).index();$(f).trigger("TAB_CLICK",{tabItem:$(this)})}this.resize=function(){if(e.position=="left"){var h=[a.width(),a.height()];c.setRealSize(e.width,h[1]);if(g){b.setRealSize((h[0]-c.outerWidth(true)),h[1])}}else{if(g){if(e.autoHeight){b.height("auto")}else{b.setRealSize(null,a.height()-c.outerHeight(true))}}}if(g){$(f).trigger("TAB_RESIZE",{w:b.width(),h:b.height()})}else{$(f).trigger("TAB_RESIZE")}};this.install()}function AccordionFrame(b,e){var g=this;var f=b.find(">*");var d;this.install=function(){f.each(function(l){var k=$(this);var j=k.dataOptions();j.id=j.id?j.id:(k.attr("id")||("acc_"+l));var h=$('<div class="fm_AccordionBar" rel="'+j.id+'"><i class="fa fa-angle-down"></i> '+(j.title||"")+"</div>");k.before(h);k.attr("id",j.id).data("bar",h);j.open?h.addClass("open").find("i").attr("class","fa fa-angle-up"):k.hide()});d=b.find(">div.fm_AccordionBar");if(d.length==0){d.eq(0).addClass("open").find("i").attr("class","fa fa-angle-up");f.eq(0).show()}d.bind("click",function(){var h=d.index($(this));a(h)})};this.findAccPartById=function(k){var j=b.find(">div#"+k);if(j){var h=j.data("bar");return{part:j,bar:h}}else{return null}};this.hidePartById=function(l,j){var k=g.findAccPartById(l);if(k){if(j){k.part.hide();k.bar.hide()}else{var h=k.bar.hasClass("open");k.bar.show();h?k.part.show():k.part.hide()}}};function c(h,j){h.find("span.msgtip").remove();if(j){h.append($('<span class="msgtip">'+(j||"")+"</span>"))}}this.disableBar=function(h,j,l){var k=d.eq(h);k.find("span.flash,span.msgtip").remove();if(j){k.addClass("cantopen")}else{k.removeClass("cantopen")}c(k,l)};this.setFlash=function(j,h,l){var k=d.eq(j);k.find("span.flash").remove();if(h){k.append($('<span class="flash"></span>'))}c(k,l)};this.readyToLoad=function(j,h,l){var k=d.eq(j);if(k.hasClass("open")){return}k.addClass("needload").removeClass("cantopen");k.find("span.flash").remove();if(h){k.append($('<span class="flash"></span>'))}c(k,l)};function a(h,k){var j=d.eq(h);if(j.hasClass("cantopen")){return}c(j,k);j.find("span.flash").remove();if(j.hasClass("open")){j.removeClass("open").find("i").attr("class","fa fa-angle-down");f.eq(h).hide();return}else{if(j.hasClass("needload")){$(g).trigger("ACC_LOAD",{index:h,id:f.eq(h).attr("id")||"",callback:function(){j.removeClass("needload");a(h)}});return}}if(e){d.removeClass("open").find("i").attr("class","fa fa-angle-down");f.hide()}j.addClass("open").find("i").attr("class","fa fa-angle-up");f.eq(h).show();$(g).trigger("ACC_OPEN",{index:h,id:f.eq(h).attr("id")||""})}this.close=function(j){var h=b.find(".fm_AccordionBar[rel="+j+"]").eq(0);if(h.length>0&&h.hasClass("open")){h.click()}};this.open=function(j){var h=b.find(".fm_AccordionBar[rel="+j+"]").eq(0);if(h.length>0&&!h.hasClass("open")){h.click()}};this.install()}function ClockWidget(c){var f=this;var b;var d;var a;this.install=function(){d=$('<div class="widget_timeapp"></div>');d.css({"box-sizing":"border-box",width:"100%",height:"100%"});c.empty().append(d);a=new fillWraperFont(d,{length:6});f.resize();e();b=setInterval(e,1000)};function e(){var g=new Date();var j=formatTo2(g.getHours());var k=formatTo2(g.getMinutes());var h=formatTo2(g.getSeconds());d.text(j+":"+k+":"+h)}this.resize=function(){a?a.resize():null};this.destroy=function(){$(f).unbind();if(b){clearInterval(b);b=null}if(d){d.del();d=null}a=null};this.install()}function DateWidget(a){var b=this;var f;var e;var h;var d;var j;var c=0;this.install=function(){e=$('<div class="widget_dateapp"></div>');j=$('<div class="yearText"></div>');a.empty().append(e).append(j);h=new fillWraperFont(e,{length:5});d=new fillWraperFont(j,{length:9});g();b.resize();f=setInterval(g,10000)};function g(){var l=new Date();if(l.getDate()==c){return}c=l.getDate();var n=l.getFullYear();var p=formatTo2(l.getMonth()+1);var m=formatTo2(l.getDate());var k=l.getDay();var o="\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d";k=o.substr(k,1);e.html("<p>"+p+"<span>\u6708 </span>"+m+"<p>");j.text("\u661f\u671f"+k+" \u00b7 "+n+"\u5e74")}this.resize=function(){var k=a.height();e.setRealSize(null,Math.floor(k*0.7));j.setRealSize(null,Math.floor(k*0.22));h.resize();d.resize()};this.destroy=function(){$(b).unbind();if(f){clearInterval(f);f=null}if(e){e.del();e=null}if(j){j.del();j=null}fitFont=null};this.install()}function MemoWidget(b,l,d){this.ID=l;var c=this;var f;var k;var h;var g="widgetMemoCookie"+projectName||"";this.install=function(){if(b.data("obj")){return b.data("obj")}g=l?l:g;h=$('<div class="widget_memotitle">\u5907\u5fd8\u5f55</div>');k=$("<div></div>");f=$('<div class="widget_memoboard">\u5907\u5fd8\u5f55\uff0c\u53cc\u51fb\u6dfb\u52a0\u5185\u5bb9...</div>');k.css({"overflow-y":"auto","overflow-x":"hidden"});b.empty().append(h).append(k);
k.append(f);c.resize();f.one("dblclick",j).bind("paste",delInputHtml);b.data("obj",c)};this.loadThis=function(){if(d){$(c).trigger("LOAD_MEMO",{callback:c.showMemo,id:c.ID})}else{var m=readFromLocal(g);console.log(m,g);c.showMemo(m)}};this.showMemo=function(m){if(m){f.html(m.html)}};function j(){f.addClass("editablebox").attr("contenteditable",true).focus();f.one("blur",a)}function a(){f.removeClass("editablebox").attr("contenteditable",false).one("dblclick",j);e()}function e(){var m;if(!trim(f.text())){m="\u5907\u5fd8\u5f55\uff0c\u53cc\u51fb\u6dfb\u52a0\u5185\u5bb9...";f.html(m)}else{m=trim(f.html()+"")}if(d){$(c).trigger("SAVE_MEMO",{data:{html:m},id:c.ID})}else{saveToLocal(g,{html:m})}}this.resize=function(){k.setRealSize(null,(b.height()-h.outerHeight(true)))};this.destroy=function(){h.del();f.unbind().del()};this.install()}function CalanderWidget(l,s,n){this.ID=s;var o=this;var w;var u;var d;var k;var j="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5";var v="calanderCookie"+projectName||"";var q={};var g=2;var r=[];var h="\u6682\u65e0\u5185\u5bb9";this.install=function(){if(l.data("obj")){return l.data("obj")}v=s?s:v;w=$('<div class="widget_calander"></div>');w.css({overflow:"hidden",position:"relative"});l.empty().append(w);d=$('<table width="100%" border="0" cellspacing="0" cellpadding="0"></table>');k=$('<div class="calander_title"><a class="prev"><</a><span></span><a class="next">></a></div>');w.append(k).append(d);for(var A=0;A<7;A++){var B="<tr>";for(var z=0;z<7;z++){B+=(A==0)?'<th width="14.28%">'+j.substr(z,1)+"</th>":"<td>"+(A+z)+"</td>"}B+="</tr>";d.append($(B))}u=new Date();var p=new Date();p.setMonth(p.getMonth()+g);var A=0;r.push(p.getFullYear()+"_"+p.getMonth());while(A<2*g){A++;p.setMonth(p.getMonth()-1);r.push(p.getFullYear()+"_"+p.getMonth())}y(u);k.find(">a").bind("click",a);d.find("tr:eq(0) th:gt(4)").addClass("calander_weekend");d.find("tr >td").bind("dblclick",x);o.resize();l.data("obj",o)};this.loadThis=function(){if(n){$(o).trigger("LOAD_CALANDER",{callback:o.showMemo,id:o.ID})}else{var p=readFromLocal(v);o.showMemo(p)}};this.showMemo=function(p){q=p?p:{};if(!n){t()}f()};function t(){for(var p in q){if(!c(p)){delete q[p]}}}function c(p){for(var z=0;z<r.length;z++){if(p.indexOf(r[z])==0){return true;break}}return false}function m(){if(n){$(o).trigger("SAVE_CALANDER",{data:q,id:o.ID})}else{saveToLocal(v,JSON.stringify(q))}}function a(){if(u.getFullYear()<2000||u.getFullYear()>2300){return}if($(this).hasClass("prev")){u.setMonth(u.getMonth()-1)}else{if($(this).hasClass("next")){u.setMonth(u.getMonth()+1)}}y(u);f()}function y(Q){var K=new Date();var F=K.getMonth();var L=K.getDate();var O=K.getFullYear();var C=Q.getMonth();var N=Q.getFullYear();var I=new Date(N,C,1);I.setDate(1);k.find(">span").text(N+"\u5e74 "+(C+1)+"\u6708");d.find("td").removeClass("calander_otherMonth").removeClass("calander_today");var H=I.getDay()-1;if(H<0){H=6}I.setDate(1);I.setDate(I.getDate()-H-1);var G=42;for(var B=0;B<G;B++){I.setDate(I.getDate()+1);var p=I.getDate();var J=I.getMonth();var z=I.getFullYear();var P=Math.floor(B/7)+1;var A=B%7;var E=d.find("tr:eq("+P+") td:eq("+A+")");E.html("<span>"+p+"</span>");E.data({y:z,m:J,d:p,id:z+"_"+J+"_"+p});E.attr("id",z+"_"+J+"_"+p);if(C!=J){E.addClass("calander_otherMonth")}if(O==z&&F==J&&L==p){E.addClass("calander_today")}}}function f(){d.find("tr:gt(0) td").each(function(){var p=$(this);var z=p.data("id");if(q[z]){p.css({position:"relative"}).append($("<p>&nbsp;</p>"))}})}function x(){var C=$(this);var A=C.data("y")+"_"+C.data("m");if(!c(A)){return}C.find("p").del();var D=C.data("id");var B=w.find(".calanderEditor");if(B.length==0){B=$('<div class="calanderEditor"><h1><i class="fa fa-remove  closebut"></i><span></span></h1><div class="editWraper"><div class="editPad" contenteditable="true"></div></div></div>');w.append(B);B.css({position:"absolute","z-index":9999,width:"50%",height:"50%",top:"25%",left:"25%","background-color":"#fff"});B.find(".closebut").one("click",e)}B.data("id",D).focus();var z=C.data("y")+"\u5e74"+(C.data("m")+1)+"\u6708"+C.data("d")+"\u65e5";B.find("h1 span").text(z);var p=q[D]||h;B.find(".editPad").html(p).unbind().bind("paste",delInputHtml).one("blur",e);B.find(".editWraper").css({"overflow-y":"auto"}).setRealSize(null,B.height()-B.find("h1").outerHeight(true))}function e(){var p=w.find(".calanderEditor");var B=p.data("id");if(p.length==0){return}p.find("*:empty:not(br)").remove();var A=trim(p.find(".editPad").text());if(A&&A!=h){q[B]=p.find(".editPad").html();var z=d.find("#"+B);z.css({position:"relative"}).append($("<p>&nbsp;</p>"))}else{delete q[B]}p.del();m()}function b(p,z){var A=new Date(p,z,1);A.setMonth(A.getMonth()+1);A.setDate(0);return A.getDate()}this.destroy=function(){$(o).unbind();w.del()};this.resize=function(){w.fillParent();var z=w.height();dateH=z-k.outerHeight(true)-d.find("tr:eq(0)").outerHeight();var p=Math.floor(dateH/6);d.find("tr:gt(0) td").setRealSize(null,p);var A=w.find(".calanderEditor");if(A.length>0){A.find(".editWraper").setRealSize(null,A.height()-A.find("h1").outerHeight(true))
}};this.install()}function RollToolBar(h,e){var b=this;var g={pos:[$(window).width()-150,$(window).height()-150],r:50};var f;var a;var l;var c="RollPosition";var k=ZINDEX.tool;var j;this.install=function(){$.extend(g,e);f=$('<div class="RollToolsBox"><div class="RollToolsBigRoll"><dd></dd><i class="fa fa-wrench  fa-spin fa-3x fa-fw"></i></div></div>');$("body").append(f);j=getCookie(c);if(j){j=JSON.parse(j);j[0]=parseInt(j[0]);j[1]=parseInt(j[1])}else{j=g.pos}b.resize();$(window).bind("resize",b.resize);var s=h.length;var o=(Math.PI*2)/s;var q=g.r;l=f.find(".RollToolsBigRoll");l.css({position:"relative"});var n=[Math.floor(l.outerWidth()/2),Math.floor(l.outerHeight()/2)];for(var r=0;r<s;r++){var v=h[r]["title"]?' title="'+h[r]["title"]+'"':"";var u=$('<a class="rollicon" rel="'+h[r]["name"]+'" rev="'+r+'" '+v+'><dt class="'+h[r]["icon"]+'"></dt></a>');u.css({position:"absolute"});h[r]["status"]?u.addClass("nowid"):u.removeClass("nowid");u.data("data",h[r]);l.append(u);h[r]["in"]={left:n[0]+"px",top:n[1]+"px",opacity:0,width:"0px",height:"0px"};var m=o*r;h[r]["out"]={left:Math.floor(n[0]+q*Math.cos(m)-u.outerWidth()/2)+"px",top:Math.floor(n[1]+q*Math.sin(m)-u.outerHeight()/2)+"px",opacity:0.7,width:"36px",height:"36px"};u.css(h[r]["in"])}a=new dragDivObj();a.install(l,f);$(a).bind("DRAG_END",function(){j=[parseInt(f.css("left").replace("px","")),parseInt(f.css("top").replace("px",""))];addCookie(c,JSON.stringify(j))});var p;var t;l.bind("click",function(){t=f.offset();if(t.top!=p.top||t.left!=p.left){return}if($(this).hasClass("open")){b.collapse();$(this).removeClass("open").addClass("close")}else{b.expend();$(this).addClass("open").removeClass("close")}}).bind("mousedown",function(){p=f.offset()});f.find("a.rollicon").bind("mousedown",d)};this.resize=function(){if(!f){$(window).unbind("resize",b.resize);return}var n=$(window).width()-100;var m=$(window).height()-100;j[0]=(j[0]<100)?100:parseInt(j[0]);j[0]=(j[0]>n)?n:j[0];j[1]=(j[1]<100)?100:parseInt(j[1]);j[1]=(j[1]>m)?m:j[1];f.css({"z-index":k,left:j[0]+"px",top:j[1]+"px"})};this.destroy=function(){$(window).unbind("resize",b.resize);if(a){$(a).unbind();a.destroy();a=null}if(l){l.unbind().del();l=null}if(f){f.del();f=null}};this.expend=function(){f.find("a.rollicon").each(function(n){var m=$(this);setTimeout(function(){m.css(h[n]["out"])},n*50)});f.find("a.rollicon").bind("click",function(p){d(p);var o=$(this);var n=null;var m=o.data("data");if(m["switch"]){n=o.hasClass("nowid");n?o.removeClass("nowid"):o.addClass("nowid")}$(b).trigger("TOOLICON_CLICK",{item:o,name:o.attr("rel"),status:n})})};this.setIconStatus=function(p,n,m){var o=f.find("a.rollicon[rel="+p+"]");n?o.addClass("nowid"):o.removeClass("nowid");m?o.find("dt").attr("class",m):null};this.findIconByName=function(m){return f.find("a.rollicon[rel="+m+"]")};this.collapse=function(){f.find("a.rollicon").each(function(n){var m=$(this);m.css(h[n]["in"])});f.find("a.rollicon").unbind("click")};this.hide=function(m){m?f.hide():f.show()};function d(m){stopPP(m);m.preventDefault()}this.install()}(function(c){c.fn.DatePicker=function(){c(this).each(b)};function b(){c(this).data("type","dateinput");c(this).bind("click",function(){if(c(this).attr("disabled")==true||c(this).hasClass("readonly")){return}var d=c(this).dataOptions();var e=new DateTimePicker();e.install(c(this),d)})}c.fn.DateSelector=function(){c(this).each(a)};function a(){c(this).bind("click",function(){if(c(this).attr("disabled")==true||c(this).hasClass("readonly")){return}var d=c(this).dataOptions();var e=new DateSelector();e.install(c(this),d)})}})(jQuery);function DateTimePicker(){this.option={format:"normal",data:"y,m,d",force2:true,field:["1900-1-1","2999-11-30"]};this.input;this.ID="dpicker_"+Math.floor(Math.random()*10000);var O;this.nowSelectedDate;var I;var r=["dateSelectPanal","monthSelectPanal","yearSelectPanal","timeSelectPanal"];var T;var c="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5";var J="\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708";var h;var t;var b;var w;var Q=this;this.install=function(Y,X){Q.input=$(Y);if(X){$.extend(Q.option,X)}W();h=M(Q.option.field[0],true);t=M(Q.option.field[1],false);$(".dateTimePicker").remove();O=$('<div class="dateTimePicker" id="'+Q.ID+'"><div class="selectorPanal"></div></div>');O.css({visibility:"hidden"});$("body").append(O);O.css({"min-width":(Y.outerWidth()-7)+"px"});if(document.all){O.prepend($('<div class="relpos" style="z-index:-1"><iframe width="210" height="200" frameborder="none"></iframe></div>'));O.find("iframe").show()}O.unbind().bind("mouseenter",s).bind("mouseleave",x).bind("mousedown",S);var p=a(Q.input.val());Q.nowSelectedDate=v(p);if(!Q.nowSelectedDate||!Q.nowSelectedDate.getFullYear()){Q.nowSelectedDate=new Date()}if(Q.nowSelectedDate>t){Q.nowSelectedDate=P(t)}else{if(Q.nowSelectedDate<h){Q.nowSelectedDate=P(h)}}I=P(Q.nowSelectedDate);b=P(Q.nowSelectedDate);
n(b);Y.unbind("mousemove").bind("mousemove",S);O.bind("mousemove",S).bind("mousewheel",S);E(b);$(document).unbind("mousemove",x).one("mousemove",x).one("mousedown",Q.destroy);m();O.css({visibility:"inherit"});$(window).bind("resize",m).bind("scroll",m).bind("mousewheel",Q.destroy)};function M(p,X){if(p){if(typeof p=="string"){return g(p)}else{if(typeof p=="object"){var Y=new Date();p.y?Y.setYear(Y.getFullYear()+parseInt(p.y)||0):null;p.m?Y.setMonth(Y.getMonth()+parseInt(p.m)||0):null;p.d?Y.setDate(Y.getDate()+parseInt(p.d)||0):null;p.h?Y.setHours(Y.getHours()+parseInt(p.h)||0):null;p.t?Y.setMinutes(Y.getMinutes()+parseInt(p.t)||0):null;p.s?Y.setSeconds(Y.getSeconds()+parseInt(p.s)||0):null;return Y}}}else{if(p==0){return new Date()}}if(X){return new Date(1900,0,1)}else{return new Date(3000,0,1)}}function S(p){p.stopPropagation()}function s(){if(w){clearTimeout(w);w=null}}function x(){s();w=setTimeout(function(){O.fadeOut("normal",Q.destroy)},3000)}function m(){if(O){var Y=Q.input.offset();O.css({left:"0px",top:"0px"});var X={top:Y.top-$(window).scrollTop(),left:Y.left-$(window).scrollLeft()};var p={top:$(window).height()-O.outerHeight(true)-10,left:$(window).width()-O.outerWidth(true)-15};Y.top=(X.top<p.top)?X.top:p.top;Y.left=(X.left<p.left)?X.left:p.left;Y.top+=$(window).scrollTop();Y.left+=$(window).scrollLeft();O.css({left:Math.floor(Y.left)+"px",top:Math.floor(Y.top)+"px"})}else{Q.destroy()}}this.destroy=function(){$(window).unbind("resize",m).unbind("scroll",m);$(document).unbind("mousemove",x);s();if(O){O.del();O=null}Q.ID=null};function n(ac){var af=$('<div class="selectedDateContainer"></div>');var ad=$('<div class="selectedTimeContainer"></div>');if(Q.option.data.indexOf("h")>-1||Q.option.data.indexOf("t")>-1||Q.option.data.indexOf("s")>-1){O.prepend(ad).find(".selectorPanal").append($('<div id="timeSelectPanal">'+y+"</div>"));var p=O.find("#timeSelectPanal tr:eq(0)").find("td").length;var Z=$('<tr class="hd"><td colspan="'+p+'" id="timeAddPannal"></td></div>');O.find("#timeSelectPanal tr:last").before(Z)}if(Q.option.data.indexOf("y")>-1||Q.option.data.indexOf("m")>-1||Q.option.data.indexOf("d")>-1){O.prepend(af)}O.prepend($('<div class="smallClosebut"><div></div></div>'));for(var Y=0;Y<Q.option.data.length;Y++){switch(Q.option.data.substr(Y,1)){case"y":af.append('<span id="selected_year"></span>');var ae=$('<div id="yearSelectPanal"></div>');O.find(".selectorPanal").append(ae);break;case"m":af.append('<span id="selected_month"></span>');var ab=$('<div id="monthSelectPanal"></div>');O.find(".selectorPanal").append(ab);break;case"d":af.append('<span id="selected_date"></span>');var aa=$('<div id="dateSelectPanal"></div>');O.find(".selectorPanal").append(aa);break;case"h":ad.append('<span id="selected_hours"></span>');O.find("#timeSelectPanal tr").find("td:eq(0)").addClass("toremove").find("span").attr("rel","hours");break;case"t":ad.append('<span id="selected_minutes"></span>');O.find("#timeSelectPanal tr").find("td:eq(1) ,  td:eq(2) ").addClass("toremove").find("span").attr("rel","minutes");break;case"s":ad.append('<span id="selected_seconds"></span>');O.find("#timeSelectPanal tr").find("td:eq(3),td:eq(4)").addClass("toremove").find("span").attr("rel","seconds");break}}if(Q.option.data.indexOf("d")>-1){O.find("#dateSelectPanal").before($('<div class="chgDatePagebut" id="dateChangeBut"><span class="pre"></span> <span></span></div>'))}if(Q.option.data.indexOf("y")>-1){O.find("#yearSelectPanal").before($('<div class="chgDatePagebut" id="yearChangeBut"><span class="pre"></span> <span></span></div>'))}if(O.find("#timeSelectPanal tr:eq(1) td:eq(0)").html()==":"){O.find("#timeSelectPanal tr").find("td:eq(0)").remove()}O.find("#timeSelectPanal tr td").each(function(){if(!$(this).hasClass("toremove")){$(this).remove()}else{$(this).removeClass("toremove")}});for(var X=0;X<r.length;X++){if(O.find(".selectorPanal #"+r[X]).length>0){O.find(".selectorPanal #"+r[X]).show();break}}O.append($('<div class="DateButsPanal"><span id="picker_cleardate">\u6e05\u7a7a</span><span id="picker_confirmdate">\u786e\u5b9a</span><span id="picker_closedate">\u5173\u95ed</span></div>'));Q.setPickerPannal(ac);if(Q.option.data.indexOf("h")>-1){Z.find("td#timeAddPannal").append($('<div id="hourSelectPanal" class="hd">'+V(1,24,8)+"</div>"))}if(Q.option.data.indexOf("t")>-1){Z.find("td#timeAddPannal").append($('<div id="minuteSelectPanal" class="hd">'+V(5,60,6)+"</div>"))}if(Q.option.data.indexOf("s")>-1){Z.find("td#timeAddPannal").append($('<div id="secondSelectPanal" class="hd">'+V(5,60,6)+"</div>"))}O.find(".chgDatePagebut span").unbind().bind("click",A);B();O.find("#timeSelectPanal td span").unbind().bind("click",U);O.find("#timeSelectPanal td p").unbind().bind("click",L);O.find(".selectorPanal>div[class=chgDatePagebut]").hide();O.find(".selectorPanal>div[class!=chgDatePagebut]").hide().css({"background-color":"#fff"});O.find(".smallClosebut div").unbind().bind("click",Q.destroy);O.find(".DateButsPanal span").bind("click",R);if(Q.option.data.indexOf("d")>-1){o=O.find("#dateSelectPanal,.chgDatePagebut[id=dateChangeBut]")
}else{switch(Q.option.data.replace(/,/g,"").substr(Q.option.data.replace(/,/g,"").length-1,1)){case"s":case"t":case"h":o=O.find("#timeSelectPanal");break;case"d":o=O.find("#dateSelectPanal,.chgDatePagebut[id=dateChangeBut]");break;case"m":o=O.find("#monthSelectPanal");break;case"y":o=O.find("#yearSelectPanal,.chgDatePagebut[id=yearChangeBut]");break}}o.show()}function R(){var X=$(this).attr("id");switch(X){case"picker_closedate":Q.destroy();break;case"picker_confirmdate":G();break;case"picker_cleardate":Q.input.val("");try{ev=document.createEvent("HTMLEvents");ev.initEvent("change",false,true);Q.input.get(0).dispatchEvent(ev)}catch(p){if(document.all){Q.input.get(0).fireEvent("onchange")}}Q.destroy();break}}function G(){var p=N(Q.nowSelectedDate);Q.input.val(p);try{ev=document.createEvent("HTMLEvents");ev.initEvent("change",false,true);Q.input.get(0).dispatchEvent(ev)}catch(X){if(document.all){Q.input.get(0).fireEvent("onchange")}}Q.destroy()}function L(){var aa=$(this).attr("id");var Z=$(this);if(Z.hasClass("onshow")){j();return}O.find("#timeSelectPanal .onshow").removeClass("onshow");var p;var Y=function(){var ab=$(this).find("span").html();p(ab);Z.html(C(ab+"",2,"0"));if(Q.nowSelectedDate<h||Q.nowSelectedDate>t){Z.addClass("disabled")}else{Z.removeClass("disabled")}Q.nowSelectedDate=(Q.nowSelectedDate<h)?P(h):Q.nowSelectedDate;Q.nowSelectedDate=(Q.nowSelectedDate>t)?P(t):Q.nowSelectedDate;E(Q.nowSelectedDate);X.slideUp("fast",function(){X.parent().parent().hide()});Z.removeClass("onshow")};var X;switch(aa){case"select_hours":X=O.find("#hourSelectPanal");p=function(ab){Q.nowSelectedDate.setHours(ab)};break;case"select_minutes":X=O.find("#minuteSelectPanal");p=function(ab){Q.nowSelectedDate.setMinutes(ab)};break;case"select_seconds":X=O.find("#secondSelectPanal");p=function(ab){Q.nowSelectedDate.setSeconds(ab)};break}X.parent().parent().show().find("div").hide();X.slideDown("fast").find("td").unbind().bind("click",Y);Z.addClass("onshow")}function j(){O.find("#timeSelectPanal .onshow").removeClass("onshow");O.find("#timeAddPannal").parent().hide()}function U(){var p=0;if($(this).html()=="+"){p=1}else{if($(this).html()=="-"){p=-1}else{return}}var X=$(this).attr("rel");u(X,p)}function u(Z,p){var Y="";var aa=0;var X=0;var ab;switch(Z){case"hours":Y=O.find("#timeSelectPanal  #select_hours");X=24;ab=function(ac){Q.nowSelectedDate.setHours(ac)};break;case"minutes":Y=O.find("#timeSelectPanal  #select_minutes");X=60;ab=function(ac){Q.nowSelectedDate.setMinutes(ac)};break;case"seconds":Y=O.find("#timeSelectPanal  #select_seconds");ab=function(ac){Q.nowSelectedDate.setSeconds(ac)};X=60;break}aa=parseInt(Y.html());aa+=p;if(aa>=X){aa=0}else{if(aa<0){aa=X-1}}Y.html(C(aa,2,"0"));ab(aa);if(Q.nowSelectedDate<h||Q.nowSelectedDate>t){Y.addClass("disabled")}else{Y.removeClass("disabled")}Q.nowSelectedDate=(Q.nowSelectedDate<h)?P(h):Q.nowSelectedDate;Q.nowSelectedDate=(Q.nowSelectedDate>t)?P(t):Q.nowSelectedDate;E(Q.nowSelectedDate)}function B(){O.find("#yearSelectPanal tr td").unbind().bind("click",F);O.find("#monthSelectPanal tr td").unbind().bind("click",e);O.find("#dateSelectPanal tr td").unbind().bind("click",K);O.find(".selectedDateContainer span,.selectedTimeContainer span").unbind().bind("click",z)}var o;var q;function z(){var p=$(this).attr("id");D(p)}function D(p){if(q==p||(("selected_hours selected_minutes selected_seconds").indexOf(p)>-1&&("selected_hours selected_minutes selected_seconds").indexOf(q)>-1)){return}q=p;if(o){o.slideUp("fast")}switch(p){case"selected_hours":case"selected_minutes":case"selected_seconds":o=O.find("#timeSelectPanal");break;case"selected_year":o=O.find("#yearSelectPanal,.chgDatePagebut[id=yearChangeBut]");break;case"selected_month":o=O.find("#monthSelectPanal");break;case"selected_date":o=O.find("#dateSelectPanal,.chgDatePagebut[id=dateChangeBut]");break}if(document.all){o.slideDown("fast",function(){o.css({overflow:"visible"})})}else{o.slideDown("fast")}}function F(){var p=parseInt($(this).find("span").html());if(!p){return}O.find("#yearSelectPanal tr td.selectedtd").removeClass("selectedtd");$(this).addClass("selectedtd");Q.nowSelectedDate.setYear(p);Q.setDateTime();if(Q.option.data.substr(Q.option.data.length-1,1)=="y"){G();return}else{if(Q.option.data.indexOf("m")>-1){D("selected_month")}}O.find("#monthSelectPanal").html(l(Q.nowSelectedDate));O.find("#dateSelectPanal").html(H(new Date(Q.nowSelectedDate.getFullYear(),Q.nowSelectedDate.getMonth(),Q.nowSelectedDate.getDate())));B()}function e(){O.find("#monthSelectPanal tr td.selectedtd").removeClass("selectedtd");$(this).addClass("selectedtd");var p=parseInt($(this).find("span").attr("rel"));Q.nowSelectedDate.setMonth(p);Q.setDateTime();if(Q.option.data.substr(Q.option.data.length-1,1)=="m"){G();return}else{if(Q.option.data.indexOf("d")>-1){D("selected_date")}}O.find("#monthSelectPanal").html(l(Q.nowSelectedDate));O.find("#dateSelectPanal").html(H(new Date(Q.nowSelectedDate.getFullYear(),Q.nowSelectedDate.getMonth(),Q.nowSelectedDate.getDate())));
B()}function K(){var X=parseInt($(this).find("span").html());var p=parseInt($(this).find("span").attr("rel"));if(!X||(!p&&p!==0)){return}Q.nowSelectedDate.setMonth(p);Q.nowSelectedDate.setDate(X);Q.setDateTime();if(Q.option.data.substr(Q.option.data.length-1,1)=="d"){G();return}else{if(Q.option.data.indexOf("h")>-1||Q.option.data.indexOf("t")>-1||Q.option.data.indexOf("s")>-1){D("selected_hours")}}O.find("#monthSelectPanal").html(l(Q.nowSelectedDate));O.find("#dateSelectPanal").html(H(new Date(Q.nowSelectedDate.getFullYear(),Q.nowSelectedDate.getMonth(),Q.nowSelectedDate.getDate())));B()}this.setDateTime=function(p){Q.nowSelectedDate=p?p:Q.nowSelectedDate;if(Q.nowSelectedDate>t){Q.nowSelectedDate=P(t)}else{if(Q.nowSelectedDate<h){Q.nowSelectedDate=P(h)}}Q.nowSelectedDate=(Q.nowSelectedDate<h)?P(h):Q.nowSelectedDate;Q.nowSelectedDate=(Q.nowSelectedDate>t)?P(t):Q.nowSelectedDate;E(Q.nowSelectedDate);Q.setPickerPannal(Q.nowSelectedDate)};function A(){var p=$(this).parent().attr("id");if(p=="yearChangeBut"){if($(this).hasClass("pre")){if(b.getFullYear()<(h.getFullYear())){return}b.setYear(b.getFullYear()-24);if(b.getFullYear()<(h.getFullYear()+13)){b.setYear(h.getFullYear()+13)}}else{if(b.getFullYear()>=(t.getFullYear()-10)){return}b.setYear(b.getFullYear()+24);if(b.getFullYear()>=(t.getFullYear()-10)){b.setYear(t.getFullYear()-10)}}O.find("#yearSelectPanal").html(d(b.getFullYear()))}else{if(p=="dateChangeBut"){var X=Q.nowSelectedDate.getDate();Q.nowSelectedDate.setDate(1);if($(this).hasClass("pre")){Q.nowSelectedDate.setMonth(Q.nowSelectedDate.getMonth()-1)}else{Q.nowSelectedDate.setMonth(Q.nowSelectedDate.getMonth()+1)}var Y=k(Q.nowSelectedDate.getYear(),Q.nowSelectedDate.getMonth());if(Y<X){X=Y}Q.nowSelectedDate.setDate(X);Q.nowSelectedDate.setYear(Q.nowSelectedDate.getFullYear());if(Q.nowSelectedDate<h){Q.nowSelectedDate=P(h)}else{if(Q.nowSelectedDate>t){Q.nowSelectedDate=P(t)}}Q.setPickerPannal(Q.nowSelectedDate);Q.nowSelectedDate=(Q.nowSelectedDate<h)?P(h):Q.nowSelectedDate;Q.nowSelectedDate=(Q.nowSelectedDate>t)?P(t):Q.nowSelectedDate;E(Q.nowSelectedDate)}}B()}Q.setPickerPannal=function(p){for(var X=0;X<Q.option.data.length;X++){switch(Q.option.data.substr(X,1)){case"y":O.find("#yearSelectPanal").html(d(p.getFullYear()));break;case"m":O.find("#monthSelectPanal").html(l(p));break;case"d":O.find("#dateSelectPanal").html(H(new Date(Q.nowSelectedDate.getFullYear(),p.getMonth(),Q.nowSelectedDate.getDate())));break;case"h":O.find("#timeSelectPanal #select_hours").html(C(p.getHours()+"",2,"0"));break;case"t":O.find("#timeSelectPanal #select_minutes").html(C(p.getMinutes()+"",2,"0"));break;case"s":O.find("#timeSelectPanal #select_seconds").html(C(p.getSeconds()+"",2,"0"));break}}B()};function E(p){O.find("#selected_year").html(p.getFullYear()+"\u5e74");O.find("#selected_month").html((p.getMonth()+1)+"\u6708");O.find("#selected_date").html(p.getDate()+"\u65e5");O.find("#selected_hours").html(C(p.getHours(),2,"0")+"\u65f6");O.find("#selected_minutes").html(C(p.getMinutes(),2,"0")+"\u5206");O.find("#selected_seconds").html(C(p.getSeconds(),2,"0")+"\u79d2")}function v(ab){if(!ab||ab==""){return null}var aa={y:2000,m:1,d:1,h:0,t:0,s:0};var p=a(ab).replace("\u5e74","-").replace("\u6708","-").replace("\u65e5","-").replace("\u65f6",":").replace("\u5206",":").replace("\u79d2","").replace(/\//g,"-");p=p.replace(/:/g,"-").replace(/ /g,"-");while(p.indexOf("--")>-1){p=p.replace("--","-")}p=p.split("-");var Z=Q.option.data.split(",");for(var X=0;X<Z.length;X++){aa[Z[X]]=p[X]?f(p[X]):0}try{return new Date(aa.y,aa.m-1,aa.d,aa.h,aa.t,aa.s)}catch(Y){return null}return null}function f(p){p=p.toString();while(p.indexOf("0")==0&&p.length>1){p=p.substr(1,p.length)}return parseInt(p)}function N(X){var ab=T;var p=Q.option.force2?C((X.getMonth()+1),2,"0"):(X.getMonth()+1);var ac=Q.option.force2?C(X.getDate(),2,"0"):X.getDate();var aa=Q.option.force2?C(X.getHours(),2,"0"):X.getHours();var Y=Q.option.force2?C(X.getMinutes(),2,"0"):X.getMinutes();var Z=Q.option.force2?C(X.getSeconds(),2,"0"):X.getSeconds();ab=ab.replace("y",X.getFullYear()+"").replace("m",p).replace("d",ac).replace("h",aa).replace("t",Y).replace("s",Z);return ab}function C(X,p,Y){var Z=X+"";if(Z.length>=p){return Z.substr(Z.length-p,p)}while(Z.length<p){Z=Y+Z}return Z}function W(){T="";var X=Q.option.data.split(",");for(var p=0;p<X.length;p++){switch(X[p]){case"y":T+="y\u5e74";break;case"m":T+="m\u6708";break;case"d":T+="d\u65e5 ";break;case"h":T+=" h\u65f6";break;case"t":T+="t\u5206";break;case"s":T+="s\u79d2";break}}T=T.replace("  "," ");switch(Q.option.format){case"normal":T=T.replace("\u5e74","-").replace("\u6708","-").replace("\u65e5","").replace("\u65f6",":").replace("\u5206",":").replace("\u79d2","");break;case"unix":T=T.replace("\u5e74","/").replace("\u6708","/").replace("\u65e5","").replace("\u65f6",":").replace("\u5206",":").replace("\u79d2","");break}if(T.substr(T.length-1,1)=="-"||T.substr(T.length-1,1)=="/"||T.substr(T.length-1,1)==":"){T=T.substr(0,T.length-1)
}T=a(T)}function a(p){return(p+"").replace(/^\s*|\s*$/g,"")}function H(ae){var aa=new Date(ae.getFullYear(),ae.getMonth(),1);aa.setDate(1);var ab=aa.getDay()-1;if(ab<0){ab=6}aa.setDate(1);aa.setDate(aa.getDate()-ab-1);var ac=Math.ceil((ab+(k(ae.getFullYear(),ae.getMonth())))/7)*7;var p=new Array();for(var Y=0;Y<ac;Y++){aa.setDate(aa.getDate()+1);if(aa>=h&&aa<=t){p.push([aa.getMonth(),aa.getDate()])}else{if(aa.getDate()==h.getDate()&&aa.getMonth()==h.getMonth()){p.push([aa.getMonth(),aa.getDate()])}else{p.push(["","\u00d7"])}}}var X='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';for(var Y=0;Y<c.length;Y++){X+="<th>"+c.substr(Y,1)+"</th>"}X+="</tr><tr>";var ad=new Date();for(var Y=0;Y<p.length;Y++){var Z="";if(p[Y][0]==Q.nowSelectedDate.getMonth()&&p[Y][1]==Q.nowSelectedDate.getDate()){Z='class="selectedtd"'}else{if(p[Y][0]==I.getMonth()&&p[Y][1]==I.getDate()){Z='class="defaulttd"'}else{if(p[Y][0]==ad.getMonth()&&p[Y][1]==ad.getDate()){Z='class="todaytd"'}else{if(p[Y][0]!=ae.getMonth()){Z='class="othermonth"'}}}}X+="<td "+Z+'><span rel="'+p[Y][0]+'">'+p[Y][1]+"</span></td>";if(Y%7==6){X+="</tr><tr>"}}X+="</tr></table>";return X}function k(p,X){var Y=new Date(p,X,1);Y.setMonth(Y.getMonth()+1);Y.setDate(0);return Y.getDate()}function l(X){var ab=J.split(",");var p='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';var Y=new Date();for(var aa=0;aa<ab.length;aa++){var Z="";if(aa==Q.nowSelectedDate.getMonth()){Z='class="selectedtd"'}else{if(aa==I.getMonth()){Z='class="defaulttd"'}else{if(aa==Y.getMonth()){Z='class="todaytd"'}}}p+='<td width="25%" '+Z+'><span rel="'+aa+'">'+ab[aa]+"</span></td>";if(aa%3==2){p+="</tr><tr>"}}p+="</tr></table>";return p}function g(p){var Y=a(p);Y=Y.split(" ")[0];Y=Y.split("-");try{return new Date(parseInt(Y[0]),parseInt(Y[1])-1,parseInt(Y[2]))}catch(X){return null}}function P(p){return new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds())}function d(aa,Y){if(!aa){aa=new Date().getFullYear()}if(!Y){Y=13}var ac=aa-Y;if(ac<h.getFullYear()){ac=h.getFullYear()}var ae=t.getFullYear();var p=new Array();for(var Z=0;Z<24;Z++){if(ae&&(ac+Z)>ae){p.push("\u00d7")}else{p.push((ac+Z)+"")}}var X='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';var ad=new Date();for(var Z=0;Z<p.length;Z++){var ab="";if(p[Z]==Q.nowSelectedDate.getFullYear()){if(p[Z]==I.getFullYear()){ab='class="selectedtd defaulttd"'}else{ab='class="selectedtd"'}}else{if(p[Z]==I.getFullYear()){ab='class="defaulttd"'}else{if(p[Z]==ad.getFullYear()){ab='class="todaytd"'}}}X+='<td width="25%" '+ab+"><span>"+p[Z]+"</span></td>";if(Z%4==3){X+="</tr><tr>"}}X+="</tr></table>";return X}var y='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td><span>+</span></td><td width="6">&nbsp;</td><td><span>+</span></td><td width="6">&nbsp;</td><td><span>+</span></td></tr><tr><td><p id="select_hours"></p></td><td>:</td><td><p id="select_minutes"></p></td><td>:</td><td><p id="select_seconds"></p></td></tr><tr><td><span>-</span></td><td>&nbsp;</td><td><span>-</span></td><td>&nbsp;</td><td><span>-</span></td></tr></table>';function V(ab,aa,p){var Y='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';var X=0;var Z=0;while(X<aa){Y+="<td><span>"+X+"</span></td>";if(Z%p==(p-1)){Y+="</tr><tr>"}Z++;X+=ab}Y+="</tr></table>";return Y}}function DateSelector(){var r=this;var A;var y;var e;var n;var c;var l="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5";var v=[];this.selectedDate={};this.option={field:["1900-1-1","2999-11-30"],format:"normal",width:600,height:400,readonly:false};var j;var m;var x;var q;var k;var B=false;var s;this.install=function(p,G){k=p;var I=k.val()+"";I=I.split(",");for(var F=0;F<I.length;F++){I[F]?r.selectedDate[t(I[F])]=I[F]:null}$.extend(r.option,G);$(".fm_dateSelector").each(function(){try{var K=$(this).data("object");if(typeof K=="function"){K.destroy();K=null}}catch(J){}});q=r.option.zindex?r.option.zindex:ZINDEX.messager;j=C(r.option.field[0],true);m=C(r.option.field[1],false);A=$('<div class="fm_dateSelector"></div>');A.css({overflow:"hidden",position:"fixed",width:u(r.option.width,$(window).width())+"px",height:u(r.option.height,$(window).height())+"px","z-index":999999});$("body").append(A);A.centerInWindow();e=$('<table width="100%" border="0" cellspacing="0" cellpadding="0"></table>');n=$('<div class="calander_title"><a class="prev"><</a><span></span><a class="next">></a></div>');c=$('<div class="canbutbox  relpos"></div>');if(r.option.readonly){c.html('<div style="text-align:center"><a class="but-normal but-green"  id="can_close"><i class="fa fa-remove"/>\u5173\u95ed</a></div>')}else{c.html('<i class="fa fa-exchange typeswitch" title="\u8fde\u7eed\u9009\u62e9"/><div class="but-group"><a class="but-normal but-red" id="can_confirm"><i class="fa fa-check"/>\u786e\u5b9a</a><a class="but-normal but-orange" id="can_clear"><i class="fa fa-refresh"/>\u6e05\u9664</a><a class="but-normal but-green"  id="can_close"><i class="fa fa-remove"/>\u5173\u95ed</a></div>')
}A.append(n).append(e).append(c);for(var F=0;F<7;F++){var H="<tr>";for(var E=0;E<7;E++){H+=(F==0)?'<th width="14.28%">'+l.substr(E,1)+"</th>":"<td>"+(F+E)+"</td>"}H+="</tr>";e.append($(H))}x=$.lockMask(q-1,null,"dateSelectorMask");y=new Date();D(y);n.find(">a").bind("click",b);e.find("tr:eq(0) th:gt(4)").addClass("calander_weekend");if(!r.option.readonly){e.find("tr >td").bind("click",o);c.find(".typeswitch").bind("click",a)}c.find("a").bind("click",h);r.resize()};function a(){if($(this).hasClass("nowid")){$(this).removeClass("nowid");B=false;s=null;e.find("td.selectStart").removeClass("selectStart")}else{$(this).addClass("nowid");B=true}}function t(p){return p.replace(/\-0/g,"-")}function u(p,E){p=Math.abs(p);if(p<1){return Math.floor(E*p)}else{return p}}function h(){switch($(this).attr("id")){case"can_close":r.destroy();break;case"can_clear":r.selectedDate={};D(y);break;case"can_confirm":z();r.destroy();break}}function z(){var E="";for(var p in r.selectedDate){E+=(r.selectedDate[p]?r.selectedDate[p]+",":"")}if(E.length>0){E=E.substr(0,E.length-1)}k.changeValue(E)}function o(){var E=$(this);if(E.hasClass("disabled")){if(E.hasClass("checked")){var F=E.attr("id");if(r.selectedDate[F]){delete r.selectedDate[F]}E.removeClass("checked")}return}var F=E.attr("id");if(B){if(!s){E.addClass("selectStart");s=E.attr("id");return}var p=E.attr("id");w(s,p);s=null;e.find("td.selectStart").removeClass("selectStart");return}if(E.hasClass("checked")){if(r.selectedDate[F]){delete r.selectedDate[F]}E.removeClass("checked");return}E.addClass("checked");r.selectedDate[F]=f(E.data("y"),E.data("m"),E.data("d"))}function w(G,N){var J=dateDiff("d",G,N);var I=J>0?-1:1;var K=0;var H=getDateFromStr(G);J-=I;while(J!=0){var p=H.getDate();var L=H.getMonth()+1;var F=H.getFullYear();var E=F+"-"+L+"-"+p;r.selectedDate[E]=f(F,L,p);H.setDate(H.getDate()-I);J+=I}g()}function f(F,G,E){var p="";if(r.option.force2){p=F+(r.option.format=="chinese"?"\u5e74":r.option.format=="unix"?"/":"-")+formatTo2(G)+(r.option.format=="chinese"?"\u6708":r.option.format=="unix"?"/":"-")+formatTo2(E)+(r.option.format=="chinese"?"\u65e5":"")}else{p=F+(r.option.format=="chinese"?"\u5e74":r.option.format=="unix"?"/":"-")+G+(r.option.format=="chinese"?"\u6708":r.option.format=="unix"?"/":"-")+E+(r.option.format=="chinese"?"\u65e5":"")}return p}function C(p,E){var F;if(p){if(typeof p=="string"){F=getDateFromStr(p)}else{if(typeof p=="object"){F=new Date();p.y?F.setYear(F.getFullYear()+parseInt(p.y)||0):null;p.m?F.setMonth(F.getMonth()+parseInt(p.m)||0):null;p.d?F.setDate(F.getDate()+parseInt(p.d)||0):null}}}else{if(p==0){F=new Date()}else{if(E){F=new Date(1900,0,1)}else{F=new Date(3000,0,1)}}}return F}function d(p){p=p.replace(/_/g,"-");var E=getDateFromStr(p);if(E>m||E<j){return false}return true}function b(){if($(this).hasClass("prev")){y.setMonth(y.getMonth()-1)}else{if($(this).hasClass("next")){y.setMonth(y.getMonth()+1)}}D(y)}function D(U){var P=new Date();var J=P.getMonth();var Q=P.getDate();var S=P.getFullYear();var H=U.getMonth();var R=U.getFullYear();var N=new Date(R,H,1);N.setDate(1);n.find(">span").text(R+"\u5e74 "+(H+1)+"\u6708");e.find("td").removeClass("calander_otherMonth").removeClass("calander_today");var L=N.getDay()-1;if(L<0){L=6}N.setDate(1);N.setDate(N.getDate()-L-1);var K=42;for(var G=0;G<K;G++){N.setDate(N.getDate()+1);var p=N.getDate();var O=N.getMonth()+1;var E=N.getFullYear();var T=Math.floor(G/7)+1;var F=G%7;var I=e.find("tr:eq("+T+") td:eq("+F+")");I.html("<span>"+p+"</span>");I.data({y:E,m:O,d:p,id:E+"-"+O+"-"+p});I.attr("id",E+"-"+O+"-"+p);if(H!=O){I.addClass("calander_otherMonth")}if(S==E&&J==(O-1)&&Q==p){I.addClass("calander_today")}if(N<j||N>=m){I.addClass("disabled")}else{if(getDateStingForce2(N)==getDateStingForce2(m)){I.addClass("disabled")}else{I.removeClass("disabled")}}}g()}function g(){e.find("tr:gt(0) td").each(function(){var p=$(this);var E=p.data("id");if(r.selectedDate[E]){p.addClass("checked")}else{p.removeClass("checked")}})}this.destroy=function(){$(r).unbind();$(window).unbind("resize",r.resize);if(x){$.clearMask("dateSelectorMask");x=null}if(A){A.del();A=null}};this.resize=function(){if(!A){r.destroy()}A.centerInWindow();var E=A.height();dateH=E-n.outerHeight(true)-e.find("tr:eq(0)").outerHeight()-c.outerHeight();var p=Math.floor(dateH/6);e.find("tr:gt(0) td").setRealSize(null,p);$(window).one("resize",r.resize)}}(function(b){b.fn.DatePartPicker=function(){b(this).each(a)};function a(){b(this).data("type","dateinput");b(this).bind("click",function(){if(b(this).attr("disabled")==true||b(this).hasClass("readonly")){return}var c=b(this).dataOptions();var d=new MdateTimePartSelector();d.install(b(this),c)})}})(jQuery);function MdateTimePartSelector(){var b=this;this.option={format:"normal",data:"y,m,d",fast:"td,ld,lw,tw,lm,tm,ls,ts,ly,ty",force2:true,split:"\u81f3",field:["1900-1-1","2999-11-30"]};this.input;this.ID="dpartpicker_"+Math.floor(Math.random()*10000);var h;this.nowSelectedDate;var a;var d;var o;var r;this.install=function(u,t){b.input=$(u);
if(t){$.extend(b.option,t)}$(".dateTimePicker").remove();var p=trim(b.input.val());h=$('<div class="dateTimePicker timePartPicker" id="'+b.ID+'"><table><tr><td valign="top" width="200"><div class="selectPanal start"></div></td><td width="30" valign="top" align="center"><h3>'+b.option.split+'</h3></td><td valign="top" width="200"><div class="selectPanal end"></div></td></tr></table></div>');h.css({visibility:"hidden"});$("body").append(h);h.css({"min-width":(u.outerWidth()-7)+"px"});if(document.all){h.prepend($('<div class="relpos" style="z-index:-1"><iframe width="210" height="200" frameborder="none"></iframe></div>'));h.find("iframe").show()}h.prepend($('<div class="smallClosebut"><div></div></div>'));o=new MdateTimePart(h.find("div.start"));r=new MdateTimePart(h.find("div.end"));p=p.split(b.option.split);if(p.length!=2){var s=new Date();var v=new Date();v.setDate(s.getDate()-1);p[0]=v;p[1]=s}o.install(b.option,p[0]);r.install(b.option,p[1]);u.unbind("mousemove").bind("mousemove",e);h.unbind().bind("mouseenter",j).bind("mouseleave",k).bind("mousedown",e);h.bind("mousemove",e).bind("mousewheel",e);$(document).unbind("mousemove",k).one("mousemove",k).one("mousedown",b.destroy);h.css({visibility:"inherit"});$(window).bind("resize",n).bind("scroll",n).bind("mousewheel",b.destroy);if(b.option.fast){h.append($('<div class="PartButsPanal">'+((b.option.fast.indexOf("td")>-1)?'<span id="picker_parttoday">\u4eca\u5929</span>':"")+((b.option.fast.indexOf("ld")>-1)?'<span id="picker_partyestoday">\u6628\u5929</span>':"")+((b.option.fast.indexOf("lw")>-1)?'<span id="picker_partlastweek">\u4e0a\u5468</span>':"")+((b.option.fast.indexOf("tw")>-1)?'<span id="picker_partweek">\u672c\u5468</span>':"")+((b.option.fast.indexOf("lm")>-1)?'<span id="picker_partlastmonth">\u4e0a\u6708</span>':"")+((b.option.fast.indexOf("tm")>-1)?'<span id="picker_partmonth">\u672c\u6708</span>':"")+((b.option.fast.indexOf("ls")>-1)?'<span id="picker_partlastseason">\u4e0a\u5b63</span>':"")+((b.option.fast.indexOf("ts")>-1)?'<span id="picker_partseason">\u672c\u5b63</span>':"")+((b.option.fast.indexOf("ly")>-1)?'<span id="picker_partlastyear">\u53bb\u5e74</span>':"")+((b.option.fast.indexOf("ty")>-1)?'<span id="picker_partyear">\u672c\u5e74</span>':"")+"</div>"))}h.append($('<div class="DateButsPanal"><span id="picker_cleardate">\u6e05\u7a7a</span><span id="picker_confirmdate">\u786e\u5b9a</span><span id="picker_closedate">\u5173\u95ed</span></div>'));h.find(".DateButsPanal span,.PartButsPanal span").bind("click",m);h.find(".smallClosebut div").unbind().bind("click",b.destroy);n()};function g(p,s){if(s){p.setHours(0);p.setMinutes(0);p.setSeconds(0)}else{p.setHours(23);p.setMinutes(59);p.setSeconds(59)}return p}function m(){var w=$(this).attr("id");switch(w){case"picker_parttoday":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);o.setDateTime(v);r.setDateTime(p);break;case"picker_partyestoday":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(v.getDate()-1);p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_partlastweek":var t=new Date();t.setDate(t.getDate()-7);var v=f(t);var p=q(t);v=g(v,true);p=g(p,false);o.setDateTime(v);r.setDateTime(p);break;case"picker_partweek":var t=new Date();var v=f(t);var p=q(t);v=g(v,true);p=g(p,false);o.setDateTime(v);r.setDateTime(p);break;case"picker_partlastmonth":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(1);p.setDate(1);v.setMonth(v.getMonth()-1);p.setMonth(v.getMonth()+1);p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_partmonth":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(1);p.setDate(1);v.setMonth(v.getMonth());p.setMonth(v.getMonth()+1);p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_partlastseason":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(1);p.setDate(1);var s=l(v.getMonth());v.setMonth(s-3);p.setMonth(s);p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_partseason":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(1);p.setDate(1);var s=l(v.getMonth());v.setMonth(s);p.setMonth(s+3);p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_partyear":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(1);p.setDate(1);v.setMonth(0);p.setMonth(0);v.setYear(v.getFullYear());p.setYear(v.getFullYear()+1);p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_partlastyear":var v=new Date();var p=new Date();v=g(v,true);p=g(p,false);v.setDate(1);p.setDate(1);v.setMonth(0);p.setMonth(0);v.setYear(v.getFullYear()-1);p.setYear(p.getFullYear());p.setDate(p.getDate()-1);o.setDateTime(v);r.setDateTime(p);break;case"picker_closedate":b.destroy();break;case"picker_confirmdate":c();break;case"picker_cleardate":b.input.val("");try{ev=document.createEvent("HTMLEvents");ev.initEvent("change",false,true);b.input.get(0).dispatchEvent(ev)}catch(u){if(document.all){b.input.get(0).fireEvent("onchange")
}}b.destroy();break}}function l(p){var s=0;if(p<3){s=0}if(2<p&&p<6){s=3}if(5<p&&p<9){s=6}if(p>8){s=9}return s}function f(t){var w=t.getDay();var s=t.getDate();var v=t.getMonth();var u=t.getFullYear();var p=new Date(u,v,s-w);return p}function q(t){var w=t.getDay();var s=t.getDate();var v=t.getMonth();var u=t.getFullYear();var p=new Date(u,v,s+(6-w));return p}function c(){var s="";var p=o.getSelectDate();var u=r.getSelectDate();if(p>u){s=r.getSelectDateStr()+b.option.split+o.getSelectDateStr()}else{s=o.getSelectDateStr()+b.option.split+r.getSelectDateStr()}b.input.val(s);try{ev=document.createEvent("HTMLEvents");ev.initEvent("change",false,true);b.input.get(0).dispatchEvent(ev)}catch(t){if(document.all){b.input.get(0).fireEvent("onchange")}}b.destroy()}function e(p){p.stopPropagation()}function j(){if(d){clearTimeout(d);d=null}}function k(){j();d=setTimeout(function(){h.fadeOut("normal",b.destroy)},3000)}function n(){if(h){var t=b.input.offset();h.css({left:"0px",top:"0px"});var s={top:t.top-$(window).scrollTop(),left:t.left-$(window).scrollLeft()};var p={top:$(window).height()-h.outerHeight(true)-10,left:$(window).width()-h.outerWidth(true)-15};t.top=(s.top<p.top)?s.top:p.top;t.left=(s.left<p.left)?s.left:p.left;t.top+=$(window).scrollTop();t.left+=$(window).scrollLeft();h.css({left:Math.floor(t.left)+"px",top:Math.floor(t.top)+"px"})}else{b.destroy()}}this.destroy=function(){$(window).unbind("resize",n).unbind("scroll",n);$(document).unbind("mousemove",k);j();if(h){h.del();h=null}b.ID=null}}function MdateTimePart(G){this.option={format:"normal",data:"y,m,d",force2:true,field:["1900-1-1","2999-11-30"]};this.input;this.ID="dpartpicker_"+Math.floor(Math.random()*10000);this.PICKER;this.nowSelectedDate;var C;var q=["dateSelectPanal","monthSelectPanal","yearSelectPanal","timeSelectPanal"];var M;var c="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5";var E="\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708";var h;var r;var b;var L=this;this.getSelectDate=function(){return L.nowSelectedDate};this.getSelectDateStr=function(){return J(L.nowSelectedDate)};this.install=function(Q,p){if(Q){$.extend(L.option,Q)}P();h=I(L.option.field[0],true);r=I(L.option.field[1],false);L.PICKER=$('<div class="mulitselectorBox"><div class="selectorPanal"></div></div>');G.append(L.PICKER);L.nowSelectedDate=(typeof p=="string")?t(p):new Date(p);if(!L.nowSelectedDate||!L.nowSelectedDate.getFullYear()){L.nowSelectedDate=new Date()}if(L.nowSelectedDate>r){L.nowSelectedDate=K(r)}else{if(L.nowSelectedDate<h){L.nowSelectedDate=K(h)}}C=K(L.nowSelectedDate);b=K(L.nowSelectedDate);m(b);A(b)};function I(p,Q){if(p){if(typeof p=="string"){return g(p)}else{if(typeof p=="object"){var R=new Date();p.y?R.setYear(R.getFullYear()+parseInt(p.y)||0):null;p.m?R.setMonth(R.getMonth()+parseInt(p.m)||0):null;p.d?R.setDate(R.getDate()+parseInt(p.d)||0):null;p.h?R.setHours(R.getHours()+parseInt(p.h)||0):null;p.t?R.setMinutes(R.getMinutes()+parseInt(p.t)||0):null;p.s?R.setSeconds(R.getSeconds()+parseInt(p.s)||0):null;return R}}}else{if(p==0){return new Date()}}if(Q){return new Date(1900,0,1)}else{return new Date(3000,0,1)}}function m(V){var Y=$('<div class="selectedDateContainer"></div>');var W=$('<div class="selectedTimeContainer"></div>');if(L.option.data.indexOf("h")>-1||L.option.data.indexOf("t")>-1||L.option.data.indexOf("s")>-1){L.PICKER.prepend(W).find(".selectorPanal").append($('<div id="timeSelectPanal">'+u+"</div>"));var p=L.PICKER.find("#timeSelectPanal tr:eq(0)").find("td").length;var S=$('<tr class="hd"><td colspan="'+p+'" id="timeAddPannal"></td></div>');L.PICKER.find("#timeSelectPanal tr:last").before(S)}if(L.option.data.indexOf("y")>-1||L.option.data.indexOf("m")>-1||L.option.data.indexOf("d")>-1){L.PICKER.prepend(Y)}for(var R=0;R<L.option.data.length;R++){switch(L.option.data.substr(R,1)){case"y":Y.append('<span id="selected_year"></span>');var X=$('<div id="yearSelectPanal"></div>');L.PICKER.find(".selectorPanal").append(X);break;case"m":Y.append('<span id="selected_month"></span>');var U=$('<div id="monthSelectPanal"></div>');L.PICKER.find(".selectorPanal").append(U);break;case"d":Y.append('<span id="selected_date"></span>');var T=$('<div id="dateSelectPanal"></div>');L.PICKER.find(".selectorPanal").append(T);break;case"h":W.append('<span id="selected_hours"></span>');L.PICKER.find("#timeSelectPanal tr").find("td:eq(0)").addClass("toremove").find("span").attr("rel","hours");break;case"t":W.append('<span id="selected_minutes"></span>');L.PICKER.find("#timeSelectPanal tr").find("td:eq(1) ,  td:eq(2) ").addClass("toremove").find("span").attr("rel","minutes");break;case"s":W.append('<span id="selected_seconds"></span>');L.PICKER.find("#timeSelectPanal tr").find("td:eq(3),td:eq(4)").addClass("toremove").find("span").attr("rel","seconds");break}}if(L.option.data.indexOf("d")>-1){L.PICKER.find("#dateSelectPanal").before($('<div class="chgDatePagebut" id="dateChangeBut"><span class="pre"></span> <span></span></div>'))
}if(L.option.data.indexOf("y")>-1){L.PICKER.find("#yearSelectPanal").before($('<div class="chgDatePagebut" id="yearChangeBut"><span class="pre"></span> <span></span></div>'))}if(L.PICKER.find("#timeSelectPanal tr:eq(1) td:eq(0)").html()==":"){L.PICKER.find("#timeSelectPanal tr").find("td:eq(0)").remove()}L.PICKER.find("#timeSelectPanal tr td").each(function(){if(!$(this).hasClass("toremove")){$(this).remove()}else{$(this).removeClass("toremove")}});for(var Q=0;Q<q.length;Q++){if(L.PICKER.find(".selectorPanal #"+q[Q]).length>0){L.PICKER.find(".selectorPanal #"+q[Q]).show();break}}L.setPickerPannal(V);if(L.option.data.indexOf("h")>-1){S.find("td#timeAddPannal").append($('<div id="hourSelectPanal" class="hd">'+O(1,24,8)+"</div>"))}if(L.option.data.indexOf("t")>-1){S.find("td#timeAddPannal").append($('<div id="minuteSelectPanal" class="hd">'+O(5,60,6)+"</div>"))}if(L.option.data.indexOf("s")>-1){S.find("td#timeAddPannal").append($('<div id="secondSelectPanal" class="hd">'+O(5,60,6)+"</div>"))}L.PICKER.find(".chgDatePagebut span").unbind().bind("click",w);x();L.PICKER.find("#timeSelectPanal td span").unbind().bind("click",N);L.PICKER.find("#timeSelectPanal td p").unbind().bind("click",H);L.PICKER.find(".selectorPanal>div[class=chgDatePagebut]").hide();L.PICKER.find(".selectorPanal>div[class!=chgDatePagebut]").hide().css({"background-color":"#fff"});if(L.option.data.indexOf("d")>-1){n=L.PICKER.find("#dateSelectPanal,.chgDatePagebut[id=dateChangeBut]")}else{switch(L.option.data.replace(/,/g,"").substr(L.option.data.replace(/,/g,"").length-1,1)){case"s":case"t":case"h":n=L.PICKER.find("#timeSelectPanal");break;case"d":n=L.PICKER.find("#dateSelectPanal,.chgDatePagebut[id=dateChangeBut]");break;case"m":n=L.PICKER.find("#monthSelectPanal");break;case"y":n=L.PICKER.find("#yearSelectPanal,.chgDatePagebut[id=yearChangeBut]");break}}n.show()}function H(){var T=$(this).attr("id");var S=$(this);if(S.hasClass("onshow")){j();return}L.PICKER.find("#timeSelectPanal .onshow").removeClass("onshow");var p;var R=function(){var U=$(this).find("span").html();p(U);S.html(y(U+"",2,"0"));if(L.nowSelectedDate<h||L.nowSelectedDate>r){S.addClass("disabled")}else{S.removeClass("disabled")}L.nowSelectedDate=(L.nowSelectedDate<h)?K(h):L.nowSelectedDate;L.nowSelectedDate=(L.nowSelectedDate>r)?K(r):L.nowSelectedDate;A(L.nowSelectedDate);Q.slideUp("fast",function(){Q.parent().parent().hide()});S.removeClass("onshow")};var Q;switch(T){case"select_hours":Q=L.PICKER.find("#hourSelectPanal");p=function(U){L.nowSelectedDate.setHours(U)};break;case"select_minutes":Q=L.PICKER.find("#minuteSelectPanal");p=function(U){L.nowSelectedDate.setMinutes(U)};break;case"select_seconds":Q=L.PICKER.find("#secondSelectPanal");p=function(U){L.nowSelectedDate.setSeconds(U)};break}Q.parent().parent().show().find("div").hide();Q.slideDown("fast").find("td").unbind().bind("click",R);S.addClass("onshow")}function j(){L.PICKER.find("#timeSelectPanal .onshow").removeClass("onshow");L.PICKER.find("#timeAddPannal").parent().hide()}function N(){var p=0;if($(this).html()=="+"){p=1}else{if($(this).html()=="-"){p=-1}else{return}}var Q=$(this).attr("rel");s(Q,p)}function s(S,p){var R="";var T=0;var Q=0;var U;switch(S){case"hours":R=L.PICKER.find("#timeSelectPanal  #select_hours");Q=24;U=function(V){L.nowSelectedDate.setHours(V)};break;case"minutes":R=L.PICKER.find("#timeSelectPanal  #select_minutes");Q=60;U=function(V){L.nowSelectedDate.setMinutes(V)};break;case"seconds":R=L.PICKER.find("#timeSelectPanal  #select_seconds");U=function(V){L.nowSelectedDate.setSeconds(V)};Q=60;break}T=parseInt(R.html());T+=p;if(T>=Q){T=0}else{if(T<0){T=Q-1}}R.html(y(T,2,"0"));U(T);if(L.nowSelectedDate<h||L.nowSelectedDate>r){R.addClass("disabled")}else{R.removeClass("disabled")}L.nowSelectedDate=(L.nowSelectedDate<h)?K(h):L.nowSelectedDate;L.nowSelectedDate=(L.nowSelectedDate>r)?K(r):L.nowSelectedDate;A(L.nowSelectedDate)}function x(){L.PICKER.find("#yearSelectPanal tr td").unbind().bind("click",B);L.PICKER.find("#monthSelectPanal tr td").unbind().bind("click",e);L.PICKER.find("#dateSelectPanal tr td").unbind().bind("click",F);L.PICKER.find(".selectedDateContainer span,.selectedTimeContainer span").unbind().bind("click",v)}var n;var o;function v(){var p=$(this).attr("id");z(p)}function z(p){if(o==p||(("selected_hours selected_minutes selected_seconds").indexOf(p)>-1&&("selected_hours selected_minutes selected_seconds").indexOf(o)>-1)){return}o=p;if(n){n.slideUp("fast")}switch(p){case"selected_hours":case"selected_minutes":case"selected_seconds":n=L.PICKER.find("#timeSelectPanal");break;case"selected_year":n=L.PICKER.find("#yearSelectPanal,.chgDatePagebut[id=yearChangeBut]");break;case"selected_month":n=L.PICKER.find("#monthSelectPanal");break;case"selected_date":n=L.PICKER.find("#dateSelectPanal,.chgDatePagebut[id=dateChangeBut]");break}if(document.all){n.slideDown("fast",function(){n.css({overflow:"visible"})})}else{n.slideDown("fast")}}function B(){var p=parseInt($(this).find("span").html());if(!p){return
}L.PICKER.find("#yearSelectPanal tr td.selectedtd").removeClass("selectedtd");$(this).addClass("selectedtd");L.nowSelectedDate.setYear(p);L.setDateTime();if(L.option.data.substr(L.option.data.length-1,1)=="y"){return}else{if(L.option.data.indexOf("m")>-1){z("selected_month")}}L.PICKER.find("#monthSelectPanal").html(l(L.nowSelectedDate));L.PICKER.find("#dateSelectPanal").html(D(new Date(L.nowSelectedDate.getFullYear(),L.nowSelectedDate.getMonth(),L.nowSelectedDate.getDate())));x()}function e(){L.PICKER.find("#monthSelectPanal tr td.selectedtd").removeClass("selectedtd");$(this).addClass("selectedtd");var p=parseInt($(this).find("span").attr("rel"));L.nowSelectedDate.setMonth(p);L.setDateTime();if(L.option.data.substr(L.option.data.length-1,1)=="m"){return}else{if(L.option.data.indexOf("d")>-1){z("selected_date")}}L.PICKER.find("#monthSelectPanal").html(l(L.nowSelectedDate));L.PICKER.find("#dateSelectPanal").html(D(new Date(L.nowSelectedDate.getFullYear(),L.nowSelectedDate.getMonth(),L.nowSelectedDate.getDate())));x()}function F(){var Q=parseInt($(this).find("span").html());var p=parseInt($(this).find("span").attr("rel"));if(!Q||(!p&&p!==0)){return}L.nowSelectedDate.setMonth(p);L.nowSelectedDate.setDate(Q);L.setDateTime();if(L.option.data.substr(L.option.data.length-1,1)=="d"){return}else{if(L.option.data.indexOf("h")>-1||L.option.data.indexOf("t")>-1||L.option.data.indexOf("s")>-1){z("selected_hours")}}L.PICKER.find("#monthSelectPanal").html(l(L.nowSelectedDate));L.PICKER.find("#dateSelectPanal").html(D(new Date(L.nowSelectedDate.getFullYear(),L.nowSelectedDate.getMonth(),L.nowSelectedDate.getDate())));x()}this.setDateTime=function(p){L.nowSelectedDate=p?p:L.nowSelectedDate;if(L.nowSelectedDate>r){L.nowSelectedDate=K(r)}else{if(L.nowSelectedDate<h){L.nowSelectedDate=K(h)}}L.nowSelectedDate=(L.nowSelectedDate<h)?K(h):L.nowSelectedDate;L.nowSelectedDate=(L.nowSelectedDate>r)?K(r):L.nowSelectedDate;A(L.nowSelectedDate);L.setPickerPannal(L.nowSelectedDate)};function w(){var p=$(this).parent().attr("id");if(p=="yearChangeBut"){if($(this).hasClass("pre")){if(b.getFullYear()<(h.getFullYear())){return}b.setYear(b.getFullYear()-24);if(b.getFullYear()<(h.getFullYear()+13)){b.setYear(h.getFullYear()+13)}}else{if(b.getFullYear()>=(r.getFullYear()-10)){return}b.setYear(b.getFullYear()+24);if(b.getFullYear()>=(r.getFullYear()-10)){b.setYear(r.getFullYear()-10)}}L.PICKER.find("#yearSelectPanal").html(d(b.getFullYear()))}else{if(p=="dateChangeBut"){var Q=L.nowSelectedDate.getDate();L.nowSelectedDate.setDate(1);if($(this).hasClass("pre")){L.nowSelectedDate.setMonth(L.nowSelectedDate.getMonth()-1)}else{L.nowSelectedDate.setMonth(L.nowSelectedDate.getMonth()+1)}var R=k(L.nowSelectedDate.getYear(),L.nowSelectedDate.getMonth());if(R<Q){Q=R}L.nowSelectedDate.setDate(Q);L.nowSelectedDate.setYear(L.nowSelectedDate.getFullYear());if(L.nowSelectedDate<h){L.nowSelectedDate=K(h)}else{if(L.nowSelectedDate>r){L.nowSelectedDate=K(r)}}L.setPickerPannal(L.nowSelectedDate);L.nowSelectedDate=(L.nowSelectedDate<h)?K(h):L.nowSelectedDate;L.nowSelectedDate=(L.nowSelectedDate>r)?K(r):L.nowSelectedDate;A(L.nowSelectedDate)}}x()}L.setPickerPannal=function(p){for(var Q=0;Q<L.option.data.length;Q++){switch(L.option.data.substr(Q,1)){case"y":L.PICKER.find("#yearSelectPanal").html(d(p.getFullYear()));break;case"m":L.PICKER.find("#monthSelectPanal").html(l(p));break;case"d":L.PICKER.find("#dateSelectPanal").html(D(new Date(L.nowSelectedDate.getFullYear(),p.getMonth(),L.nowSelectedDate.getDate())));break;case"h":L.PICKER.find("#timeSelectPanal #select_hours").html(y(p.getHours()+"",2,"0"));break;case"t":L.PICKER.find("#timeSelectPanal #select_minutes").html(y(p.getMinutes()+"",2,"0"));break;case"s":L.PICKER.find("#timeSelectPanal #select_seconds").html(y(p.getSeconds()+"",2,"0"));break}}x()};function A(p){L.PICKER.find("#selected_year").html(p.getFullYear()+"\u5e74");L.PICKER.find("#selected_month").html((p.getMonth()+1)+"\u6708");L.PICKER.find("#selected_date").html(p.getDate()+"\u65e5");L.PICKER.find("#selected_hours").html(y(p.getHours(),2,"0")+"\u65f6");L.PICKER.find("#selected_minutes").html(y(p.getMinutes(),2,"0")+"\u5206");L.PICKER.find("#selected_seconds").html(y(p.getSeconds(),2,"0")+"\u79d2")}function t(U){if(!U||U==""){return null}var T={y:2000,m:1,d:1,h:0,t:0,s:0};var p=a(U).replace("\u5e74","-").replace("\u6708","-").replace("\u65e5","-").replace("\u65f6",":").replace("\u5206",":").replace("\u79d2","").replace(/\//g,"-");p=p.replace(/:/g,"-").replace(/ /g,"-");while(p.indexOf("--")>-1){p=p.replace("--","-")}p=p.split("-");var S=L.option.data.split(",");for(var Q=0;Q<S.length;Q++){T[S[Q]]=p[Q]?f(p[Q]):0}try{return new Date(T.y,T.m-1,T.d,T.h,T.t,T.s)}catch(R){return null}return null}function f(p){p=p.toString();while(p.indexOf("0")==0&&p.length>1){p=p.substr(1,p.length)}return parseInt(p)}function J(Q){var U=M;var p=L.option.force2?y((Q.getMonth()+1),2,"0"):(Q.getMonth()+1);var V=L.option.force2?y(Q.getDate(),2,"0"):Q.getDate();var T=L.option.force2?y(Q.getHours(),2,"0"):Q.getHours();
var R=L.option.force2?y(Q.getMinutes(),2,"0"):Q.getMinutes();var S=L.option.force2?y(Q.getSeconds(),2,"0"):Q.getSeconds();U=U.replace("y",Q.getFullYear()+"").replace("m",p).replace("d",V).replace("h",T).replace("t",R).replace("s",S);return U}function y(Q,p,R){var S=Q+"";if(S.length>=p){return S.substr(S.length-p,p)}while(S.length<p){S=R+S}return S}function P(){M="";var Q=L.option.data.split(",");for(var p=0;p<Q.length;p++){switch(Q[p]){case"y":M+="y\u5e74";break;case"m":M+="m\u6708";break;case"d":M+="d\u65e5 ";break;case"h":M+=" h\u65f6";break;case"t":M+="t\u5206";break;case"s":M+="s\u79d2";break}}M=M.replace("  "," ");switch(L.option.format){case"normal":M=M.replace("\u5e74","-").replace("\u6708","-").replace("\u65e5","").replace("\u65f6",":").replace("\u5206",":").replace("\u79d2","");break;case"unix":M=M.replace("\u5e74","/").replace("\u6708","/").replace("\u65e5","").replace("\u65f6",":").replace("\u5206",":").replace("\u79d2","");break}if(M.substr(M.length-1,1)=="-"||M.substr(M.length-1,1)=="/"||M.substr(M.length-1,1)==":"){M=M.substr(0,M.length-1)}M=a(M)}function a(p){return(p+"").replace(/^\s*|\s*$/g,"")}function D(X){var T=new Date(X.getFullYear(),X.getMonth(),1);T.setDate(1);var U=T.getDay()-1;if(U<0){U=6}T.setDate(1);T.setDate(T.getDate()-U-1);var V=Math.ceil((U+(k(X.getFullYear(),X.getMonth())))/7)*7;var p=new Array();for(var R=0;R<V;R++){T.setDate(T.getDate()+1);if(T>=h&&T<=r){p.push([T.getMonth(),T.getDate()])}else{if(T.getDate()==h.getDate()&&T.getMonth()==h.getMonth()){p.push([T.getMonth(),T.getDate()])}else{p.push(["","\u00d7"])}}}var Q='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';for(var R=0;R<c.length;R++){Q+="<th>"+c.substr(R,1)+"</th>"}Q+="</tr><tr>";var W=new Date();for(var R=0;R<p.length;R++){var S="";if(p[R][0]==L.nowSelectedDate.getMonth()&&p[R][1]==L.nowSelectedDate.getDate()){S='class="selectedtd"'}else{if(p[R][0]==C.getMonth()&&p[R][1]==C.getDate()){S='class="defaulttd"'}else{if(p[R][0]==W.getMonth()&&p[R][1]==W.getDate()){S='class="todaytd"'}else{if(p[R][0]!=X.getMonth()){S='class="othermonth"'}}}}Q+="<td "+S+'><span rel="'+p[R][0]+'">'+p[R][1]+"</span></td>";if(R%7==6){Q+="</tr><tr>"}}Q+="</tr></table>";return Q}function k(p,Q){var R=new Date(p,Q,1);R.setMonth(R.getMonth()+1);R.setDate(0);return R.getDate()}function l(Q){var U=E.split(",");var p='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';var R=new Date();for(var T=0;T<U.length;T++){var S="";if(T==L.nowSelectedDate.getMonth()){S='class="selectedtd"'}else{if(T==C.getMonth()){S='class="defaulttd"'}else{if(T==R.getMonth()){S='class="todaytd"'}}}p+='<td width="25%" '+S+'><span rel="'+T+'">'+U[T]+"</span></td>";if(T%3==2){p+="</tr><tr>"}}p+="</tr></table>";return p}function g(p){var R=a(p);R=R.split(" ")[0];R=R.split("-");try{return new Date(parseInt(R[0]),parseInt(R[1])-1,parseInt(R[2]))}catch(Q){return null}}function K(p){return new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds())}function d(T,R){if(!T){T=new Date().getFullYear()}if(!R){R=13}var V=T-R;if(V<h.getFullYear()){V=h.getFullYear()}var X=r.getFullYear();var p=new Array();for(var S=0;S<24;S++){if(X&&(V+S)>X){p.push("\u00d7")}else{p.push((V+S)+"")}}var Q='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';var W=new Date();for(var S=0;S<p.length;S++){var U="";if(p[S]==L.nowSelectedDate.getFullYear()){if(p[S]==C.getFullYear()){U='class="selectedtd defaulttd"'}else{U='class="selectedtd"'}}else{if(p[S]==C.getFullYear()){U='class="defaulttd"'}else{if(p[S]==W.getFullYear()){U='class="todaytd"'}}}Q+='<td width="25%" '+U+"><span>"+p[S]+"</span></td>";if(S%4==3){Q+="</tr><tr>"}}Q+="</tr></table>";return Q}var u='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td><span>+</span></td><td width="6">&nbsp;</td><td><span>+</span></td><td width="6">&nbsp;</td><td><span>+</span></td></tr><tr><td><p id="select_hours"></p></td><td>:</td><td><p id="select_minutes"></p></td><td>:</td><td><p id="select_seconds"></p></td></tr><tr><td><span>-</span></td><td>&nbsp;</td><td><span>-</span></td><td>&nbsp;</td><td><span>-</span></td></tr></table>';function O(U,T,p){var R='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';var Q=0;var S=0;while(Q<T){R+="<td><span>"+Q+"</span></td>";if(S%p==(p-1)){R+="</tr><tr>"}S++;Q+=U}R+="</tr></table>";return R}}(function($){$.fn.isEmpty=function(){var va=trim($(this).val());return(va.length<1)?true:false};$.fn.isNumber=function(){var va=trim($(this).val());var reg=new RegExp("^[0-9]*$");var reg2=new RegExp(/^\d+\.{0,1}\d+$/);return(reg.test(va)||reg2.test(va))?true:false};$.fn.isUint=function(){var va=trim($(this).val());var reg=new RegExp("^[0-9]*$");return(reg.test(va))?true:false};$.fn.isInt=function(){var va=trim($(this).val());var reg=new RegExp("^-?[0-9]*$");return(reg.test(va))?true:false};$.fn.isID=function(){var va=trim($(this).val());var isIDCard1=new Object();var isIDCard2=new Object();isIDCard1=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/;
isIDCard2=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/;return(isIDCard1.test(va)||isIDCard2.test(va))?true:false};$.fn.isEmail=function(){var va=trim($(this).val());var emailPat=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;var matchArray=va.match(emailPat);return(matchArray==null)?false:true};$.fn.isQQ=function(){var va=trim($(this).val());var qqPat=/[1-9][0-9]{4,}/;var matchArray=va.match(qqPat);return(matchArray==null)?false:true};$.fn.isPhone=function(){var va=trim($(this).val());return($(this).isTel(va)||$(this).isMobile(va))};$.fn.isTel=function(){var va=trim($(this).val());var isTel=new Object();isTel=/\d{3}-\d{8}|\d{4}-\d{7}/;return(!isTel.test(va))?false:true};$.fn.isMobile=function(){var va=trim($(this).val());var isphoneno=new Object();isphoneno=/^(13[0-9]|14[5|7]|17[0|6|7|8]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|4|5|6|7|8|9])\d{8}$/;return(!isphoneno.test(va))?false:true};$.fn.isUrl=function(){var va=trim($(this).val());var strRegex="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";var re=new RegExp(strRegex);return(!re.test(va))?false:true};$.fn.isMoney=function(){var va=trim($(this).val());var reg=new RegExp(/^\d+(\d|(\.[0-9]{1,2}))$/);return(!reg.test(va))?false:true};$.fn.isPostcode=function(){var va=trim($(this).val());var reg=new RegExp(/^[a-zA-Z0-9 ]{3,12}$/);return(!reg.test(va))?false:true};$.fn.isEnglish=function(){var va=trim($(this).val());return(!/^[A-Za-z]+$/.test(va))?false:true};$.fn.isEnglishNumber=function(){var va=trim($(this).val());return(!/^[A-Za-z0-9]+$/.test(va))?false:true};$.fn.isEnglish_Number=function(){var va=trim($(this).val());va=va.replace(/\_/g,"");return(!/^[A-Za-z0-9]+$/.test(va))?false:true};$.fn.isIP=function(){var va=trim($(this).val());return(!/^\d+\.\d+\.\d+\.\d+/.test(va))?false:true};$.fn.isChinese=function(){var va=trim($(this).val());return(!/^[\u4e00-\u9fa5]/.test(va))?false:true};$.fn.isDate=function(){var va=trim($(this).val());var reg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;var r=value.match(reg);if(r==null){return false}str=value.split(" ")[0];str=str.split("-");try{new Date(parseInt(str[0]),parseInt(str[1])-1,parseInt(str[2]));return true}catch(e){return null}};$.fn.isTime=function(){var reg=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/;var r=value.match(reg);if(r==null){return false}try{str=str.split(":");new Date(2000,1,1,parseInt(str[0]),parseInt(str[1]),parseInt(str[2]));return true}catch(e){return false}};$.fn.isDateTime=function(){var reg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;var r=value.match(reg);if(r==null){return false}try{str=value.split(" ")[0];str=str.split("-");new Date(parseInt(str[0]),parseInt(str[1])-1,parseInt(str[2]));try{str=value.split(" ")[1];str=str.split(":");new Date(2000,1,1,parseInt(str[0]),parseInt(str[1]),parseInt(str[2]))}catch(e){return false}return true}catch(e){return false}};$.fn.isLength=function(){var va=trim($(this).val())+"";var minl=$(this).attr("minlength");var maxl=$(this).attr("maxlength");var nowl=va.length;if(minl&&minl>nowl){return false}if(maxl&&maxl<nowl){return false}return true};$.fn.checkForm=function(addCheck){var container=this;var checkPoints=[{className:"check_email",checkFun:"isEmail",errorType:false,error:"Email\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_int",checkFun:"isInt",errorType:false,error:"\u8bf7\u8f93\u5165\u6574\u6570"},{className:"check_uint",checkFun:"isUint",errorType:false,error:"\u8bf7\u8f93\u5165\u6b63\u6574\u6570"},{className:"check_url",checkFun:"isUrl",errorType:false,error:"\u7f51\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_number",checkFun:"isNumber",errorType:false,error:"\u8bf7\u8f93\u5165\u6570\u5b57"},{className:"check_id",checkFun:"isID",errorType:false,error:"\u8eab\u4efd\u8bc1\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_date",checkFun:"isDate",errorType:false,error:"\u65e5\u671f\u683c\u5f0f\u9519\u8bef"},{className:"check_datetime",checkFun:"isDateTime",errorType:false,error:"\u65e5\u671f\u65f6\u95f4\u683c\u5f0f\u9519\u8bef"},{className:"check_time",checkFun:"isTime",errorType:false,error:"\u65f6\u95f4\u683c\u5f0f\u9519\u8bef"},{className:"check_qq",checkFun:"isQQ",errorType:false,error:"QQ\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_phone",checkFun:"isPhone",errorType:false,error:"\u7535\u8bdd\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_tel",checkFun:"isTel",errorType:false,error:"\u7535\u8bdd/\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_mobile",checkFun:"isMobile",errorType:false,error:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_money",checkFun:"isMoney",errorType:false,error:"\u8bf7\u8f93\u5165\u5e262\u4f4d\u5c0f\u6570\u7684\u6570\u5b57"},{className:"check_postcode",checkFun:"isPostcode",errorType:false,error:"\u90ae\u7f16\u683c\u5f0f\u9519\u8bef"},{className:"check_english",checkFun:"isEnglish",errorType:false,error:"\u8bf7\u8f93\u5165\u82f1\u6587"},{className:"check_englishnum",checkFun:"isEnglishNumber",errorType:false,error:"\u8bf7\u8f93\u5165\u82f1\u6587\u548c\u6570\u5b57"},{className:"check_english_num",checkFun:"isEnglish_Number",errorType:false,error:"\u8bf7\u8f93\u5165\u82f1\u6587\\u6570\u5b57\\u4e0b\u5212\u7ebf"},{className:"check_ip",checkFun:"isIP",errorType:false,error:"IP\u683c\u5f0f\u4e0d\u6b63\u786e"},{className:"check_chinese",checkFun:"isChinese",errorType:false,error:"\u8bf7\u8f93\u5165\u4e2d\u6587"}];
if(!isNull(addCheck)&&typeof addCheck=="object"){checkPoints=checkPoints.concat(addCheck)}var checkrs=true;var ignore=":not(:disabled,.check_neglect,[data-ignore=true])";for(var i=0;i<checkPoints.length;i++){var tocheck="input."+checkPoints[i]["className"]+ignore+",textarea."+checkPoints[i]["className"]+ignore;container.find(tocheck).each(function(){if($(this).val()!=""){var rs;if(typeof checkPoints[i]["checkFun"]=="string"){rs=eval("$(this)."+checkPoints[i]["checkFun"]+"()")}else{if(typeof checkPoints[i]["checkFun"]=="function"){rs=checkPoints[i]["checkFun"]($(this).val())}}if(rs==checkPoints[i]["errorType"]){showerror($(this),checkPoints[i]["error"]);checkrs=false}}})}var tocheck="input.must"+ignore+",textarea.must"+ignore+",input.check_must"+ignore+",textarea.check_must"+ignore;container.find(tocheck).each(function(){if($(this).isEmpty()){showerror($(this),"\u4e0d\u80fd\u4e3a\u7a7a");checkrs=false}});container.find("input.check_length"+ignore+",textarea.check_length"+ignore).each(function(){if($(this).val()&&!$(this).isLength()){var minl=$(this).attr("minlength");var maxl=$(this).attr("maxlength");if(minl&&minl>0&&maxl&&maxl>0){showerror($(this),"\u8f93\u5165\u957f\u5ea6\u5728"+minl+"-"+maxl+"\u4e4b\u95f4(\u542b)")}else{if(minl&&minl>0){showerror($(this),"\u8f93\u5165\u957f\u5ea6\u9700\u4e0d\u5c0f\u4e8e"+minl)}else{if(maxl&&maxl>0){showerror($(this),"\u8f93\u5165\u957f\u5ea6\u9700\u4e0d\u5927\u4e8e"+maxl)}}}checkrs=false}});container.find(".notinput").unbind("mouseenter",showInputTips).bind("mouseenter",showInputTips).bind("mouseleave",hideInputTips).bind("mousedown",function(){hideInputTips();$(this).removeClass("notinput").attr("title","").unbind("mouseenter",showInputTips).unbind("mouseleave",hideInputTips)});return checkrs};function showerror(input,msg){if(input.attr("type")=="hidden"||input.hasClass("uploadpic")||input.hasClass("uploadfile")||input.hasClass("fm_replacedInput")){input.parent().addClass("notinput").attr("title",msg).one("mousedown",function(){$(this).removeClass("notinput").attr("title",null)})}else{input.addClass("notinput").attr("title",msg).one("mousedown",function(){$(this).removeClass("notinput").attr("title",null)})}}function showInputTips(){hideInputTips();var tipstr=$(this).attr("title");var popTip=$('<div id="fm_notInputPopTip"><i class="fa fa-exclamation-circle"></i> '+tipstr+"</div>");$("body").append(popTip);var poss=$(this).offset();popTip.css({position:"absolute",top:(poss.top-popTip.outerHeight())+"px",left:poss.left+"px","z-index":999999});popTip.stop(true).hide().fadeIn("fast").delay(3000).fadeOut("slow",hideInputTips)}function hideInputTips(){var tip=$("#fm_notInputPopTip");tip.stop(true).del()}$.fn.serializeJson=function(){var serializeObj={};var array=this.serializeArray();var form=$(this);$(array).each(function(){var obj=form.find("[name='"+this.name+"']");if(obj.attr("data-ignore")!="true"){if(typeof this.value=="string"){if(this.value=="false"){this.value=false}else{if(this.value=="true"){this.value=true}else{if(this.value.indexOf("{'")==0||this.value.indexOf("[")==0){try{var va=this.value.replace(/\'/g,'"');this.value=JSON.parse(va)}catch(e){}}}}}if(isNull(serializeObj[this.name])){if(obj.attr("type")=="checkbox"||obj.attr("data-mulitSelect")=="true"){serializeObj[this.name]=[this.value]}else{serializeObj[this.name]=this.value}}else{if($.isArray(serializeObj[this.name])){serializeObj[this.name].push(this.value)}else{serializeObj[this.name]=[serializeObj[this.name],this.value]}}}});var delblankStr=!(typeof keepFormBlank!="undefined"&&keepFormBlank==true);for(na in serializeObj){if((delblankStr&&serializeObj[na]==="")||isNull(serializeObj[na])){delete serializeObj[na]}}return serializeObj};$.fn.bindJsonData=function(formdata,htmlcan){var container=$(this);container.find(".fm_autoAddPart_show:not(.BindDataing)").resetAddPart();for(var na in formdata){var va=isNull(formdata[na])?"":formdata[na];va=(typeof va=="boolean")?va.toString():va;if(typeof va=="string"){va=va.replace(/\&apos\;/g,"'")}var objs=container.find("[name='"+na+"'],[id='"+na+"']");objs.each(function(id){var obj=$(this);obj.data("valueData",va);var tagname=obj.get(0).tagName;switch(tagname){case"A":obj.attr({href:va,target:"_blank"}).text(va);break;case"IMG":obj.attr("src",va);if($(this).attr("data-noClickZoom")!="true"){obj.ZoomBigPic()}break;case"TEXTAREA":var nva=va;if($.isArray(nva)&&objs.length>1&&obj.attr("data-mulitSelect")!="true"){nva=va[id]||""}else{if(typeof nva=="object"){nva=JSON.stringify(nva);nva=nva.replace(/\"/g,"'")}}obj.val(nva).data("syschg",true).change().data("syschg",false);case"SELECT":var nva=va;if(obj.attr("multiple")=="multiple"){nva=(typeof nva=="string")?(nva.indexOf(",")>0?nva.split(","):[nva]):nva;nva=$.isArray(nva)?nva:[nva]}else{nva=$.isArray(nva)?nva[0]:nva}obj.val(nva).data("syschg",true).change().data("syschg",false);break;case"INPUT":switch(obj.attr("type")){case"radio":var nva=$.isArray(nva)?va[0]:va;if(obj.val()==nva){obj.get(0).checked=true;obj.data("syschg",true).change().data("syschg",false)
}else{obj.get(0).checked=false}break;case"checkbox":var nva=va;nva=(typeof nva=="string")?(nva.indexOf(",")>0?nva.split(","):[nva]):nva;nva=$.isArray(nva)?nva:[nva];obj.val(nva).data("syschg",true).change().data("syschg",false);break;case"text":case"hidden":var nva=va;if($.isArray(nva)&&objs.length>1&&obj.attr("data-mulitSelect")!="true"){nva=va[id]||""}else{if(typeof nva=="object"){nva=JSON.stringify(nva);nva=nva.replace(/\"/g,"'")}}obj.val(nva).data("syschg",true).change().data("syschg",false);break;default:obj.val(va).data("syschg",true).change().data("syschg",false);break}break;default:var nva=va;if(typeof va=="object"){nva=JSON.stringify(va)}var dataOption=obj.dataOptions(null,"data-contentType");if(dataOption&&dataOption.notext){}else{var htmlfill=(dataOption&&dataOption.html)?true:htmlcan;htmlfill?obj.html(nva):obj.text(nva)}obj.data("syschg",true).change().data("syschg",false);break}var addOption=obj.attr("data-valueAttrs");if(addOption){addOption=addOption.split(",");for(var i=0;i<addOption.length;i++){try{obj.attr(addOption[i],va)}catch(e){}}}})}container.find(".fm_autoAddPart_show:not(.BindDataing)").autoAddPart();container.find("input[type=text].fm_hideInput,textarea.fm_hideInput").each(function(){var input=$(this);var txt=input.val()+"";input.hide().after($('<span id="'+input.attr("name")+'">'+txt+"</span>"));input.bind("change",function(){$(this).next("span").text($(this).val())})})};$.fn.resetAddPart=function(){$(this).each(function(){var container=$(this);var repeatItem=container.data("temp")||container.find(">*:eq(0)").clone(true);container.data("temp",repeatItem);var newCont=repeatItem.clone(true);container.empty().append(newCont);container.data({firstRow:newCont})})};$.fn.autoAddPart=function(){$(this).each(function(){$(this).autoAddPartDo()})};$.fn.autoAddPartDo=function(){var container=$(this);var firstItem=container.data("firstRow");var option=container.dataOptions();option.field=(typeof option.field=="string")?(getObjectValue(option.field)||[]):option.field;var defaultValues={};for(var i=0;i<option.field.length;i++){var value;var oneitem=firstItem.find("[name='"+option.field[i]+"'],[id='"+option.field[i]+"']");if(oneitem.length>0){value=oneitem.data("valueData")}value=getObjectValue(value)||[];defaultValues[option.field[i]]=value}var maxlen=0;var maxid="";for(var na in defaultValues){if(maxlen<=defaultValues[na].length){maxlen=defaultValues[na].length;maxid=na}}container.empty();if(maxlen==0){return}var repeatItem=container.data("temp");for(var i=0;i<maxlen;i++){var newItem=repeatItem.clone(true);newItem.addClass("BindDataing");container.append(newItem);var dataPart={};for(var na in defaultValues){dataPart[na]=defaultValues[na][i]||""}newItem.bindJsonData(dataPart)}}})(jQuery);(function(b){var a="fm_replacedInput";b.fn.checkNeglec=function(){var d=b(this);var c="fm_leaveit";if(d.hasClass(c)||d.hasClass(a)){return true}return false};b.fn.wrapLabel=function(d){var e=b(this);var f=e.attr("title")||"";f=f?'title="'+f+'"':"";var c=e.parent();if(b(c).is("label")){d?c.addClass(d):null;f?c.attr("title",f):null}else{e.wrap('<label class="'+d+'" '+f+"></label>");c=e.parent()}if(e.hasClass("fm_notail")){c.addClass("fm_notail")}return c};b.fn.popOutSelect=function(){b(this).each(function(){b(this).popSelectInput()})};b.fn.popSelectInput=function(){var g=b(this);var d;var e;var f;if(!g.checkNeglec()){var c=g.width();d=g.wrapLabel("fm_formitemwraper");f=g.clone();f.attr("name",g.attr("name")+"_text").attr("id",(g.attr("id")||g.attr("name"))+"_text");d.append(f);f.attr("readonly",true).addClass(a).css({cursor:"pointer"});f.setRealSize(c);g.addClass(a).hide();(g.attr("disabled")==true||g.attr("disabled")=="disabled")?f.addClass("disabled"):null;g.data({textinput:f,type:"popselect",getText:function(){return f.val()}});d.unbind().bind("click",function(){var h=g.dataOptions();h.name="popSelect_"+(new Date()).getTime()+Math.floor(Math.random()*1000);h.callback=function(j){g.val(j.value).change();f.val(j.text)};h.lock=true;if(g.attr("disabled")==true||g.attr("disabled")=="disabled"||g.attr("readonly")==true||g.attr("readonly")=="readonly"){return}WINDOW.open(h,{values:{value:g.val(),text:f.val()},condition:h.param},d);return false})}};b.fn.detailSelect=function(){var c=b(this);c.each(function(){var e=b(this);var d=e.attr("name")+"_text";var f=e.siblings("#"+d);var g="";if(e.attr("multiple")=="multiple"){e.find("option:selected").each(function(){g+=b(this).text()+","});if(g.length>1){g=g.substr(0,g.length-1);g=g.replace(/\,/g," , ")}}else{g=e.find("option:selected").eq(0).text()}if(f.length==0){f=b('<span id="'+d+'"></span>');e.after(f).addClass("fm_replacedInput").hide()}f.text(g)})};b.fn.assistantSelectInput=function(){b(this).each(function(){b(this).MassistantSelectInput()})};b.fn.MassistantSelectInput=function(){var f=b(this);var l={zindex:99999999,borderDis:9,borderWidth:1};var n=f.dataOptions();b.extend(l,n);var e=f.width();if(f.checkNeglec()){return}var p=f.wrapLabel("fm_formitemwraper");var g=f.clone();
g.attr("name",f.attr("name")+"_text").attr("id",(f.attr("id")||f.attr("name"))+"_text");p.append(g);g.addClass(a);g.setRealSize(e);f.addClass(a).hide();f.isDisabled()?g.addClass("disabled"):null;g.addClass("fm_replacedInput");f.addClass("fm_replacedInput");f.data("type","mulitselect");var j;var h;var k;var d=false;var m=function(s){g.val(s.text).attr("title",s.text);f.val(s.value).change();c()};var c=function(){d=false;if(h){h.destroy();h=null}if(k){k.del();k=null}};var q=function(){if(d){return}d=true;c();if(f.isDisabled()||f.isReadonly()){return}var s={text:g.val(),value:f.val()};j=f.data("selectdata");if(f.hasClass("fm_partselect")){h=new partSelectInput(f,j,m,l,s)}else{if(f.hasClass("fm_levelselect")){h=new LinkSelectInput(f,j,m,l,s)}}b(h).one("INSTALLED",function(){d=false;l.minPopH=l.height||200;k=b.popOutFrom(g,h.container,l)});h.install()};g.bind("click",q);var o=function(t){var s=(typeof t=="object"&&t.length>0)?b.extend(true,{},{data:t}):{data:[{value:"",text:""}]};s=s.data;f.data("selectdata",s)};var r=function(){return g.val()};f.data({textinput:g,type:"selectinput",changeOption:o,getoptions:function(){return f.data("selectdata")},getText:function(){return r()}})};b.fn.textInput=function(){b(this).each(function(){b(this).MTextInput()})};b.fn.MTextInput=function(){var d=b(this);d.setRealSize(b(this).width());if(!d.checkNeglec()){var c=d.wrapLabel("fm_formitemwraper");d.hasClass("must")?c.addClass("must"):null;(d.attr("disabled")==true||d.attr("disabled")=="disabled")?d.addClass("disabled"):null;d.attr("placeholder",d.attr("title"))}};b.fn.checkRadio=function(){b(this).each(function(){var d=b(this);d.bind("click",function(){if(d.attr("readonly")){return false}});d.addClass(a);var c=d.wrapLabel("fm_radiobox");(d.get(0).checked)?c.addClass("check"):c.removeClass("check");(d.get(0).disabled)?c.addClass("disabled"):c.removeClass("disabled");d.data("type","radio");if(browserIsIE8){d.css({width:"0px",height:"0px",padding:"0px",margin:"0px"})}else{d.hide()}d.bind("change",function(){if(d.attr("disabled")){return}var f=d.attr("name");var g=b(this).get(0).checked;if(g){var e=d.parent().parent();var h=0;while(e.find("input[name='"+f+"']").length<=1&&h<5){h++;e=e.parent()}e.find("input[name='"+f+"']").parent().removeClass("check");c.addClass("check")}else{c.removeClass("check")}})})};b.fn.checkBox=function(){b(this).each(function(){var d=b(this);d.bind("click",function(){if(d.attr("readonly")){return false}});d.addClass(a);var c=d.wrapLabel("fm_checkbox");d.data("type","checkbox");(d.get(0).checked)?c.addClass("check"):c.removeClass("check");(d.get(0).disabled)?c.addClass("disabled"):c.removeClass("disabled");if(browserIsIE8){d.css({width:"0px",height:"0px",padding:"0px",margin:"0px"})}else{d.hide()}d.bind("change",function(){if(d.attr("disabled")){return}(d.get(0).checked)?c.addClass("check"):c.removeClass("check")})})};b.fn.checked=function(c){c=(c==false)?false:true;b(this).get(0).checked=c;b(this).change()};b.fn.checkAll=function(c){c=(c==false)?false:true;b(this).each(function(){b(this).get(0).checked=c;b(this).change()})};b.fn.selectInput=function(){b(this).each(function(){if(!b(this).checkNeglec()){b(this).MSelectInput()}})};b.fn.autoAddInput=function(){b(this).each(function(){if(!b(this).checkNeglec()){b(this).autoAddInputCreat()}})};b.fn.autoAddInputCreat=function(){var d=b(this);var h=d.find(">*").eq(0);var c=h.clone(true);(h.is("input"))?h.val(""):h.find("input").val("");(h.is("input"))?h.attr("data-mulitSelect","true"):h.find("input").attr("data-mulitSelect","true");var g=b('<div class="fm_item"><a class="fm_addbut inFormBut"><i class="fa fa-plus"></i></a></div>');d.append(g);g.prepend(h);var f=function(){var k=true;d.find("input").each(function(){if(!trim(b(this).val())){k=false}});return k};var j=function(k,m){var n=c.clone();var l=b('<div class="fm_item new"><a class="inFormBut"><i class="fa fa-remove"></i></a></div>');l.prepend(n);m?d.append(l):g.after(l);l.find(">a").one("click",function(){if(!b(this).isDisabled()){l.del();l=null}});(n.is("input"))?n.val(isNull(m)?"":m):n.find("input").val(isNull(m)?"":m);(n.is("input"))?n.attr("data-mulitSelect","true"):n.find("input").attr("data-mulitSelect","true");return n};h.find("input").unbind().bind("change",function(){if(!b(this).data("syschg")){return}d.find(".fm_item.new").del();var k=h.find("input");var n=k.val()+"";n=getObjectValue(n)||[];k.val(isNull(n[0])?"":n[0]);for(var m=1;m<n.length;m++){if(!isNull(n[m])){var l=j(m,n[m])}}});d.data("disableFun",function(k){d.find(">.fm_item a.inFormBut").disable(k)});var e=g.find("a.fm_addbut");e.bind("click",function(){if(e.isDisabled()||!f()){return}var k=j();k.focus()})};b.fn.autoAddFormPart=function(){b(this).each(function(){if(!b(this).checkNeglec()){b(this).autoAddFormPartCreat()}})};b.fn.autoAddFormPartCreat=function(){var c=b(this);var g=c.dataOptions();g.checkblank=g.checkblank?g.checkblank.split("|"):null;var d={};var k;var m=b('<div class="fm_item"></div>');c.find(">*").appendTo(m);c.append(m);var j=m.clone(true);
formatForm(m);m.find("input,textarea").addClass("fm_replacedInput").attr("data-mulitSelect","true");var h=b('<a class="fm_addbut inFormBut"><i class="fa fa-plus"></i></a>');m.append(h);h.bind("click",function(){if(!h.isDisabled()&&c.checkForm()){l()}});c.data("disableFun",function(n){c.find(">.fm_item a.inFormBut").disable(n)});var f=function(){if(b(this).data("syschg")!=true){return}d[b(this).attr("name")]=getObjectValue(b(this).data("valueData"))||[];if(k){clearTimeout(k);k=null}k=setTimeout(e,200)};var e=function(){var r=0;var p="";for(var o in d){if(r<=d[o].length){r=d[o].length;p=o}}if(p==""){return}var n=[];for(var q=0;q<r;q++){var s={};n.push(s);for(var o in d){s[o]=isNull(d[o][q])?"":d[o][q]}}if(n.length==0){var t={};for(var o in d){t[o]=""}n.push(t)}c.empty();for(var q=0;q<n.length;q++){l(n[q])}m=c.find("div.fm_item:eq(0)");m.find("input,textarea").bind("change",f)};var l=function(s){if(!s&&g.checkblank){var r=true;var n="";for(var q=0;q<g.checkblank.length;q++){n+=g.checkblank[q]?"[name='"+g.checkblank[q]+"'],":""}if(n.length>0){n=n.substr(0,n.length-1);c.find(n).each(function(){if(!b(this).val()){r=false;return}})}if(!r){return}}var t=j.clone(true);if(c.find(".fm_item").length==0){var o=b('<a class="fm_addbut inFormBut"><i class="fa fa-plus"></i></a>');t.append(o);o.bind("click",function(){if(!o.isDisabled()&&c.checkForm()){l()}});c.append(t)}else{var p=b('<a class="inFormBut"><i class="fa fa-remove"></i></a>');t.append(p).addClass("new");p.one("click",function(){if(!p.isDisabled()){t.del();t=null}});s?c.append(t):c.find(".fm_item:eq(0)").after(t)}formatForm(t);t.find("input,textarea").attr("data-mulitSelect","true");if(s){t.bindJsonData(s)}};m.find("input,textarea").bind("change",f)};b.fn.switchGroup=function(){b(this).each(function(){if(!b(this).checkNeglec()){b(this).MSwitchGroup()}})};b.fn.MSwitchGroup=function(){var d=b(this);var h=d.dataOptions();if(!h.checkValue||!h.target){return}h.target=h.target.split("|");h.checkValue=h.checkValue.split("|");var e=d.find("[name='"+h["switch"]+"']");h.checkClass=h.checkClass?h.checkClass.split("|"):[];for(var f=0;f<h.target.length;f++){var j=d.find("#"+h.target[f]+",[name='"+h.target[f]+"']");j.addClass("fm_actioninput")}var c=function(m,k,l){if(m.attr("data-invert")=="true"){l=!l}switch(k){case"disable":(m.is("input"))?m.disable(l):null;break;case"enable":(m.is("input"))?m.disable(!l):null;break;case"readonly":(m.is("input"))?m.readonly(l):null;break;case"editable":(m.is("input"))?m.readonly(!l):null;break;case"hide":l?m.hide():m.show();break;case"show":l?m.show():m.hide();break}};var g=function(){var m=e.val();if(inArray(h.checkValue,m)){for(var k=0;k<h.target.length;k++){var l=d.find("#"+h.target[k]+",[name='"+h.target[k]+"']");c(l,h.checkResult,true);h.checkClass[0]?l.addClass(h.checkClass[0]):null;h.checkClass[1]?l.removeClass(h.checkClass[1]):null}}else{for(var k=0;k<h.target.length;k++){var l=d.find("#"+h.target[k]+",[name='"+h.target[k]+"']");c(l,h.checkResult,false);h.checkClass[0]?l.removeClass(h.checkClass[0]):null;h.checkClass[1]?l.addClass(h.checkClass[1]):null}}};g();e.bind("change",g)};b.fn.selectSwitch=function(){b(this).each(function(){if(!b(this).checkNeglec()){b(this).MSelectSwitch()}})};b.fn.MSelectSwitch=function(){var m=b(this);var s=m.dataOptions();var x;var q=false;var z=m.outerWidth();var u=m.attr("disabled");u=typeof u=="undefined"?"":'disabled="disabled"';var r=m.attr("readonly")?'readonly="readonly"':"";var v=m.attr("id");var p=m.attr("name");var h=m.outerWidth();h=h<20?20:h;var A=m.attr("onchange");var o=m.attr("class");o=typeof o=="undefined"?"":o+" ";var w=[];m.find("option").each(function(){w.push({text:b(this).text(),value:b(this).val()})});var g=m.wrapLabel("fm_formitemwraper");var n;var k;k=m.val();k=(k!=null&&typeof k!="undefined")?k:w[0]?w[0]["value"]:"";g.css({position:"relative"}).addClass("fm_noafter");var l=b('<div class="fm_Switch_box '+(u?"disabled":"")+'"><dd></dd></div>');g.append(l);n=b('<input name="'+p+'" id="'+v+'" type="hidden" value=""  '+u+" "+r+'  class="'+o+' fm_replacedInput hd" />');g.append(n);m.remove();n.data("type","selectswitch");l.css({overflow:"hidden"});l.setRealSize(z);g.find("p").css({overflow:"hidden"}).setRealSize(l.width());var d=function(B){w=(typeof B=="object"&&B.length>0)?b.extend(true,{},{data:B}):{data:[{value:"",text:""}]};w=w.data;c(w[0]["value"]||"")};var c=function(C){var B=b.getObjectInArray(w,"value",C);if(B){n.val(B.value);g.find("dd").text(B.text)}else{n.val("");g.find("dd").text("")}};var y=function(B){c(B.value);q=true;n.change();q=false};var j=function(){g.find(".fm_switchPop").del()};var t=function(){j();if(l.hasClass("disabled")||l.hasClass("readonly")){return}var C=b('<div class="fm_switchPop"></div>');var B=n.val();for(var D=0;D<w.length;D++){var E=b("<p>"+w[D]["text"]+"</p>");E.data("value",w[D]["value"]);if(w[D]["value"]==B){E.addClass("nowid")}C.append(E)}g.append(C);C.find("p").one("click",function(G){var F=b(this).data("value");if(n.val()!=F){c(F);n.change()}j();
g.unbind("mouseleave");stopPP(G)});C.css({position:"absolute","z-index":9999,left:"0px",rigth:"0px",top:-Math.floor((C.outerHeight()-g.find(">.fm_Switch_box").outerHeight())/2)+"px"});C.setRealSize(z);g.one("mouseleave",j)};var f=function(){l.removeClass("notinput");var B=(n.attr("disabled")=="disabled"||n.attr("disabled")==true||n.attr("readonly")=="readonly"||n.attr("readonly")==true)?false:true;if(!B||l.hasClass("open")){return}if(browserIsIE){if(x){clearTimeout(x);x=null}x=setTimeout(function(){t()},100);return}else{t()}};var e=function(){return g.find("dd").text()};n.attr("onchange",A);n.data({selectobj:l,changeOption:d,type:"select",getoptions:function(){return w},getText:function(){return e()}});c(k);b(n).bind("change",function(){if(q){return}var B=n.val();c(B)});g.unbind("click").bind("click",f)};b.fn.MSelectInput=function(){var l=b(this);var r=l.dataOptions();var v;var p=false;var s=l.attr("disabled");s=typeof s=="undefined"?"":'disabled="disabled"';var t=l.attr("id");var o=l.attr("name");var g=l.outerWidth();g=g<60?60:g;var y=l.attr("onchange");var n=l.attr("class");n=typeof n=="undefined"?"":n+" ";var w="";var u=[];l.find("option").each(function(){var C=b(this);var B={text:C.text(),value:C.val()};if(C.attr("selected")==true||C.attr("selected")=="selected"){w+=B.value+","}if(!isNull(r.exclusive)){if(r.exclusive==B.value){B.exclusive=true}}if(!isNull(r.checkAll)){if(r.checkAll==B.value){B.checkAll=true}}u.push(B)});w=w.length>0?w.substr(0,w.length-1):null;if(typeof r["default"]=="object"){r["default"]=r["default"]["value"]}var j=r["default"]?r["default"]:w;var A=l.attr("title");A=A?'title="'+A+'"':"";var f;var m;var k;var q=l.attr("readonly")?'readonly="readonly"':"";var h=l.attr("disabled")?'disabled="disabled"':"";if(r.inputable){if(!j){j=l.get(0).selectedIndex;j=l.find("option:eq("+j+")").text()}f=l.wrapLabel("fm_formitemwraper");k=b('<div class="fm_Select_box'+(r.inputable?" inputableSelect":"")+(r.compact?" fm_compact":"")+'">'+((r.compact||r.inputable)?"":'<span class="SldropButton"></span>')+"</div>");k.css({position:"relative"}).find("span").css({"float":"right",display:"block"});f.append(k);l.remove();m=b('<input name="'+o+'" id="'+t+'" type="text" '+q+" "+h+' value=""  '+s+'  class="'+n+' fm_replacedInput" />');k.prepend(m);k.setRealSize(g);m.css({"float":"left"}).setRealSize(k.width()-k.find("span").outerWidth(true))}else{j=!isNull(j)?j:u[0]?u[0]["value"]:"";f=l.wrapLabel("fm_formitemwraper");k=b('<div class="fm_Select_box '+(s?"disabled":"")+(r.compact?" fm_compact":"")+'"><dd></dd>'+(r.compact?"":'<span class="SldropButton" style="padding:0px;margin:0px"></span>')+"</div>");m=b('<input name="'+o+'" id="'+t+'" type="hidden"  '+q+" "+h+'  value=""  '+s+'  class="'+n+' fm_replacedInput hd" />');f.append(k).append(m);l.remove();f.find("span").css({"float":"right",display:"block"});k=f.find(".fm_Select_box");k.setRealSize(g);f.find("dd").css({overflow:"hidden","float":"left"}).setRealSize(k.width()-f.find("span").outerWidth(true))}var d=function(B){u=(typeof B=="object"&&B.length>0)?b.extend(true,{},{data:B}):{data:[{value:"",text:""}]};u=u.data;if(r.inputable){m.val(u[0]["text"]||"").change()}else{c(u[0]["value"]||"")}};var c=function(F){if(r.inputable){m.val(F);return}var B={value:"",text:""};if(r.mulit){var D=getArrayFromString(F);for(var E=0;E<D.length;E++){var C=b.getObjectInArray(u,"value",D[E]);if(C){B.text+=C.text+",";B.value+=C.value+","}}B.text=cutArrayStringTail(B.text);B.value=cutArrayStringTail(B.value)}else{B=b.getObjectInArray(u,"value",F)}if(B){m.val(B.value);f.find("dd").text(B.text)}else{m.val("");f.find("dd").text("")}};var x=function(B){if(r.mulit){m.val(B.value).change();f.find("dd").text(B.text);return}if(r.inputable){c(B.text)}else{c(B.value)}p=true;m.change();p=false};var z=function(){k.removeClass("notinput");var B=(m.attr("disabled")=="disabled"||m.attr("disabled")==true||m.attr("readonly")=="readonly"||m.attr("readonly")==true)?false:true;if(!B||k.hasClass("open")){return}if(browserIsIE){if(v){clearTimeout(v);v=null}v=setTimeout(function(){b.dropSelectList(k,u,x,m.val(),(r.inputable?"text":null),r.mulit)},100);return}else{b.dropSelectList(k,u,x,m.val(),(r.inputable?"text":null),r.mulit)}};var e=function(){return f.find("dd").text()};m.attr("onchange",y);m.data({selectobj:k,changeOption:d,type:"select",getoptions:function(){return u},getText:function(){return e()}});c(j);b(m).bind("change",function(){if(p){return}var B=m.val();c(B)});f.unbind("click").bind("click",z)};b.fn.getoptions=function(){var c=b(this).data("getoptions");if(typeof c=="function"){return c()}return null};b.fn.changeOption=function(d){var c=b(this).data("changeOption");if(typeof c=="function"){c(d)}};b.fn.selectOption=function(e){if(!e){var d=b(this).data("getoptions");if(typeof d=="function"){return d()}return null}var c=b(this).data("changeOption");if(typeof c=="function"){c(e)}};b.fn.getText=function(){var c=b(this).data("getText");if(typeof c=="function"){return c()}return null};b.extend({popOutFrom:function(l,d,k){option={zindex:99999999,minPopH:60,maxPopH:600,borderDis:9,borderWidth:1};
b.extend(option,k||{});var o;var h=b('<div class="fm_popOutContainer"></div>');h.css({position:"absolute","z-index":option.zindex,overflow:"auto","min-width":(l.outerWidth()-2*option.borderWidth)+"px",padding:"0px",margin:"0px"});var m=l.offset();b("body").append(h);h.append(d);var g=m.top-option.borderDis;var e=b(window).height()-m.top-l.outerHeight()-option.borderDis;var p=m.top+b(window).scrollTop();if(Math.max(e,g)<option.minPopH){o=b(window).height()-option.borderDis*2;m.top=0}else{if(e<option.minPopH){o=Math.min(g,option.maxPopH);o=Math.min(o,h.outerHeight());m.top-=o;m.top+=1*option.borderWidth}else{m.top+=l.outerHeight();o=Math.min(e,option.maxPopH);p+=l.outerHeight();m.top-=1*option.borderWidth}}var j=m.left;if(b(window).width()-m.left<h.outerWidth()){j=b(window).width()-h.outerWidth()}j=j>=0?j:0;m.left+=b(window).scrollLeft();m.top+=b(window).scrollTop();h.css({left:Math.floor(j)+"px",top:Math.floor(p)+"px","max-height":Math.floor(o)+"px"});l.addClass("open");var n=function(){l.removeClass("open");l.unbind("mousemove",f);b(document).unbind("click",n).unbind("mousewheel",n);b(window).unbind("scroll",n);if(h){h.unbind();h.del()}h=null};var f=function(q){q.stopPropagation()};var c=h.height();h.css({top:m.top}).height(0).animate({height:c},"fast",function(){b(document).one("mousemove",n).one("mousewheel",n);b(window).one("scroll",n)});h.data("destroy",n);h.bind("mousemove",f).bind("mousewheel",f).bind("mouseleave",n);l.bind("mousemove",f);return h},dropSelectList:function(n,l,o,d,k,p){if(l.length<1){return}k=k?k:"value";var m=b('<div class="fm_Select_Droplist '+(p?"mulit":"")+'"></div>');for(var g=0;g<l.length;g++){var j=b('<p rel="'+l[g]["value"]+'" rev="'+(l[g]["exclusive"]?1:0)+'"  data-chkall="'+(l[g]["checkAll"]?1:0)+'">'+l[g]["text"]+"</p>");j.data("data",l[g]);m.append(j)}if(d){vals=d.split(",");for(var g=0;g<vals.length;g++){m.find("p[rel='"+vals[g]+"']").addClass("nowid")}}var h=b.popOutFrom(n,m);var e=function(u){if(p){var q=b(this);if(q.hasClass("nowid")){var t=q.data("data");if(t.checkAll){m.find("p").removeClass("nowid")}else{m.find("p[data-chkall=1]").removeClass("nowid")}q.removeClass("nowid")}else{var t=q.data("data");if(t.exclusive){m.find("p").removeClass("nowid")}else{m.find("p[rev=1]").removeClass("nowid")}if(t.checkAll){m.find("p").addClass("nowid")}q.addClass("nowid")}var s="";var v="";m.find("p.nowid").each(function(){var w=b(this).index();s+=l[w]["value"]+",";v+=l[w]["text"]+","});if(s.length>0){s=s.substr(0,s.length-1);v=v.substr(0,v.length-1)}o({text:v,value:s})}else{m.find("p.nowid").removeClass("nowid");b(this).addClass("nowid");var r=b(this).index();o(l[r]);c()}u.stopPropagation()};var c=function(){if(h){if(typeof h.data("destroy")=="function"){h.data("destroy")()}h=null}};var f=function(q){q.stopPropagation()};n.addClass("open");m.find("p").bind("click",e)}});b.fn.disable=function(c){c=(c==false)?false:true;b(this).each(function(){var f=b(this);var e=f.data("disableFun");if(typeof e=="function"){e(c)}var h=f.data("type");switch(h){case"radio":case"checkbox":b(this).attr("disabled",c);var g=f.parent();(c)?g.addClass("disabled"):g.removeClass("disabled");break;case"dateinput":f.attr("disabled",c);(c)?f.addClass("disabled"):f.removeClass("disabled");break;case"select":var j=f.data("selectobj");if(j){c?j.addClass("disabled"):j.removeClass("disabled")}f.attr("disabled",c);break;case"upload":break;case"selectinput":case"popselect":var d=f.data("textinput");(c)?d.addClass("disabled"):d.removeClass("disabled");f.attr("disabled",c);break;default:f.attr("disabled",c);(c)?f.addClass("disabled"):f.removeClass("disabled");break}})};b.fn.isDisabled=function(){var c=b(this).attr("disabled");var d=b(this).hasClass("disabled");if(d||c==true||c=="disabled"){return true}return false};b.fn.readonly=function(c){c=(c==false)?false:true;b(this).each(function(){var e=b(this);var j=e.data("readonlyFun");if(typeof j=="function"){j(c)}var g=e.data("type");switch(g){case"radio":case"checkbox":e.attr("readonly",c);var f=e.parent();(c)?f.addClass("readonly"):f.removeClass("readonly");break;case"dateinput":case"mulitselect":case"selectswitch":(c)?e.addClass("readonly"):e.removeClass("readonly");break;case"select":var h=e.data("selectobj");if(h){c?h.addClass("readonly"):h.removeClass("readonly")}e.attr("readonly",c);break;case"upload":break;case"selectinput":case"popselect":var d=e.data("textinput");(c)?d.addClass("readonly"):d.removeClass("readonly");e.attr("readonly",c);break;default:e.attr("readonly",c);(c)?e.addClass("readonly"):e.removeClass("readonly");break}})};b.fn.isReadonly=function(){var c=b(this).attr("readonly");var d=b(this).hasClass("readonly");if(d||c==true||c=="readonly"){return true}return false};b.fn.getValue=function(){var c="";if(b(this).attr("type")=="checkbox"){b(this).each(function(){c+=b(this).get(0).checked?(b(this).val()+","):""});if(c.length>1){c=c.substr(0,c.length-1)}}else{if(b(this).attr("type")=="radio"){b(this).each(function(){b(this).get(0).checked?c=b(this).val():null})
}else{if(b(this).attr("data-mulitSelect")=="true"){b(this).each(function(){c+=b(this).val()+","});c=cutArrayStringTail(c)}else{c=b(this).val()}}}return c};b.fn.addParam=function(d){var c=b(this).dataOptions();c.param=b.extend({},c.param||{},d);b(this).attr("data-option",JSON.stringify(c).replace(/\"/g,"'"))}})(jQuery);function LinkSelectInput(o,D,l,h,y){var w=this;var t={width:480,height:320,liWidth:64,searchKey:false,searchUrl:null,clear:true,format:"value",splitStr:"|",childrenName:"children"};this.container;var C;var u;var v;var j;var m;var x={};var B=false;this.install=function(){if(!D){return}$.extend(t,h||{});t.splitStr=t.splitStr==","?"|":t.splitStr;w.container=$('<div class="fm_levelSelect"><table class="fm_levelSelectSelector" width="100%" border="0" cellspacing="0" cellpadding="0" ><tr><td  valign="top" style="padding:0px"><div class="fm_levelSelectTitle"><div class="slideBox"><ul><li>titleBox</li></ul></div></div><div class="fm_levelSelectContent" ><ul><li>content</li></ul></div></td><td valign="top" style="padding:0px"><div class="fm_levelSelectResult"><ul><li>\u7ed3\u679c</li></ul></div></td></tr></table><div class="fm_levelSelectFooter">'+(t.searchKey?'<div  class="fm_levelSearchBox fl"><input type="text" style="width:120px"  placeholder="\u8f93\u5165\u5173\u952e\u5b57\u67e5\u8be2" name="searchKey" id="fm_searchKey"/><a id="startSearchBut"><i class="fa fa-search" /></a></div>':"")+'<div class="fm_levelSelectFootButBox fr"><span>0</span>'+(t.mulit?'<a id="selectOk">\u5b8c\u6210</a>':"")+(t.clear?'<a id="selectClear">\u6e05\u9664</a>':"")+'</div><div class="cl"/></div></div>');w.container.css({width:t.width+"px",height:t.height+"px",overflow:"hidden",visibility:"hidden"});C=w.container.find(".fm_levelSelectTitle");v=w.container.find(".fm_levelSelectContent");j=w.container.find(".fm_levelSelectResult");if(t.mulit){j.css({width:t.liWidth+"px","overflow-y":"auto","overflow-x":"hidden"});w.container.find(".fm_levelSelectSelector td:eq(1)").width(t.liWidth)}else{C.css({"border-right-width":"0px","border-right-style":"dotted","border-right-color":"#FFF"});v.css({"border-right-width":"0px","border-right-style":"dotted","border-right-color":"#FFF"});j.hide()}$("body").append(w.container);u=w.container.find(".fm_levelSelectFooter");if(t.searchKey||t.mulit||t.clear){u.css({position:"relative"});if(t.searchKey){u.find("#startSearchBut").bind("click",F);u.find("#fm_searchKey").enter(F);setTimeout(function(){try{u.find("#fm_searchKey").focus()}catch(M){}},200)}t.height-=u.outerHeight(true);u.find(".fm_levelSelectFootButBox a").bind("click",A)}else{u.remove()}j.css({"overflow-y":"auto"}).setRealSize(null,t.height);t.height-=C.outerHeight(true);v.css({"overflow-y":"auto"}).setRealSize(null,t.height);var L=v.find("ul").width()-20;var K=Math.round(L/t.liWidth);t.liWidth=Math.floor(L/K);C.css({position:"relative"});m=C.find(".slideBox");m.css({position:"absolute",bottom:"0px",top:"6px",left:"4px",right:"4px",overflow:"hidden"});C.find(".movebut").css({position:"absolute",top:"2px"});C.find(".movebut.prev").css({left:"2px"});C.find(".movebut.next").css({right:"2px"});s(D);y=k(y);G(y);var p=o.data("openPath");if(!p){if(t.format=="tree"&&y[0]){p=y[0]["value"].split(t.splitStr)}else{p=[""]}}w.setSelectedTree(p,a);w.container.css({visibility:"visible"});$(w).trigger("INSTALLED")};function F(){if(B){return}var p=trim(u.find("#fm_searchKey").val());if(p){I(p);var K=u.find("#clearSearchBut");if(K.length==0){K=$('<a id="clearSearchBut" class="but-red"><i class="fa fa-remove" /></a>');u.find("#startSearchBut").after(K);K.bind("click",g)}}else{g()}}function g(){if(J){J.destroy();J=null}u.find("#fm_searchKey").val("");u.find("#clearSearchBut").del();H()}var J;function I(L){J=new AJAXObj();var K=t.searchUrl||t.url;var p=creatPostParam("searchKey",{key:L});$(J).one("JSON_LOADED",e).one("SYS_ERROR",function(){B=false});B=true;J.Post(K,p)}function e(M,L){B=false;if(L.value.length<1){$.message("\u6ca1\u6709\u5339\u914d\u7ed3\u679c",2000);return}var p=C.find("ul");p.find("li").del();p.empty();var K=$('<li class="nowid">\u8bf7\u9009\u62e9</li>');p.append(K);r(L.value,v.find("ul"),c)}function H(){w.setSelectedTree([""],a)}function A(){var p=$(this);var K={text:"",value:""};switch(p.attr("id")){case"selectOk":K=d(w.getSelectedArray());break;case"selectClear":z();break}(typeof l=="function")?l(K):$(w).trigger("SELECT_OK",{data:K});w.destroy()}function s(M,p,K){p=p?(p+t.splitStr):"";K=K?(K+t.splitStr):"";for(var L=0;L<M.length;L++){M[L]["treeBranchPath"]=p+M[L]["value"];M[L]["treeBranchText"]=K+M[L]["text"];if(M[L][t.childrenName]&&typeof M[L][t.childrenName]!=="string"){s(M[L][t.childrenName],M[L]["treeBranchPath"],M[L]["treeBranchText"])}}}function d(M){var L={text:"",value:""};var N=t.format=="tree"?"textPath":"text";var K=t.format=="tree"?"valuePath":"value";for(var p=0;p<M.length;p++){if(M.text!=""&&M.value!=""){L.text+=(p>0?",":"")+M[p][N];L.value+=(p>0?",":"")+M[p][K]}}return L}function k(p){var L=[];if(p.value==""&&p.text==""){return L
}else{try{p.text=JSON.parse(p.text);p.value=JSON.parse(p.value)}catch(M){p.text=(typeof p.text=="string")?p.text.split(","):p.text;p.value=(typeof p.value=="string")?p.value.split(","):p.value}for(var K=0;K<p.value.length;K++){L.push({text:p.text[K]||"",value:p.value[K],treeBranchText:p.text[K]||"",treeBranchPath:p.value[K]})}}return L}this.setSelectedTree=function(R,O){var K=C.find("ul");K.find("li").del();K.empty();var N=0;var Q=$("<li>\u8bf7\u9009\u62e9</li>");K.append(Q);Q.data("lidata",D);var L="";var P;if(R[0]){P=$.getObjectInArray(D,"value",R[N]);if(P){Q.text(P.text);Q.data("selectedvalue",P)}}if(!P||R.length<N+1){r(D,v.find("ul"),c,P);Q.toggleSelected();(typeof O=="function")?O(true):null;return}L+=R[0];var M;var p=function(T,V,S){if(T){if(!S){P[t.childrenName]=V;s(V,P.treeBranchPath,P.treeBranchText)}N++;var U=$("<li>\u8bf7\u9009\u62e9</li>");K.append(U);U.data("lidata",P[t.childrenName]);P=$.getObjectInArray(P[t.childrenName],"value",R[N]);if(!P||R.length<N+1||!P[t.childrenName]){r(V,v.find("ul"),c,P);U.toggleSelected();(typeof O=="function")?O(true):null;return}else{U.text(P.text);U.data("selectedvalue",P)}L+=","+R[0];if(P[t.childrenName]){if(typeof P[t.childrenName]=="object"&&P[t.childrenName].length>0){p(true,P[t.childrenName],true)}else{M=(typeof P[t.childrenName]=="string")?P[t.childrenName]:t.url;b(M,P,p)}}}else{console.log("\u6570\u636e\u5f02\u5e38")}};if(P[t.childrenName]){if(typeof P[t.childrenName]=="object"&&P[t.childrenName].length>0){p(true,P[t.childrenName],true)}else{M=(typeof P[t.childrenName]=="string")?P[t.childrenName]:t.url;b(M,P,p)}}};function b(K,L,M){if(B){return}var O=new AJAXObj();$(O).one("JSON_LOADED",function(Q,P){if(!w.container){try{w.destroy()}catch(Q){}return}B=false;(typeof M=="function")?M(true,P.value,false):null}).bind("SYS_ERROR",function(){if(!w.container){try{w.destroy()}catch(P){}return}B=false;(typeof M=="function")?M(false):null});L=L?cloneJson(L):{};L[t.childrenName]?delete L[t.childrenName]:null;var N=$.extend({},t.param||{},L);var p=creatPostParam("getChildren",N);O.Post(K,p);B=true}function r(O,L,K,N){L.empty();var P=w.getSelectedArray();for(var M=0;M<O.length;M++){var p=$('<li  title="'+O[M]["treeBranchText"]+'"  rel="'+O[M]["treeBranchPath"]+'" >'+O[M]["text"]+"</li>");p.data("data",O[M]);if(O[M][t.childrenName]){p.addClass("isBranch");if(N){if(N.value){if(O[M]["value"]==N.value){p.addClass("just_checked")}}else{if($.getObjectInArray(N,"value",O[M]["value"])){p.addClass("just_checked")}}}}else{if($.getObjectInArray(P,"valuePath",O[M]["treeBranchPath"])){p.addClass("checked")}}L.append(p);p.setRealSize(t.liWidth)}L.find("li").bind("click",K)}function a(){C.find("ul>li").bind("click",function(){var L=$(this);if(!L.hasClass("nowid")){var p=L.data("lidata");var K=L.data("selectedvalue");r(p,v.find("ul"),c,K);L.toggleSelected()}})}function c(){var p=$(this);var L=p.data("data");var N=C.find("ul>li.nowid");N.nextAll().del();if(L[t.childrenName]){N.text(L.text);N.data("selectedvalue",L);var K=[];C.find("ul>li").each(function(){var O=$(this).data("selectedvalue");O?K.push(O.value):null});w.setSelectedTree(K,a);o.data("openPath",K)}else{if(!t.mulit){(!t.mulit)?j.find(">ul >li").del():null;p.addClass("checked");f(L);var M=d(w.getSelectedArray());(typeof l=="function")?l(M):$(w).trigger("SELECT_OK",{data:M});w.destroy();return}else{if(p.hasClass("checked")){p.removeClass("checked");E(L);p=p.parent().find("li.checked:eq(0)");L=(p.length>0)?p.data("data"):null}else{p.addClass("checked");f(L)}}N.text(L?L.text:"\u8bf7\u9009\u62e9");N.data("selectedvalue",L)}}this.getSelectedArray=function(){var p=[];j.find("ul >li").each(function(){var K=$(this);var L=K.data("data");p.push({text:L.text,value:L.value,valuePath:L.treeBranchPath,textPath:L.treeBranchText})});return p};function f(L){var K=j.find(">ul");var p=K.find(">li[rel='"+L.treeBranchPath+"']");if(p.length>0){p.toggleSelected("justAdd");return}p=$('<li title="'+L.treeBranchText+'" rel="'+L.treeBranchPath+'" ><a><i class="fa fa-remove"></i></a>'+n(L.text)+"</li>");p.data("data",L);K.append(p);p.toggleSelected("justAdd");p.find("a").one("click",q);u.find(">div.fm_levelSelectFootButBox >span").text(j.find("ul>li").length)}function E(p){j.find("ul >li").each(function(){var L=$(this);var K=L.data("data");if(K.treeBranchPath==p.treeBranchPath){L.addClass("todelete")}});j.find("ul >li.todelete").del();v.find("ul>li[rel='"+p.treeBranchPath+"']").removeClass("checked");u.find(">div.fm_levelSelectFootButBox >span").text(j.find("ul>li").length)}function G(K){j.find("ul>li").del();for(var p=0;p<K.length;p++){f(K[p])}}function z(){j.find("ul>li").del();v.find("ul>li").removeClass("checked");w.setSelectedTree([""]);u.find(">div.fm_levelSelectFootButBox >span").text("0")}function n(K){var p=K.split(t.splitStr);return p[p.length-1]}function q(){var p=$(this).parent();var K=p.data("data");E(K)}this.destroy=function(){if(w.container){w.container.del();w.container=null}}}function partSelectInput(k,z,h,e,v){var t=this;var n={width:480,height:320,liWidth:64,parts:null,searchKey:true,keyField:"key",groupField:"text",keySplit:"|",clear:true};
this.container;var y;var q;var s;var f;var j;var u={};var F;this.install=function(){if(!z){return}$.extend(n,e||{});t.container=$('<div class="fm_levelSelect"><table class="fm_levelSelectSelector" width="100%" border="0" cellspacing="0" cellpadding="0" ><tr><td  valign="top" style="padding:0px"><div class="fm_levelSelectTitle compact"><div class="slideBox"><ul><li>titleBox</li></ul></div></div><div class="fm_levelSelectContent" ><ul><li>content</li></ul></div></td><td valign="top" style="padding:0px"><div class="fm_levelSelectResult"><ul><li>\u7ed3\u679c</li></ul></div></td></tr></table><div class="fm_levelSelectFooter">'+(n.searchKey?'<div  class="fm_levelSearchBox fl"><input type="text" placeholder="\u8f93\u5165\u5173\u952e\u5b57\u67e5\u8be2" style="width:120px" name="searchKey" id="fm_searchKey"/><a id="startSearchBut"><i class="fa fa-search" /></a></div>':"")+'<div class="fm_levelSelectFootButBox fr"><span>0</span>'+(n.mulit?'<a id="selectOk">\u5b8c\u6210</a>':"")+(n.clear?'<a id="selectClear">\u6e05\u9664</a>':"")+"</div></div>");t.container.css({width:n.width+"px",height:n.height+"px",overflow:"hidden",visibility:"hidden"});y=t.container.find(".fm_levelSelectTitle");s=t.container.find(".fm_levelSelectContent");f=t.container.find(".fm_levelSelectResult");q=t.container.find(".fm_levelSelectFooter");$("body").append(t.container);if(n.mulit){f.css({width:n.liWidth+"px","overflow-y":"auto","overflow-x":"hidden"});t.container.find(".fm_levelSelectSelector td:eq(1)").width(n.liWidth)}else{y.css({"border-right-width":"0px","border-right-style":"dotted","border-right-color":"#FFF"});s.css({"border-right-width":"0px","border-right-style":"dotted","border-right-color":"#FFF"});f.hide()}if(n.searchKey||n.mulit||n.clear){n.height-=q.outerHeight(true);if(n.searchKey){q.find("#startSearchBut").bind("click",C);q.find("#fm_searchKey").enter(C);setTimeout(function(){try{q.find("#fm_searchKey").focus()}catch(L){}},200)}q.find(".fm_levelSelectFootButBox a").bind("click",x)}else{q.remove()}f.css({"overflow-y":"auto"}).setRealSize(null,n.height);n.height-=y.outerHeight(true);s.css({"overflow-y":"auto"}).setRealSize(null,n.height);var J=s.find("ul").width();var I=Math.round(J/n.liWidth);n.liWidth=Math.floor((J-20)/I);y.css({position:"relative"});j=y.find(".slideBox");j.css({position:"absolute",bottom:"0px",top:"6px",left:"4px",right:"4px",overflow:"hidden"});y.find(".movebut").css({position:"absolute",top:"2px"});y.find(".movebut.prev").css({left:"2px"});y.find(".movebut.next").css({right:"2px"});F=k.data("part");F=F?F:r();var K=y.find("ul");K.find(">li").del();var H="";for(var G in F){H+=('<li rel="'+G+'">'+G.toUpperCase()+"</li>")}K.html(H);K.find(">li").bind("click",o).eq(0).toggleSelected();v=g(v);D(v);var p=k.data("lastPart");if(p){K.find(">li[rel='"+p+"']").toggleSelected();m(F[p],s.find(">ul"),b)}else{K.find(">li:eq(0)").toggleSelected();for(var G in F){m(F[G],s.find(">ul"),b);break}}t.container.css({visibility:"visible"});$(t).trigger("INSTALLED")};function C(){var p=trim(q.find("#fm_searchKey").val());if(p){E(p);var G=q.find("#clearSearchBut");if(G.length==0){G=$('<a id="clearSearchBut" class="but-red"><i class="fa fa-remove" /></a>');q.find("#startSearchBut").after(G);G.bind("click",d)}}else{d()}}function A(){y.find("ul >li.searchKeyLi").remove();q.find("#fm_searchKey").val("");q.find("#clearSearchBut").del()}function d(){A();for(var p in F){m(F[p],s.find(">ul"),b);break}}function E(H){var G=y.find("ul");var p=G.find(">li.searchKeyLi");if(p.length==0){p=$('<li class="searchKeyLi"></li>');G.prepend(p)}p.text('"'+H+'"').toggleSelected();var K=[];H=n.keySplit+H.toLowerCase();for(var I=0;I<z.length;I++){var J=z[I][n.keyField].toLowerCase();if(J.substr(0,n.keySplit.length)!=n.keySplit){J=n.keySplit+J}if((n.keySplit?(J.indexOf(H)>-1):(J.indexOf(H)==0))){K.push(I)}}m(K,s.find("ul"),b)}function x(){var p=$(this);var G={text:"",value:""};switch(p.attr("id")){case"selectOk":G=a(t.getSelectedArray());break;case"selectClear":w();break}(typeof h=="function")?h(G):$(t).trigger("SELECT_OK",{data:G});t.destroy()}function g(p){var H=[];if(p.value==""&&p.text==""){return H}else{try{p.text=JSON.parse(p.text);p.value=JSON.parse(p.value)}catch(I){p.text=(typeof p.text=="string")?p.text.split(","):p.text;p.value=(typeof p.value=="string")?p.value.split(","):p.value}for(var G=0;G<p.value.length;G++){H.push({text:p.text[G]||"",value:p.value[G]})}}return H}function r(){var L={};if(n.parts){var I=[];for(var H=0;H<n.parts.length;H++){if(typeof n.parts[H]=="string"){var N=n.parts[H].split("|");n.parts[H]=N}L[n.parts[H][0]]=[]}var p=n.keySplit?n.keySplit.length:0;for(var H=0;H<z.length;H++){var O=false;for(var G=0;G<n.parts.length;G++){var J=z[H][n.keyField].substr(p,n.parts[G][1].length);if(J&&n.parts[G][1].toLowerCase()==J.toLowerCase()){L[n.parts[G][0]].push(H);O=true}}if(!O){I.push(H)}}if(I.length>0){L["\u5176\u4ed6"]=I}return L}var M=[];if(!n.groupField){M.push("\u8bf7\u9009\u62e9");L["\u8bf7\u9009\u62e9"]=[];for(var H=0;H<z.length;H++){L["\u8bf7\u9009\u62e9"].push(H)
}}else{var p=n.keySplit?n.keySplit.length:0;if(z[0]&&z[0][n.groupField].indexOf(n.keySplit)==-1){p=0}for(var H=0;H<z.length;H++){var J=z[H][n.groupField].substr(p,1);J=J?J:"\u5176\u4ed6";if(L[J]){L[J].push(H)}else{L[J]=[H];M.push(J)}}M.sort()}var K={};for(var H=0;H<M.length;H++){K[M[H]]=L[M[H]]}k.data("part",K);return K}function o(){var G=$(this);if(!G.hasClass("nowid")){A();G.toggleSelected();var p=G.attr("rel");if(F[p]){k.data("lastPart",p);m(F[p],s.find(">ul"),b)}}}function m(K,I,H){if(!K){return}I.empty();var L=t.getSelectedArray();for(var J=0;J<K.length;J++){var G=z[K[J]];var p=$('<li  title="'+G.text+'"  rel="'+G.value+'" >'+G.text+"</li>");p.data("data",G);if($.getObjectInArray(L,"value",G.value)){p.addClass("checked")}I.append(p)}I.find("li").bind("click",H).setRealSize(n.liWidth)}function b(){var p=$(this);var G=p.data("data");if(p.hasClass("checked")){p.removeClass("checked");B(G);p=p.parent().find("li.checked:eq(0)");G=(p.length>0)?p.data("data"):null}else{(!n.mulit)?f.find(">ul >li").del():null;p.addClass("checked");c(G)}if(!n.mulit){var H=a(t.getSelectedArray());(typeof h=="function")?h(H):$(t).trigger("SELECT_OK",{data:H});t.destroy();return}}function a(I){var H={text:"",value:""};var J=n.format=="tree"?"textPath":"text";var G=n.format=="tree"?"valuePath":"value";for(var p=0;p<I.length;p++){if(I.text!=""&&I.value!=""){H.text+=(p>0?",":"")+I[p][J];H.value+=(p>0?",":"")+I[p][G]}}return H}this.getSelectedArray=function(){var p=[];f.find("ul >li").each(function(){var G=$(this);var H=G.data("data");p.push({text:H.text,value:H.value})});return p};function c(H){var G=f.find(">ul");var p=G.find(">li[rel='"+H.vlue+"']");if(p.length>0){p.toggleSelected("justAdd");return}p=$('<li title="'+H.text+'" rel="'+H.value+'" ><a><i class="fa fa-remove"></i></a>'+H.text+"</li>");p.data("data",H);G.append(p);p.toggleSelected("justAdd");p.find("a").one("click",l);q.find(">div.fm_levelSelectFootButBox >span").text(f.find("ul>li").length)}function B(p){f.find("ul >li").each(function(){var H=$(this);var G=H.data("data");if(G.value==p.value){H.addClass("todelete")}});f.find("ul >li.todelete").del();s.find("ul>li[rel='"+p.value+"']").removeClass("checked");q.find(">div.fm_levelSelectFootButBox >span").text(f.find("ul>li").length)}function D(G){f.find("ul>li").del();for(var p=0;p<G.length;p++){c(G[p])}}function w(){f.find("ul>li").del();s.find("ul>li").removeClass("checked");q.find(">div.fm_levelSelectFootButBox >span").text("0")}function l(){var p=$(this).parent();var G=p.data("data");B(G)}this.destroy=function(){if(t.container){t.container.del();t.container=null}}}function prepareForm(a){}function formatForm(a){a.find(".fm_mulitInputPart").autoAddFormPart();a.find("input.fm_popOutSelect:not(.fm_leaveit,.fm_replacedInput)").popOutSelect();a.find("input.fm_levelselect:not(.fm_leaveit,.fm_replacedInput),input.fm_partselect:not(.fm_leaveit,.fm_replacedInput)").assistantSelectInput();a.find("input[type=checkbox]:not(.fm_leaveit,.fm_replacedInput)").checkBox();a.find("input[type=radio]:not(.fm_leaveit,.fm_replacedInput)").checkRadio();a.find(".fm_uploadFile:not(.fm_leaveit,.fm_replacedInput),.fm_uploadPic:not(.fm_leaveit,.fm_replacedInput)").uploadButton();a.find(".fm_swfPicUpload:not(.fm_leaveit,.fm_replacedInput)").swfUploadButton();a.find(".fm_uploadFilesShow").showUploadFiles(a);a.find(".fm_uploadPicsShow").showUploadPics(a);a.find(".fm_voicePlay:not(.fm_leaveit,.fm_replacedInput)").Mp3Player();a.find(".fm_videoPlay:not(.fm_leaveit,.fm_replacedInput)").VideoPlayer();a.find("input.fm_dateinput:not(.fm_leaveit,.fm_replacedInput)").attr("readonly",true).DatePicker();a.find("input.fm_datepartinput:not(.fm_leaveit,.fm_replacedInput)").attr("readonly",true).DatePartPicker();a.find("input.fm_dateselectinput:not(.fm_leaveit,.fm_replacedInput)").attr("readonly",true).DateSelector();a.find("input[type=text]:not(.fm_leaveit,.fm_replacedInput),input[type=password]:not(.fm_leaveit,.fm_replacedInput),textarea:not(.fm_leaveit,.fm_replacedInput)").textInput();a.find(".fm_mulitInput").autoAddInput();a.find("select.fm_switchSelect:not(.fm_leaveit,.fm_replacedInput)").selectSwitch();a.find("select:not(.fm_leaveit,.fm_replacedInput)").selectInput();a.find(".fm_switchGroup").switchGroup()}function formatDetail(a){a.find("select").detailSelect();a.find(".fm_uploadPicsShow").uploadPicsDetail(a);a.find(".fm_uploadFilesShow").uploadFilesDetail(a);a.find(".fm_voicePlay:not(.fm_leaveit)").Mp3Player();a.find(".fm_videoPlay:not(.fm_leaveit)").VideoPlayer()}function htmlEditor(){var b=this;var a;this.editorOption={autoHeightMode:true,items:["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","flash","media","insertfile","table","hr","baidumap","pagebreak","anchor","link","unlink","|","about"],allowImageUpload:false,allowFileUpload:false,allowFlashUpload:false,allowMediaUpload:false,allowFileManager:false};
this.install=function(d,f,g){if(!KindEditor){return}b.editorOption.items=(typeof f=="object")?f:b.editorOption.items;if(g){b.editorOption.afterCreate=function(){this.loadPlugin("autoheight")}}var c=new Date();var e="editor"+d.attr("id")+c.getTime().toString()+Math.floor(Math.random()*1000);d.attr("id",e);a=KindEditor.create("#"+e,b.editorOption)};this.readonly=function(){a.readonly()};this.getEditor=function(){return a};this.sync=function(){a.sync()};this.html=function(c){if(c){a.html(c)}else{return a.html()}};this.getText=function(c){var d=a.text();d=delHtmlTag(d);d=delReturn(d);d=delBlank(d);d=c?d.substr(0,c):"";return d};this.insert=function(c){if(a){a.insertHtml(c)}};this.destroy=function(){if(a){a.remove();a=null}}}function TreeSelector(q,j,c,a,f){var d=this;var g=false;var l=true;this.install=function(){$.extend(j,{animate:true,checkbox:true,onCheck:r,onLoadSuccess:e,onExpand:h});if(!a){j.cascadeCheck=false}q.tree(j)};this.destroy=function(){if(q){q.del();q=null}c.clear()};function e(w,x){if(l){var s=q.tree("getRoot");q.tree("expand",s.target);l=false}if(!f){return}var p=f.values||{};var y=p.value;if(!y){return}y=y.split(",");var u=p.text.split(",");var t=[];o=true;for(var v=0;v<y.length;v++){if(y[v]){b(y[v]);t.push({text:u[v],value:y[v]})}}o=false;n(t);f=null}function h(s){if(a&&j.cascadeCheck&&!q.tree("isLeaf",s.target)){var p=s.checked;if(p){q.tree("check",s.target);g=false;k()}}q.scrollTo(s.target,300,{axis:"y"})}var o=false;function r(v,u){if(a&&j.cascadeCheck&&!q.tree("isLeaf",v.target)){if(u){q.tree("expand",v.target)}}if(o){return}var s=v.value;if(!a){o=true;var p=q.tree("getChecked");for(var t=0;t<p.length;t++){if(p[t].value!=s){q.tree("uncheck",p[t].target)}else{q.tree("check",p[t].target)}}o=false}k()}function k(){var p=q.tree("getChecked");var t=[];for(var s=0;s<p.length;s++){if(j.exceptNobranch){if((typeof p[s].children1)=="undefined"&&(typeof p[s].children)=="undefined"){t.push({value:p[s]["value"],text:p[s]["text"]})}}else{t.push({value:p[s]["value"],text:p[s]["text"]})}}n(t)}this.getSelected=function(){var s="";var p="";c.find("ul>li").each(function(){s+=$(this).attr("rel")+",";p+=$(this).text()+","});s=s.length>0?s.substr(0,s.length-1):s;p=p.length>0?p.substr(0,p.length-1):s;return{text:p,value:s}};function n(t){var p=$("<ul></ul>");c.clear();c.empty().append(p).append($('<div class="cl"></div>'));for(var s=0;s<t.length;s++){p.append($('<li rel="'+t[s]["value"]+'"><i class="fa fa-remove"></i> '+t[s]["text"]+"</li>"))}p.find("li i").bind("click",m)}function b(u){var p=q.tree("getChecked","unchecked");var t;for(var s=0;s<p.length;s++){if(p[s]["value"]==u){t=p[s];break}}if(t){q.tree("check",t.target)}}function m(){var u=$(this).parent().attr("rel");var p=q.tree("getChecked");var t;for(var s=0;s<p.length;s++){if(p[s]["value"]==u){t=p[s];break}}if(t){q.tree("uncheck",t.target)}$(this).parent().remove()}this.getParent=function(u){var s=q.tree("getRoot");var t=q.tree("getData",s.target);var v=function(w){var y=w.children;if(!y){return null}for(var x=0;x<y.length;x++){if(y[x]["value"]==u){return w;break}else{if(v(y[x])){return y[x]}}}return null};var p=v(t);return p?{text:p.text,value:p.value}:null};this.install()}(function(a){a.fn.form=function(b,h,g){var e=creatPostParam(b.event,h,null,g);var d=a(this).eq(0);var f=d.getDataOptions();f=f?f:{};a.extend(f,b);var c=d.attr("action");f.submitUrl=f.submitUrl?f.submitUrl:c;return new StandarForm(d,f,e)};a.fn.detail=function(b,g,f){var d=creatPostParam(b.event,g,null,f);var c=a(this).eq(0);var e=c.getDataOptions();e=e?e:{};a.extend(e,b);return new StandarDetail(c,e,d)}})(jQuery);function formDeal(a){var b=this;this.formData={};this.parse=function(d){a.addClass("formatedForm");if(a.is("form")){$(a).bind("submit",function(){return false})}prepareForm(a);var c=function(){$(b).trigger("HTML_BEFORE_FORMAT",{formobj:a});formatForm(a);a.css("visibility","inherit");$(b).trigger("HTML_FORMATED");if(typeof d=="function"){d()}};b.loadSelectListData(a,c)};this.bindData=function(c){a.bindJsonData(c);b.formData=c};this.getData=function(){var c=a.serializeJson();for(var d in c){if(c[d]=="loading..."){c[d]=""}}return c};this.check=function(c){return a.checkForm(c)};this.clear=function(){a.find("input,textarea").each(function(){var c=$(this);if(c.attr("type")=="radio"||c.attr("type")=="checkbox"){c.get(0).checked=false;c.change()}else{if(c.attr("type")!="file"){c.val("").change()}}})};this.loadSelectListData=function(d,h){var e=0;var g=0;var c=false;var f=function(){g++;if(c&&g>=e){if(h!=null){h()}}};d.find("select").each(function(){var k=$(this);var j=k.dataOptions();j.inputable?k.addClass("inputableSelect"):null;j.mulit?k.attr("multiple","multiple"):null;if(!k.hasClass("fm_noAutoPost")&&j.url){if(k.find("option").length<1){e++;k.empty();ajaxGetSelectOption(k,"select",f,j)}}});d.find("input[type=radio],input[type=checkbox]").each(function(){var k=$(this);var l=k.dataOptions();if(!$(this).hasClass("fm_noAutoPost")&&l.url){var j=k.attr("name");if(d.find("input[name="+j+"]").length==1){e++;
ajaxGetSelectOption(k,k.attr("type"),f,l)}}});d.find("input[type=text].fm_forselect").each(function(){var j=$(this);var k=j.dataOptions();if(!j.hasClass("fm_noAutoPost")&&k.url){e++;ajaxGetSelectOption(j,j.attr("type"),f,k)}});c=true;if(g>=e){if(h!=null){h()}}}}function StandarForm(b,e,a){var g=this;var f;var h;this.form;var d=creatPostParam("FORM");this.install=function(){f=new formDeal(b);g.form=f;f.parse(function(){c(a)})};this.getInputData=function(){return f.getData()};this.formData=function(){return f?f.formData:null};function c(j){d=j?cloneJson(j):d;if(!e.url||e.addNew){$(g).trigger("FORM_LOADED");return}j.extend=$.extend(j.extend,{eventswitch:"load"});h=new AJAXObj();$(h).unbind().one("JSON_LOADED",function(l,k){f.bindData(k.value);$(g).trigger("FORM_LOADED")});h.POSTDATA(e.url,j)}this.reload=function(k){var j=(typeof k=="object")?k:d;c(j)};this.bindData=function(j){f.bindData(j)};this.clear=function(){if(f){f.clear()}};this.submit=function(k,n,p){if(f.check(k)){var m=function(q){$(g).trigger("FORM_SAVE_ERROR")};var l=function(r,q){$(g).trigger("FORM_SAVED",{data:q})};var o=f.getData();if(n){$.extend(o,n)}$(g).trigger("FORM_BEFORE_SAVE");var j=cloneJson(d);j.event=e.submitEvent?e.submitEvent:j.event;j.extend=$.extend(j.extend||{},{eventswitch:"save"});j.content=j.content?j.content:{condition:{},value:{}};j.content["value"]=$.extend(j.content["value"]||{},o);j.content["condition"]=$.extend(j.content["condition"]||{},p);h=new AJAXObj();$(h).unbind().one("JSON_LOADED",l).one("SYS_ERROR",m);h.POSTDATA(e.submitUrl||e.url,j)}else{}};this.destroy=function(){if(h){try{h.destroy()}catch(j){}h=null}}}function detailDeal(a){var b=this;this.formData={};this.parse=function(e){a.addClass("formatedForm hideSelect");var c=function(){a.find("input.fm_voicePlay,input.fm_videoPlay").each(function(){var g=$(this);var f=$('<span id="'+g.attr("name")+'" class="'+g.attr("class")+'">'+g.val()+"</span>");g.after(f).remove()});a.find("input.fm_popOutSelect,input.fm_levelselect,input.fm_partselect").each(function(){var g=$(this);var f=$('<span id="'+g.attr("name")+'_text">'+g.val()+"</span>");g.after(f).remove()});a.find("input[type=text],textarea,select.inputableSelect").each(function(){var g=$(this);var f=$('<span id="'+g.attr("name")+'">'+g.val()+"</span>");g.after(f).remove()});a.find("input[type=checkbox]:not(.fm_leaveit,.fm_replacedInput)").attr("readonly","readonly").checkBox();a.find("input[type=radio]:not(.fm_leaveit,.fm_replacedInput)").attr("readonly","readonly").checkRadio();a.css("visibility","inherit");$(b).trigger("HTML_FORMATED");if(typeof e=="function"){e()}};var d=new formDeal(a);d.loadSelectListData(a,c)};this.bindData=function(c){a.bindJsonData(c);b.formData=c;formatDetail(a)}}function StandarDetail(b,e,a){var g=this;var f;var h;var d=creatPostParam("DETAIL");this.install=function(){f=new detailDeal(b);f.parse(function(){c(a)})};this.formData=function(){return SubmitForm?SubmitForm.formData:null};function c(j){d=j?cloneJson(j):d;if(!e.url){$(g).trigger("DETAIL_LOADED");return}j.extend=$.extend(j.extend,{eventswitch:"load"});h=new AJAXObj();$(h).one("JSON_LOADED",function(l,k){f.bindData(k.value);$(g).trigger("DETAIL_LOADED")});h.POSTDATA(e.url,j)}this.reload=function(k){var j=(typeof k=="object")?k:d;c(j)};this.destroy=function(){if(h){try{h.destroy()}catch(j){}h=null}}}(function(a){a.fn.swfUploadButton=function(){a(this).each(function(){installFlashPicUpload(a(this),"",swfPath)})}})(jQuery);var GLOBALSWFUPLOADOR;function installFlashPicUpload(c,a,b){if(!GLOBALSWFUPLOADOR){GLOBALSWFUPLOADOR=new flashUpLoad("GLOBALSWFUPLOADOR",b)}c.each(function(){var e=$(this);var j=e.dataOptions();var d=e.width();var g=d<30?"":d<80?"\u4e0a\u4f20":"\u4e0a\u4f20\u56fe\u7247";var k=$('<label class="fm_formitemwraper"><a class="inFormBut">'+(j.butTitle?j.butTitle:('<i class="fa fa-photo"></i>'+g))+"</a></label>");e.after(k).attr("type","hidden").hide();k.find("a").setRealSize(d);var f=function(m){e.attr("disabled",m);(m)?k.find("a").addClass("disabled"):k.find("a").removeClass("disabled")};var h=function(m){e.attr("readonly",m);(m)?k.find("a").addClass("readonly"):k.find("a").removeClass("readonly")};var l=function(){if(j.mulit&&j.maxupload){var m=e.val();var n=(!m)?[]:m.split(",");if(n.length>=j.maxupload){h(true);e.data("max",true)}else{h(false);e.data("max",false)}}};f(e.attr("disabled")==true||e.attr("disabled")=="disabled");h(e.attr("readonly")==true||e.attr("readonly")=="readonly");e.data({disableFun:f,readonlyFun:h,checkMaxFun:l});l();k.bind("click",function(){if(e.data("max")){$.message("\u6700\u591a\u53ef\u4e0a\u4f20"+j.maxupload+"\u5f20\u56fe\u7247",3000);return}if(k.find("a").isDisabled()||k.find("a").isReadonly()){return}var m=j.url;if(!m){return}m+=(m.indexOf("?")>-1)?"&":"?";m+="event="+e.attr("name");GLOBALSWFUPLOADOR.showUpLoad(j,m,function(p){GLOBALSWFUPLOADOR.destroy();var o=a+p.value["filename"];if(j.mulit){var n=e.val();e.val((n?n+",":"")+o)}else{e.val(o)}e.change();$(e).trigger("UPLOADED",p.value);l()})})})
}function flashUpLoad(e,d){this.config={swffile:"asupload.swf",picsize:[800,600],bground:"0xffffff",haveSmall:false,smallPicSize:0.25,editSize:true};var j;var b;var h;var c=this;var g;var f;this.showUpLoad=function(l,k,m){if(!e){$.alert("swfClass is undefined!");return}g=k;if(l){$.extend(this.config,l)}j=m;f="UploadSwf_"+e;a(f);h=this.getswf(f)};function a(k){if(b){b.del();b=null}b=$('<div><div id="'+k+'"></div></div>');b.css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":199999});$("body").append(b);swfobject.embedSWF(d+c.config.swffile,k,"100%","100%","10.2.0",d+"expressInstall.swf",{swfid:e},{quality:"high"});swffit.fit(k,800,600)}this.getswf=function(k){if(navigator.appName.indexOf("Microsoft")!=-1){return window[k]}else{return document[k]}};this.creatConfig=function(){var k=$.extend({classid:e,upurl:g,win_w:b.width(),win_h:b.height()},c.config);return JSON.stringify(k)};this.swfStatus=function(n){var k=JSON.parse(n);switch(k.type){case"getConfig":return c.creatConfig();break;case"uploadError":break;case"uploadOk":var l=k.data;try{if(typeof j=="function"){j(l)}}catch(m){}c.destroy();break;case"destroy":c.destroy();break}};this.destroy=function(){try{f?swfobject.removeSWF(f):null}catch(k){console.log(k)}b.del();b=null}}function MAjaxUpload(l,b){var a=this;var c;var j;var k;var h=false;var g=false;var e=framePos+"frame/blankpage.html";function d(){k=$('<div class="fm_AjaxUpLoadWraper"></div>');k.css({position:"absolute","z-index":-1,width:"1px",height:"1px",visibility:"hidden",overflow:"hidden"});$("body").append(k);var n="uploadFrom_"+new Date().getTime()+"_"+Math.floor(1000*Math.random());j=$('<iframe id="'+n+'" name="'+n+'" width="1" height="1" src="'+e+'"></iframe>');c=$('<form action="'+b+'" target="'+n+'" method="post" enctype="multipart/form-data"></form>');k.append(j).append(c);j.unbind().one("load",function(){j.unbind().one("load",f);c.submit()});var m=l.clone();l.before(m);c.append(l)}this.destroy=function(){if(j){j.unbind();j.del();j=null}if(c){c.del();c=null}if(k){k.del();k=null}};this.upLoad=function(){a.destroy();d()};function f(){var o=j.get(0);var m;try{if(o.contentWindow){m=o.contentWindow.document.body?o.contentWindow.document.body.innerHTML:null}else{if(o.contentDocument){m=o.contentDocument.document.body?o.contentDocument.document.body.innerHTML:null}}m=trim(m);if(m.indexOf("<")==0){m=$(m).text()}m=m?JSON.parse(trim(m+"")):null;$(a).trigger("UPLOAD_COMPLETE",m)}catch(n){$(a).trigger("UPLOAD_ERROR",{msg:"\u4e0a\u4f20\u9519\u8bef",data:n})}a.destroy()}}(function(a){a.fn.uploadButton=function(){a(this).each(function(){a(this).creatUploadButton()})};a.fn.creatUploadButton=function(){var s=a(this);var f=s.hasClass("fm_uploadPic");var m=s.dataOptions();var e="";if(m.extName){m.extName=(typeof m.extName=="string")?m.extName.split(","):m.extName}s.data("type","upload");var d=s.width();var h=a('<label class="fm_formitemwraper fileUpBox"><div><a class="inFormBut"></a></div></label>');s.attr("typ","hidden").after(h).addClass("fm_replacedInput").css({"float":"left"}).hide();h.append(s);var v;var p=h.find("div");var r=h.find("a");r.css({position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px"});p.css({padding:"0px",margin:"0px",overflow:"hidden",height:r.outerHeight(true)+"px"});if(m.mulit||m.cssstyle||m.button){if(m.cssstyle){h.addClass(m.cssstyle)}}else{r.css({width:"72px",border:"none","border-right":"1px solid #DDD","border-radius":"0px",padding:"0px"});p.css({position:"relative",overflow:"hidden",height:r.outerHeight(true)+"px"}).addClass("uploadWraper");var g=a('<a class="inFormBut"><i class="fa fa-remove"></i></a>');g.css({position:"absolute",width:"20px",top:"0px",right:"0px",overflow:"hidden","border-radius":" 0px",padding:"0px",margin:"0px",border:"none","border-left":"1px solid #DDD"}).attr("title","\u6e05\u7a7a");p.append(g);v=a("<dd></dd>");p.append(v);v.css({position:"absolute",width:(d-76-20-2)+"px",height:"21px",top:"0px",left:"74px",overflow:"hidden","border-radius":" 0px",padding:"0px",margin:"0px"});g.bind("click",function(x){if(s.attr("disabled")==true||s.attr("disabled")=="disabled"||s.attr("readonly")==true||s.attr("readonly")=="readonly"){return}v.text("");s.val("").change();stopPP(x);return false})}p.setRealSize(d);var n;var c;var q;var k=function(){if(m.mulit&&m.maxupload){var x=s.val();var y=(!x)?[]:x.split(",");if(y.length>=m.maxupload){q.attr("disabled",true).hide();s.data("max",true);r.bind("click",function(){a.message("\u6700\u591a\u53ef\u4e0a\u4f20"+m.maxupload+"\u4e2a\u6587\u4ef6\u3002",3000)})}else{q.attr("disabled",false).show();s.data("max",false);r.unbind("click")}}};var l=function(){if(q){q.remove();q=null}h.find("[name=temp_uploadinput]").del();c="uploadFileInput"+(new Date().getTime()+Math.floor(1000*Math.random())).toString();q=a('<input type="file" name="temp_uploadinput" id="'+c+'"/>');p.css({position:"relative"});p.prepend(q);if(m.mulit||m.button){q.css({position:"absolute",top:"0px",right:"0px","z-index":5,opacity:0.01,"font-size":5*a(window).width()+"px",cursor:"pointer",padding:"10px"})
}else{q.css({position:"absolute",top:"0px",right:"24px","z-index":5,opacity:0.01,"font-size":5*a(window).height()+"px",cursor:"pointer",padding:"10px"})}};var o=function(z){if(n){a(n).unbind();n.destroy();n=null}var x=h.width();if(z){l();q.show();var y=x<30?"":x<80?"\u4e0a\u4f20":("\u4e0a\u4f20"+(f?"\u56fe\u7247":"\u6587\u4ef6"));r.html(m.butTitle?m.butTitle:('<i class="fa fa-arrow-circle-up"></i>'+y));q.unbind().bind("change",j)}else{if(q){q.hide();var y=x<70?"":" \u4e0a\u4f20\u4e2d...";r.html('<i class="fa fa-spinner fa-spin fa-fw"></i>'+y);q.unbind()}}};var w=function(x,y){a.message("\u4e0a\u4f20\u5931\u8d25: "+(y.msg||""),2000);a(s).trigger("UPLOAD_ERROR");o(true)};var u=function(y,A){if(A.head["code"]+""=="1"){if(m.mulit||m.cssstyle){var x=s.val();s.val((x?x+",":"")+A.value["filename"])}else{s.val(A.value["filename"]);if(v){var z=A.value["filename"];if(z.indexOf("/")>0){z=z.split("/");z=z[z.length-1]}v.text(z).attr("title",z)}}a(s).trigger("UPLOADED",a.extend(A.value,{oldName:e}));s.change()}else{w(null,{msg:A.head["message"]})}o(true);k()};var j=function(){if(s.data("max")){a.message("\u6700\u591a\u53ef\u4e0a\u4f20"+m.maxupload+"\u4e2a\u6587\u4ef6\u3002",3000);return}if(s.attr("disabled")==true||s.attr("disabled")=="disabled"||s.attr("readonly")==true||s.attr("readonly")=="readonly"){a.alert("\u7981\u6b62\u4e0a\u4f20");return}e=q.val();if(m.extName){var x=e.split(".");x=(x.length>1)?x[x.length-1]:"";x=x?x.toLowerCase():x;if(!x||!inArray(m.extName,x)){a.message("\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e!",2000);return}}o(false);n=new MAjaxUpload(q,m.url);a(n).one("UPLOAD_COMPLETE",u).one("UPLOAD_ERROR",w);n.upLoad()};var b=function(x){s.attr("disabled",x);q?q.attr("disabled",x):null;(x)?p.addClass("disabled"):p.removeClass("disabled")};var t=function(x){s.attr("readonly",x);q?q.attr("disabled",x):null;(x)?p.addClass("readonly"):p.removeClass("readonly")};b(s.attr("disabled")==true||s.attr("disabled")=="disabled");t(s.attr("readonly")==true||s.attr("readonly")=="readonly");s.data({disableFun:b,readonlyFun:t,checkMaxFun:k});o(true);k()}})(jQuery);(function(a){a.fn.showUploadPics=function(b){b=b?b:a("body");a(this).each(function(){a(this).creatUploadPic(b)})};a.fn.creatUploadPic=function(d){var b=a(this);var c=a("<ul></ul>");b.empty().append(c).append(a('<div class="cl"></div>'));var h=b.dataOptions();h.width=h.width>0?h.width:120;h.height=h.height>0?h.height:90;var g=d.find("[name="+h.rel+"],[id="+h.rel+"]").eq(0);var e=function(){var m="";c.find("li").each(function(){m+=a(this).data("url")+","});if(m.length>0){m=m.substr(0,m.length-1)}return m};var f=function(){var m=a(this).parent().parent();var n=m.data("url");var p=a(this).attr("id");m.del();a(g).unbind("change",j);var o=e();g.val(o);j();a(g).bind("change",j);if(typeof g.data("checkMaxFun")=="function"){g.data("checkMaxFun")()}a(g).trigger("UPLOAD_ACTION",{event:"DELETE",url:n})};var k=function(){var m=a(this).parent().parent();a(g).trigger("UPLOAD_ACTION",{event:a(this).attr("id"),url:m.data("url")})};var l=function(){var m=a(this).parent().parent();switch(a(this).attr("id")){case"movepicright":m.next().after(m);break;case"movepicleft":m.prev().before(m);break}var n=e();a(g).unbind("change",j);(a(g).is("input"))?g.val(n):g.text(n);a(g).bind("change",j);a(g).trigger("UPLOAD_ACTION",{event:"ORDER",url:m.data("url")})};var j=function(){var s=(a(g).is("input"))?g.val():g.text();s=s.replace("base64,","##BASE64Flag##");var r=s.split(",");c.empty();if(s==""||r.length==0){if(h.hideBlank==true){b.hide()}else{b.show();var m=a('<li class="blankUpload">\u672a\u4e0a\u4f20</li>');c.append(m);m.width(h.width-2).height(h.height-2)}}else{b.show();for(var q=0;q<r.length;q++){var p=r[q];var o=null;if((r[q].indexOf("||")>0)){var n=r[q].split("||");p=n[0];o=n[1]?' title="'+n[1]+'"':""}r[q]=r[q].replace("##BASE64Flag##","base64,");var m=a('<li><img src="'+p+'" '+o+'/><div class="butbox">'+(h.addbuts?'<i class="'+(h.addbuts["class"]||"")+' addpicbuts"  id="'+h.addbuts["id"]+'"   title="'+(h.addbuts["title"]||"")+'"></i>':"")+(h.chgorder?'<i class="fa fa-caret-left setpicorder"  id="movepicleft"  title="\u5411\u524d\u79fb\u52a8"></i><i class="fa fa-caret-right setpicorder" id="movepicright"  title="\u5411\u540e\u79fb\u52a8"></i>':"")+(h.editable?'<i class="fa fa-remove" id="delpic" title="\u5220\u9664\u56fe\u7247"></i>':"")+"</div></li>");m.css({position:"relative",overflow:"hidden"}).data({url:p,title:o});m.width(h.width).height(h.height);c.append(m)}c.find("li").fitImg();c.find("li>div").ZoomBigPic();c.find("li i#delpic").one("click",f);c.find("li i.setpicorder").bind("click",l);c.find("li i.addpicbuts").bind("click",k)}};j();if(a(g).is("input")){a(g).bind("change",j)}};a.fn.uploadPicsDetail=function(b){a(this).each(function(){a(this).creatPicsDetail(b)})};a.fn.creatPicsDetail=function(d){var b=a(this);var c=a("<ul></ul>");b.empty().append(c).append(a('<div class="cl"></div>'));var h=b.dataOptions();if(!h.rel){return}h.width=h.width>0?h.width:120;h.height=h.height>0?h.height:90;
var f=d.find("[name="+h.rel+"],[id="+h.rel+"]").eq(0);if(f.length==0){return}f.hide();var j=f.text()||f.val();var e=j.split(",");if(j==""||e.length==0){if(h.hideBlank==true){b.hide()}else{b.show();var k=a('<li class="blankUpload">\u672a\u4e0a\u4f20</li>');k.width(h.width).height(h.height);c.append(k)}}else{for(var g=0;g<e.length;g++){if(e[g]){var k=a('<li><img src="'+e[g]+'" />'+(h.editable?'<i class="fa fa-remove"></i>':"")+"</li>");k.css({position:"relative",overflow:"hidden"}).data("url",e[g]);k.width(h.width-2).height(h.height-2);c.append(k)}}c.find("li").fitImg();c.find("li>div").ZoomBigPic()}};a.fn.showUploadFiles=function(b){a(this).each(function(){a(this).creatUploadFile(b)})};a.fn.creatUploadFile=function(d){var b=a(this);var c=a("<ul></ul>");b.empty().append(c).append(a('<div class="cl"></div>'));var g=b.dataOptions();var f=d.find("[name="+g.rel+"],[id="+g.rel+"]").eq(0);var e=function(){if(f.isDisabled()||f.isReadonly()){return}var l=a(this).parent().data("url");a(f).unbind("change",h);var m=f.val();m=m.replace(","+l,"").replace(l+",","").replace(l,"").replace(/\,\,/g,",");f.val(m);a(this).parent().remove();h();a(f).bind("change",h);a(f).trigger("UPLOAD_ACTION",{event:"DELETE",url:l})};var j=function(){var l=a(this).parent();a(f).trigger("UPLOAD_ACTION",{event:a(this).attr("id"),url:l.data("url")})};var k=function(l){l=l.split("/");l=l[l.length-1];l=l.split("?")[0];l=l.split("&")[0];return l};var h=function(){var r=(a(f).is("input"))?f.val():f.text();var q=r.split(",");c.empty();if(r==""||q.length==0){if(g.hideBlank==true){b.hide()}else{b.show();var l=a('<li class="blankUpload">\u672a\u4e0a\u4f20</li>');c.append(l)}}else{b.show();for(var o=0;o<q.length;o++){var n=q[o];var p=null;if((q[o].indexOf("||")>0)){var m=q[o].split("||");n=m[0];p=m[1]?' title="'+m[1]+'"':""}var l=a("<li>"+(g.addbuts?'<i class="'+(g.addbuts["class"]||"")+' addfilebuts"  id="'+g.addbuts["id"]+'"   title="'+(g.addbuts["title"]||"")+'"></i>':"")+(g.editable?'<i class="fa fa-remove" id="delFile" title="\u5220\u9664\u6587\u4ef6"></i> ':"")+'<a href="'+n+'" target="blank" '+p+">"+(g.cuturl?k(n):("\u6587\u4ef6\u4e0b\u8f7d"+(o+1)))+"</a></li>");l.data({url:n,title:p});c.append(l)}c.find("li i#delFile").one("click",e);c.find("li i.addfilebuts").bind("click",j)}};h();a(f).bind("change",h)};a.fn.uploadFilesDetail=function(b){a(this).each(function(){a(this).creatFilesDetail(b)})};a.fn.creatFilesDetail=function(c){var b=a("<ul></ul>");a(this).empty().append(b).append(a('<div class="cl"></div>'));var g=a(this).dataOptions();var e=c.find("[id="+g.rel+"]").eq(0);e.hide();var h=(a(e).is("input"))?e.val():e.text();var d=h.split(",");if(h==""||d.length==0){var k=a('<li class="blankUpload">\u65e0\u4e0a\u4f20</li>');b.append(k)}else{var j=function(l){l=l.split("/");l=l[l.length-1];l=l.split("?")[0];l=l.split("&")[0];return l};for(var f=0;f<d.length;f++){if(d[f]){var k=a('<li><a href="'+d[f]+'" target="blank">'+(g.cuturl?j(d[f]):("\u6587\u4ef6\u4e0b\u8f7d"+(f+1)))+"</a></li>");k.css({position:"relative",overflow:"hidden"}).data("url",d[f]);b.append(k)}}}}})(jQuery);function importUpload(c){var b=this;var k;var d;var o;var f;var a;var g;var h="";this.install=function(){k=$.extend({},c.dataOptions());if(k.extName){k.extName=(typeof k.extName=="string")?k.extName.split(","):k.extName}d=c.outerWidth();o=c.outerHeight();n(true)};function m(){if(g){$(g).unbind();g.destroy();g=null}if(a){a.del();a=null}f="uploadFileInput"+(new Date().getTime()+Math.floor(1000*Math.random())).toString();a=$('<input type="file" name="temp_uploadinput" id="'+f+'"/>');c.css({position:"relative"});c.prepend(a);a.css({position:"absolute",top:"0px",right:"0px",width:d+"px","font-size":"1000px","z-index":5,opacity:0.01})}function l(q,p){$.loaded();$(b).trigger("UPLOAD_COMPLETE",{data:$.extend(p,{oldName:h})});n(true)}function j(q,p){$.loaded();$.message("\u4e0a\u4f20\u5931\u8d25",2000);$(b).trigger("UPLOAD_ERROR");n(true)}function n(p){if(p){m();a.show();a.unbind().bind("change",e)}else{if(a){a.hide();a.unbind()}}}function e(){h=a.val();if(k.extName){var p=h.split(".");p=(p.length>1)?p[p.length-1]:"";p=p?p.toLowerCase():p;if(!p||!inArray(k.extName,p)){$.message("\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e!",2000);return}}$.loading(30000,true);n(false);g=new MAjaxUpload(a,k.url);$(g).one("UPLOAD_COMPLETE",l).one("UPLOAD_ERROR",j);g.upLoad()}this.destroy=function(){$.loaded();if(g){$(g).unbind();g.destroy();g=null}if(a){a.unbind();a.del();a=null}c.unbind()};this.install()}function ListView(b,k,j){var e=this;var l;var f=[];this.disabled=false;this.option={classStyle:{checked:"checked",active:"nowid",disabled:"disabled"},enableCheck:false,mulitCheck:false,pageconfig:{},htmlFormatFun:null,actionFormatFun:null};var q;var g;this.Pager=k;this.page=1;var d=10;var a;var o={prev_show_always:true,next_show_always:true,items_per_page:20,prev_text:'<i class="fa fa-chevron-left" />',countText:true,num_display_entries:5,ellipse_text:'<i class="fa fa-ellipsis-h"/>',num_edge_entries:2,next_text:'<i class="fa fa-chevron-right" />'};
this.install=function(p){b=b.eq(0);$.extend(e.option,j||{});$.extend(o,e.option.pageconfig);l=p?(typeof p=="object")?p:$(p):b.find(">*").eq(0).clone(true);b.empty();if(k){k.empty()}};this.destroy=function(){if(a){a.destroy();loader=null}if(b){b.clear()}};this.chgTemplete=function(p,s){l=p.clone(true);if(s&&s.length>0){if(b){b.clear();b.hide()}b=s.eq(0);b.show()}e.bindData(f)};this.load=function(p,u,t,s){d=o.items_per_page||20;t?e.option.htmlFormatFun=t:null;s?e.option.actionFormatFun=s:null;q=p;g=u?u:{};e.reload(u)};function n(){h(null,true)}this.reload=function(p){e.page=1;h(p,false)};this.resetPageCount=function(p){if(d==p){return}d=p?p:d;e.reload()};this.refresh=function(){h(g,false)};function h(s,p){g=s?s:g;g.extend=g.extend?g.extend:{};e.Pager?g.extend["page"]=e.page:null;e.Pager?g.extend["rows"]=d:null;if(a){a.destroy();a=null}a=new AJAXObj();$(a).bind("JSON_LOADED",function(v,t){var u=t.value["rows"];e.bindData(u);if(!p){e.creatPager(t.value["total"])}$(e).trigger("LOADED")}).bind("SYS_ERROR",function(t,u){$(e).trigger("LOAD_ERROR",u)});a.POSTDATA(q,$.extend({},g))}this.creatPager=function(s){if(!e.Pager){return}if(!s){e.Pager.empty();return}var t=Math.ceil(s/d);var p=$.extend({selelct_callback:r,items_total_show:"\u5171"+s+"\u6761\u8bb0\u5f55 / "+t+"\u9875 "+d+"\u6761/\u9875",current_page:e.page},o);e.Pager.fm_pager(s,p)};function r(p){e.page=p;if(q){n()}$(e).trigger("LISTVIEW_PAGE",{page:e.page,rows:d})}function c(p){var s=$.extend(true,{},p);if(typeof e.option.htmlFormatFun=="function"){return e.option.htmlFormatFun(s)}return s}this.bindData=function(t){b.empty();t=(t&&t.length>0)?t:[];f=t;for(var s=0;s<t.length;s++){var p=m(t[s]);b.append(p)}};this.enableCheck=function(p){e.option.enableCheck=(p==false?false:true)};this.findRowData=function(t,s){for(var p=0;p<f.length;p++){if(f[p][t]==s){return f[p];break}}return null};this.find=function(t,s){for(var p=0;p<f.length;p++){if(f[p][t]==s){return f[p]["liObject"];break}}return null};this.update=function(y,w,s,x){for(var v=f.length-1;v>=0;v--){if(f[v][y]==w){var u;if(x){u=$.extend({},f[v],s)}else{u=s}var p=m(u);var t=f[v]["liObject"].attr("class");p.attr("class",t);f[v]["liObject"].after(p);f[v]["liObject"].unbind().remove();f.splice(v,1,u)}}};this.findRow=function(p){if(f[p]){return f[p]["liObject"]}return null};this.removeOneRow=function(p){if(f[p]){f[p]["liObject"].unbind().remove();f.splice(p,1)}};this.removeRowsFrom=function(p){if(f.length-1<p){return}for(var s=f.length-1;s>=p;s--){e.removeOneRow(s)}};this.removeRowsBefore=function(p){var s=0;while(s<p&&f.length>0){e.removeOneRow(0);s++}};this.removeRowsLast=function(p){var s=0;while(s<p&&f.length>0){e.removeOneRow(f.length-1);s++}};this.findAndRemove=function(t,s){for(var p=f.length-1;p>=0;p--){if(f[p][t]==s){f[p]["liObject"].unbind().remove();f[p]["liObject"]=null;f.splice(p,1)}}};this.findAndCheck=function(t,s,u){if(u||!e.option.mulitCheck){b.find(">."+e.option.classStyle["checked"]).removeClass(e.option.classStyle["checked"])}for(var p=f.length-1;p>=0;p--){if(f[p][t]==s){f[p]["liObject"].addClass(e.option.classStyle["checked"]);if(u||!e.option.mulitCheck){return;break}}}};this.findAndUncheck=function(t,s){for(var p=f.length-1;p>=0;p--){if(f[p][t]==s){f[p]["liObject"].removeClass(e.option.classStyle["checked"])}}};this.findAndDisabled=function(t,s){for(var p=f.length-1;p>=0;p--){if(f[p][t]==s){f[p]["liObject"].addClass(e.option.classStyle["disabled"])}}};this.findAndUnDisabled=function(t,s){for(var p=f.length-1;p>=0;p--){if(f[p][t]==s){f[p]["liObject"].removeClass(e.option.classStyle["disabled"])}}};this.uncheckAll=function(){for(var p=f.length-1;p>=0;p--){f[p]["liObject"].removeClass(e.option.classStyle["checked"])}};this.CheckAll=function(){for(var p=f.length-1;p>=0;p--){f[p]["liObject"].addClass(e.option.classStyle["checked"])}};this.getChecked=function(){var s=[];for(var p=0;p<f.length;p++){if(f[p]["liObject"].hasClass(e.option.classStyle["checked"])){var t=$.extend(true,{},f[p]);delete t.liObject;s.push(t)}}return s};this.getCheckedRows=function(){return b.find(e.option.classStyle["checked"])};this.insert=function(t,s){var p=m(t);if(s==null||s>=b.find(">*").length){b.append(p);f.push(t)}else{b.find(">*:eq("+s+")").before(p);f.splice(s,0,t)}return p};this.ScrollTo=function(t,s){var p=b.find(">*").eq(s);t.scrollTo(p,300)};this.ScrollToLi=function(s,p){s.scrollTo(p,300)};this.changeTemplete=function(p){l=p;e.reload()};this.getTemplete=function(){return l.clone(true)};function m(s){var t=c(s);var p=l.clone(true);p.bindJsonData(t,true);p.data("data",s).attr("dir","ltr");if(typeof e.option.actionFormatFun=="function"){e.option.actionFormatFun(p)}s.liObject=p;p.bind("click",function(v){if(e.disabled||p.hasClass(e.option.classStyle["disabled"])){return}b.find(">."+e.option.classStyle["active"]).removeClass(e.option.classStyle["active"]);p.addClass(e.option.classStyle["active"]);if(e.option.enableCheck){if(p.hasClass(e.option.classStyle["checked"])){p.removeClass(e.option.classStyle["checked"])}else{if(!e.option.mulitCheck){b.find(">."+e.option.classStyle["checked"]).removeClass(e.option.classStyle["checked"])
}p.addClass(e.option.classStyle["checked"])}}var u=cloneJson(s);delete u.liObject;$(e).trigger("LI_CLICKED",{data:u,item:p,event:v})});return p}this.getData=function(s){var t=[];for(var p=0;p<f.length;p++){var u=$.extend(true,{},f[p]);if(s!=true){delete u.liObject}t.push(u)}return t};this.getRowsCount=function(){return f.length};this.install()}(function(a){a.fn.RightPopMenu=function(b){a(this).bind("contextmenu",function(c){popOutRightMenu(c,b)})};a.fn.RightMenu=function(c,d){var b=creatDefaultRightMenu(c,d);a(this).bind("contextmenu",function(f){popOutRightMenu(f,b)})};a.extend({hideRightMenu:function(){a(".fm_RightMenuWraper:gt(0)").del();a(".fm_RightMenuWraper").hide()},destroyRightMenu:function(){var b=a(".fm_RightMenuWraper");b.unbind().del();b=null}})})(jQuery);function popOutRightMenu(c,a){var h=false;var b=$('<div class="fm_RightMenuWraper"></div>');$("body").prepend(b);var g=c.pageX-2;var d=c.pageY-2;var f=typeof a=="function"?a():typeof a=="string"?$(a):a;b.append(a).show();$(".fm_RightMenuWraper:gt(0)").del();b.css({position:"absolute",top:d+"px",left:g+"px"});b.find("input,textarea,select").bind("focus",function(){h=true}).bind("blur",function(){h=false});b.unbind().bind("mouseleave",function(){if(h){return}b.unbind().hide()});b.bind("mousewheel",function(j){j.stopPropagation();j.preventDefault();return false});c.stopPropagation();c.preventDefault();return false}function creatDefaultRightMenu(b,e){var d=$('<div class="fm_rightMenuContainer"></div>');for(var a=0;a<b.length;a++){var c=$("<p>"+b[a]+"</p>");d.append(c)}if(typeof e=="function"){d.find(">p").bind("click",function(){e({index:$(this).index(),title:$(this).text(),item:$(this)})})}return d}function DeskMenu(a,o,g){var b=this;var h;var d=$('<div class="centerBlank"></div>');var k=ZINDEX.menu;var j=100;this.option={noCenterBlank:false,iconAlign:"center",top:"",left:"0px",bottom:"6px",right:"0px",expdir:"bottom",width:48,height:48};this.install=function(){a.css({position:"fixed",overflow:"visible"});$.extend(b.option,g)};this.show=function(){h.stop().animate({bottom:"5px"},400)};this.hide=function(){h.stop().animate({bottom:"-58px"},400)};this.loadMenu=function(p){var q=new AJAXObj();$(q).one("JSON_LOADED",function(s,r){b.creatMenu(r.value)});q.POSTDATA(p,creatPostParam("getMenu"))};this.creatMenu=function(q){if(!q){return}a.empty();h=$('<div class="fm_DeskMenu"></div>');h.css({position:"fixed","text-align":b.option.iconAlign||"center",height:"auto",left:b.option.left||"",bottom:b.option.bottom||"",right:b.option.right||"",top:b.option.top||"","pointer-events":"none"});a.css("z-index",k);a.append(h);var w=Math.floor(q.length/2);for(var r=0;r<q.length;r++){if(r==w&&!b.option.noCenterBlank){h.append(d)}var u=$('<div class="fm_SubMenu"><p class="bigicon"><i  class="'+q[r]["iconclass"]+'"></i></p></div>');u.css({"pointer-events":"auto",display:"inline-block","vertical-align":b.option.expdir});q[r]["id"]?u.find(">p").attr("id",q[r]["id"]):null;var p=$("<a>"+q[r]["title"]+"</a>");p.css("visibility","hidden");var t=$.extend({},q[r]);delete t.menu;delete t.iconclass;u.find(">p").append(p);u.css({overflow:"hidden"});var s=c(q[r]);s?u.append(s):null;s?s.css("visibility","hidden"):null;h.append(u);var v={openheight:u.height()+"px",closeheight:b.option.width+"px",openwidth:u.width()+"px",closewidth:b.option.height+"px",option:t};v.openwidth=(j>u.width())?(j+"px"):v.openwidth;u.find(".bigicon").data(v);u.css({width:v.closewidth,height:v.closeheight})}h.find("p.bigicon,li a").bind("click",e).bind("contextmenu",f);h.find(".bigicon").bind("mouseenter",n)};function n(){h.find(".fm_SubMenu").css("z-index",0);var t;var s=$(this).data();var q=$(this).parent();q.css({width:s.openwidth,height:s.openheight,"z-index":k+2});var p=q.find(">ul");var r=q.find(".bigicon a");q.css({overflow:"visible"});if(browserIsIE6||browserIsIE7||browserIsIE8||browserIsIE9){(p.length>0)?p.css("visibility","visible"):null;r.css("visibility","visible")}else{t=setTimeout(function(){(p.length>0)?p.css("visibility","visible"):null;r.css("visibility","visible")},400)}q.one("mouseleave",function(){if(t){clearTimeout(t);t=null}p.css("visibility","hidden");r.css("visibility","hidden");q.css({width:s.closewidth,height:s.closeheight});q.css({overflow:"hidden"})})}function e(){var p=$(this).data("option");if(p&&(p.url||p.flag)){$(b).trigger("MENU_CLICK",{option:p,but:$(this)})}}function f(q){var p=$(this).data("option");if(p&&(p.url||p.flag)){$(b).trigger("MENU_RIGHT_CLICK",{data:p,but:$(this)})}stopPP(q);q.preventDefault();return false}function c(u){if(!u||!u.menu||u.menu.length==0){return null}var t=$("<ul></ul>");for(var r=0;r<u.menu.length;r++){var p=$("<li><p></p></li>");var q=$("<a>"+u.menu[r]["title"]+"</a>");u.menu[r]["id"]?q.attr("id",u.menu[r]["id"]):null;var s=$.extend({},u.menu[r]);delete s.menu;delete s.iconclass;q.data("option",s);p.find(">p").append(q);var v=c(u.menu[r]);if(v){p.append(v)}t.append(p)}t.find("ul").hide().css({position:"absolute",top:"0px"});t.find("li").css({position:"relative"}).bind("mouseenter",m).bind("mouseleave",l);
return t}function m(){$(this).addClass("nowopen");var p=$(this).find(">ul");p.css({left:p.parent().outerWidth()+"px"});p.show()}function l(){$(this).removeClass("nowopen");var p=$(this).find(">ul");p.hide()}this.destroy=function(){};this.install()}function DropMenu(g,e,h){var k=this;var s;var j=e||ZINDEX.menu;var m=100;this.option={top:"",left:"",bottom:"",right:""};var c;var l;this.install=function(){g.css({overflow:"visible",position:"fixed","z-index":j});$.extend(k.option,h)};this.show=function(){};this.hide=function(){};this.loadMenu=function(p){var v=new AJAXObj();$(v).one("JSON_LOADED",function(x,w){k.creatMenu(w.value)});v.POSTDATA(p,creatPostParam("getMenu"))};this.creatMenu=function(v){if(!v){return}g.empty();s=$('<div class="fm_DropMenu"></div>');s.css({position:"fixed",height:"auto",left:k.option.left||"",bottom:k.option.bottom||"",right:k.option.right||"",top:k.option.top||"","pointer-events":"none"});g.append(s);var A=0;for(var w=0;w<v.length;w++){var z=$('<ul><li><i  class="'+v[w]["iconclass"]+'"></i></li></ul>');z.css({"pointer-events":"auto"});s.append(z);var p=$("<a>"+v[w]["title"]+"</a>");z.find(">li").append(p);v[w]["id"]?z.find(">li").attr("id",v[w]["id"]):null;A+=z.find(">li").outerWidth(true);var y=$.extend({},v[w]);delete y.menu;delete y.iconclass;z.find(">li").data("option",y);var x=n(v[w]);x?x.append($('<div class="DropmenuFootBar"></div>')):null;x?z.find(">li").append(x).addClass("haveChild"):null}s.setRealSize(A+1);f(y.defaultIndex);s.find("li").bind("click",a).bind("contextmenu",o)};function f(p){c=s.find(">ul");l=s.find(">ul >li >ul");l.hide().css("top",s.height()+"px");c.find(">li").bind("mouseenter",t).bind("mouseleave",d).find("li").bind("mouseenter",u).bind("mouseleave",b);q(p)}this.changeMenuTo=function(p){console.log(s.find("li#"+p+":eq(0)"));s.find("li#"+p+":eq(0)").click()};function q(v){if(!v){return}var p=g.find("li[rel="+v+"]");p.find(">a").addClass("nowid");r(p)}function r(v){if(v.length==0){return}var p=v.parent().parent();if(p.attr("class")!=containerClass){p.find(">a").addClass("nowid");r(p)}}function u(){var p=$(this).find(">ul");if(p.length==0){return}p.css({left:($(this).width())+"px",top:"0px"});p.stop().show("fast")}function b(){var p=$(this).find(">ul");if(p.length==0){return}p.stop().hide("fast")}function t(){var p=$(this).find(">ul");if(p.length==0){return}p.css("min-width",$(this).outerWidth()+"px").stop().slideDown("fast")}function d(){var p=$(this).find(">ul");if(p.length==0){return}p.stop().slideUp("fast")}function a(v){var p=$(this).data("option");if(p&&(p.url||p.flag)){$(k).trigger("MENU_CLICK",{option:p,but:$(this)})}stopPP(v);v.preventDefault();return false}function o(v){var p=$(this).data("option");if(p&&(p.url||p.flag)){$(k).trigger("MENU_RIGHT_CLICK",{data:p,but:$(this)})}stopPP(v);v.preventDefault();return false}function n(z){if(!z||!z.menu||z.menu.length==0){return null}var y=$("<ul></ul>");for(var w=0;w<z.menu.length;w++){var p=$("<li></li>");z.menu[w]["id"]?p.attr("id",z.menu[w]["id"]):null;var v=$("<a>"+z.menu[w]["title"]+"</a>");var x=$.extend({},z.menu[w]);delete x.menu;delete x.iconclass;p.data("option",x);p.append(v);var A=n(z.menu[w]);if(A){p.append(A)}y.append(p)}return y}this.destroy=function(){};this.install()}function ClumChocie(a,g,f){var c=function(){$(".clumselector").del()};if($(".clumselector").length>0){c();if(f){stopPP(f);f.preventDefault()}return}var m=a.datagrid("options");m=m.columns;var j=$('<div class="clumselector easyui_checklist"><ul class="easyui_panelbk"></ul><h4></h4></div>');$("body").append(j);var d=m[0].length;for(var b=0;b<d;b++){var h=$("<li>"+m[0][b].title+"</li>");j.find("ul").append(h);h.data("field",m[0][b].field);(a.datagrid("getColumnOption",m[0][b].field)["hidden"])?h.addClass("onhideclum"):null}var l=function(){var e=g.offset();j.css({position:"absolute",top:(e.top-j.outerHeight())+"px",left:(e.left-1)+"px","z-index":990})};l();j.one("mouseleave",c);var k=function(){var n=$(this).hasClass("onhideclum");if(!n&&j.find("li.onhideclum").length>=(d-1)){if(f){stopPP(f);f.preventDefault()}return}var e=$(this).data("field");n?$(this).removeClass("onhideclum"):$(this).addClass("onhideclum");n?a.datagrid("showColumn",e):a.datagrid("hideColumn",e)};j.find("li").bind("click",k);if(f){stopPP(f);f.preventDefault()}}function ChuJingAction(b){var d=this;var a;var c;this.install=function(){a=b.find("#chujingdan_0").clone();c=a.find("#zhiling_0").clone();a.find(".blockPart").remove();b.empty()};this.clear=function(){b.empty()};this.addChuJingDan=function(f,g){var h=$(a).clone();b.append(h);h.attr("id",g);var e=new detailDeal(h);$(e).one("HTML_FORMATED",function(){e.bindData(f)});e.parse()};this.addZhiLingDan=function(j,h){var g=$(c).clone();var f=b.find("#"+j);f.append(g);var e=new detailDeal(g);$(e).one("HTML_FORMATED",function(){e.bindData(h)});e.parse();return g};this.install()}function IframeCllback(b,f){var a="iframeid";var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");var d=decodeURI(b.location.search).substr(1).match(c);
if(d!=null){var e=unescape(d[2]);$(document).trigger("IFRAME_CALLBACK",{id:e,data:f})}}function IframeObj(a,c,g){var f=this;var d;var b=new Date().getTime()+Math.floor(Math.random()*1000);this.install=function(){d=$('<iframe frameborder="0" width="100%" '+(g?'id="'+g+'"':"")+"></iframe>");a.empty().append(d);$(document).bind("IFRAME_CALLBACK",e);c+=(c.indexOf("?")>0)?"&iframeid=":"?iframeid=";c+=b;d.get(0).src=c};function e(j,h){if(h.id==b){$(f).trigger("IFRAME_CALLBACK",h.data)}}this.destroy=function(){if(d){d.get(0).src="";d.remove();d=null}};this.resize=function(j,k){j=j?j:d.parent().width();k=k?k:d.parent().height();d.width(j).height(k)};this.reload=function(){if(d){var h=d.contentWindow;h.location.reload()}};f.install()}function UIStyleConfig(a){var c=this;var b;this.install=function(){b=new BackGround();b.install(a.background)};this.chgBg=function(d){b.BackgroundImage(d)};this.install()}function BackGround(){var a=this;var c=".fm_mainBackground";var b="mainbackgroundCookie"+projectName||"";this.install=function(e){var d=readFromLocal(b);if(d&&typeof d=="object"){a.BackgroundImage(d.url)}else{if(e){a.BackgroundImage(e)}}};this.BackgroundImage=function(d){var f;if(d&&d!="none"){f="url("+d+")"}else{f="none"}$("body").find("#addStyleBox_background").remove();var e=$('<div id="addStyleBox_background" style="display:none"><style type="text/css">'+c+",body{background-image: "+f+";}</style>");$("body").append(e);saveToLocal(b,{url:d})}}function MulitPicShow(d,g){var b=this;this.option={width:0.8,height:0.8,zindex:999,imgSpace:6};$.extend(b.option,g||{});var h;var c;var j;var f;var n;var e;var m;var q;var a;var o=(typeof ZINDEX=="object")?ZINDEX.picgroup||b.option.zindex:b.option.zindex;this.install=function(){if(!d){return}j=(typeof d=="string")?d.split(","):d;for(var p=j.length-1;p>=0;p--){if(!j[p]){j.splice(p,1)}}if(j.length<1){return}if(j.length==1){new showPopBigPic(j[0]);return}q=new popMask(o);a=$('<div class="closePicBut"></div>');q.mask.bind("click",b.destroy).append(a);f=$("<div></div>");f.css({"z-index":o+1,position:"fixed"});$("body").append(f);b.resize();k();$(window).bind("resize",b.resize)};this.destroy=function(){$(window).unbind("resize",b.resize);if(q){q.destroy();q=null}if(f){f.find(">.fm_piccut").unbind();f.del();f=null}};function k(){for(var r=j.length-1;r>=0;r--){var p=$('<div class="fm_piccut"><img src="'+j[r]+'" /></div>');f.append(p);p.css({"float":"left",margin:b.option.imgSpace+"px",overflow:"hidden",opacity:0.75,transition:"opacity 0.5s","box-shadow":"0px 0px 8px #999","background-color":"#fff"}).ZoomBigPic()}f.find(">.fm_piccut").bind("mouseenter",function(){$(this).css({opacity:1})}).bind("mouseleave",function(){$(this).css({opacity:0.75})});l()}function l(){f.find(">.fm_piccut").each(function(p){$(this).css({width:e-2*b.option.imgSpace,height:m-2*b.option.imgSpace}).fitImg()})}this.resize=function(){if(!f){b.destroy();return}h=b.option.width>1?b.option.width:Math.floor(b.option.width*$(window).width());c=b.option.height>1?b.option.height:Math.floor(b.option.height*$(window).height());var s=Math.sqrt(j.length);var t=Math.floor(s);var r=Math.ceil(j.length/t);e=h/r;m=c/t;var p=1.2;m=m/e>p?e*p:m;e=e/m>p?m*p:e;e=Math.floor(e);m=Math.floor(m);h=e*r;c=m*t;f.width(h).height(c);f.centerInWindow();l()};this.install()}function creatSwfObj(b,n,e,j){var c=this;this.swfObj;var g=false;var k;var f;var l;this.installed=false;var d=j||("SWF_"+new Date().getTime()+"_"+Math.floor(Math.random()*10000));this.install=function(){var q=flashChecker();if(!q.f){alert("\u9700\u8981\u5b89\u88c5 FlashPlayer !");return}var o=n.split("/");o=o[o.length-1];f=n.replace(o,"");k=$('<div id="'+d+'" class="SwfContainerDiv"></div>');k.css({overflow:"hidden"});b.css({overflow:"hidden"});var p=e||m(this);if(!p){alert("swfClass is undefined!");return}b.empty().append(k);swfobject.embedSWF(n,d,"100%","100%","10.2.0",f+"expressInstall.swf",{objName:p},{quality:"high"});c.installed=true;c.resize()};this.getSwf=function(){return h(d)};function h(o){if(navigator.appName.indexOf("Microsoft")!=-1){return window[o]}else{return document[o]}}this.CallBackSwf=function(o,p){try{c.swfObj.CALLSWF(o,p)}catch(q){console.log(q)}};this.SWFSTATUS=function(){c.conneted=true;c.swfObj=h(d);return{status:c.installed}};this.SwfCallBack=function(o){$(c).trigger("SWF_CALLBACK",o||{})};this.resize=function(){if(l){clearTimeout(l);l=null}l=setTimeout(a,200)};this.fullScreen=function(){g=true;a()};this.normal=function(){g=false;a()};function a(){if(g){k.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%",height:"100%"});swffit.fit(d,$(window).width(),$(window).height(),$(window).width(),$(window).height(),false,false)}else{k.css({position:"",top:"",left:"",bottom:"",right:""});swffit.fit(d,b.width(),b.height(),b.width(),b.height(),false,false)}}function m(p){for(var o in window){if(window[o]==p){return(o.toString());break}}return null}}function globalSearch(b,h){var g=this;var a;this.isSearch=false;this.searchData={};this.install=function(){var k="";
if(h){for(var j=0;j<h.length;j++){k+='<p rev="'+h[j]["value"]+'">'+h[j]["text"]+"</p>"}k='<div class="dropselect">'+k+"</div>"}a=$('<div class="gsearch"><dt><input name="gkey" value="\u8bf7\u8f93\u5165\u5173\u952e\u5b57" class="firstinput"/></dt><dd>'+k+'<a class="gsearchsubmit"><i class="fa fa-search"></i> \u641c\u7d22</a></dd></div>');a.find("p:first").addClass("first");b.empty().append(a);a.find("a.gsearchsubmit").bind("click",c);a.find(".firstinput").one("focus",function(){$(this).removeClass("firstinput").val("")});a.width(a.find("dt").outerWidth(true)+a.find(".dropselect").outerWidth(true)+a.find("dd a").outerWidth(true));a.find(".dropselect p:gt(0)").hide();a.find(".dropselect").bind("mouseenter",e).find("p").bind("click",f)};function e(){$(this).find("p").stop().slideDown("fast",function(){a.find(".dropselect").unbind().bind("mouseleave",d)})}function d(){a.find(".dropselect p:gt(0)").stop().slideUp("fast",function(){a.find(".dropselect").unbind().bind("mouseenter",e)})}function f(){a.find("p.first").removeClass("first");a.find(".dropselect").prepend($(this));$(this).addClass("first");d();return false}function c(){var m=a.find("input[name=gkey]");var k=m.val();if(trim(k).length==0||m.hasClass("firstinput")){a.find("input[name=gkey]").addClass("firstinput").val("\u8bf7\u8f93\u5165\u5173\u952e\u5b57");return}var l=a.find(".dropselect p:first");var j={};j.condition={};j.condition["key"]=k;j.condition["type"]=l.attr("rev");g.searchData=$.extend({},j.condition);g.isSearch=true;j.item=$(this);$(g).trigger("GLOBAL_SEARCH",j)}}function dragWindowSize(d,g,c){var e=this;var f;var a;this.install=function(){d.unbind().bind("mousedown",b);c=c?c:{min:[100,100]};c.min=c.min?c.min:[100,100];c.min[0]=c.min[0]>100?c.min[0]:100;c.min[1]=c.min[1]>100?c.min[0]:100};function b(k){if(f){f.del();f=null}f=$('<div class="dragWindowLine"></div>');var j=g.offset();f.css({position:"fixed",top:j.top-2+"px",left:j.left-2+"px","z-index":"9999999"}).width(g.outerWidth()).height(g.outerHeight());$("body").append(f);k=k?k:window.event;a=[k.clientX,k.clientY];option_max=c.max?c.max:[$(window).width(),$(window).height()];var l=function(o){o=o?o:window.event;var m=(o.clientX-j.left);var n=(o.clientY-j.top);m=m>option_max[0]?option_max[0]:m;n=n>option_max[1]?option_max[1]:n;m=m<c.min[0]?c.min[0]:m;n=n<c.min[1]?c.min[1]:n;f.css({width:m+"px",height:n+"px"})};var h=function(m){if(f){$(e).trigger("DRAG_RESIZE",{width:f.width(),height:f.height()});f.del();f=null}if(browserIsIE8){$("*").css({"-webkit-user-select":"","-moz-user-select":"","-khtml-user-select":"","user-select":""}).attr("unselectable","")}$(document).unbind("mousemove",l).unbind("mouseup",h)};$(document).bind("mousemove",l).bind("mouseup",h);if(browserIsIE8){$("*").css({"-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","user-select":"none"}).attr("unselectable","on")}stopPP(k);k.preventDefault()}this.enable=function(){d.unbind().bind("mousedown",b)};this.disable=function(){d.unbind("mousedown",b)};this.destroy=function(){if(f){f.del();f=null}d.unbind("mousedown",b)};this.install()}function dragToMove(e,c){var f=this;var b;this.isdrag=false;this.enable=function(){e.unbind().bind("mousedown",d)};this.disable=function(){e.unbind("mousedown",d)};this.moveToTab=function(j){if(!j||j.length==0){return}var g=j.position().left;var h=(e.width()-e.parent().width());g=g>=h?h:g;g=g<0?0:g;a(-g)};function d(h){f.isdrag=false;h=h?h:window.event;b=h.clientX;var k=e.css("left");k=parseInt(k.replace("px",""));k=k?k:0;var j=function(m){f.isdrag=true;m=m?m:window.event;var l=k+(m.clientX-b);e.css("left",l+"px")};var g=function(l){if(c){a()}if(browserIsIE8){$("*").css({"-webkit-user-select":"","-moz-user-select":"","-khtml-user-select":"","user-select":""}).attr("unselectable","")}$(document).unbind("mousemove",j).unbind("mouseup",g)};$(document).bind("mousemove",j).bind("mouseup",g);if(browserIsIE8){$("*").css({"-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","user-select":"none"}).attr("unselectable","on")}stopPP(h);h.preventDefault()}function a(l){var k;if(l||l==0){k=l}else{k=e.css("left");k=parseInt(k.replace("px",""));k=k?k:0}var j=(e.width()-e.parent().width());k=k<-j?-j:k;k=k>0?0:k;var h=0;var g=false;e.find(">"+c).each(function(){var n=$(this).outerWidth(true);if(h<-k&&!g){h+=n;if(h>=-k){g=true;var m=(k+h);if((l||l==0)&&m>n/2){h-=n}}}});h=-h;e.stop().animate({left:h+"px"},"50")}}function DragResize(d,f,c){var e=this;this.dragSize;this.install=function(){if(c==null){return}e.dragSize=f;e.dragSize.dis=e.dragSize.dis||0;if(!e.dragSize||typeof e.dragSize!=="object"){e.dragSize={min:0,max:$(window).width()}}e.enabled()};this.enabled=function(){d.unbind().bind("mousedown",b).show()};this.disabled=function(){d.unbind("mousedown",b).hide()};function b(h){$(document).bind("mousemove",g).bind("mouseup",a);if(browserIsIE8){$("*").css({"-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","user-select":"none"}).attr("unselectable","on")
}stopPP(h);h.preventDefault()}function a(h){if(browserIsIE8){$("*").css({"-webkit-user-select":"","-moz-user-select":"","-khtml-user-select":"","user-select":""}).attr("unselectable","")}$(document).unbind("mousemove",g).unbind("mouseup",a);g(h,true)}function g(k,h){k=k?k:window.event;var j=k.clientX;j-=e.dragSize.dis;j=j>e.dragSize.max?e.dragSize.max:j;j=j<e.dragSize.min?e.dragSize.min:j;c(j,h)}this.destroy=function(){$(document).unbind("mousemove",g).unbind("mouseup",a);d.unbind()}}function DragResizeV(d,f,c){var e=this;this.dragSize;this.install=function(){if(c==null){return}e.dragSize=f;if(!e.dragSize||typeof e.dragSize!=="object"){e.dragSize={min:0,max:$(window).height()}}e.enabled()};this.enabled=function(){d.unbind().bind("mousedown",b).show()};this.disabled=function(){d.unbind("mousedown",b).hide()};function b(h){$(document).bind("mousemove",g).bind("mouseup",a);if(browserIsIE8){$("*").css({"-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","user-select":"none"}).attr("unselectable","on")}stopPP(h);h.preventDefault()}function a(h){$(document).unbind("mousemove",g).unbind("mouseup",a);if(browserIsIE8){$("*").css({"-webkit-user-select":"","-moz-user-select":"","-khtml-user-select":"","user-select":""}).attr("unselectable","")}g(h,true)}function g(k,h){k=k?k:window.event;var j=k.clientY;j=j>e.dragSize.max?e.dragSize.max:j;j=j<e.dragSize.min?e.dragSize.min:j;c(j,h)}}function dragDivObj(){var b=this;var h;var f;var d;var g;var a;this.Enabled=true;this.isDrag=false;this.draged=false;this.dispos=[0,0];this.holdTop=true;this.install=function(k,l,m){b.dispos=m||[0,0];b.stopDrag();d=l;g=k;g.bind("mousedown",c)};function e(){if(typeof b.dispos=="function"){return b.dispos()}else{return b.dispos}}function j(q){if(!b.Enabled){return}q=q?q:window.event;var m=q.clientX-f[0];var l=q.clientY-f[1];b.draged=(m!=0||l!=0)?true:false;var p=h.top+l;var r=h.left+m;r=(r>a)?a:r;if(b.holdTop){p=(p<0)?0:p}var k=e();var o=(r-k[0]);var n=(p-k[1]);d.css({left:o+"px",top:n+"px"});$(b).trigger("DRAG_MOVE",{x:o,y:n})}this.destroy=function(){$(b).unbind();b.isDrag=false;g.unbind("mousedown",c);$(document).unbind("mousemove",j).unbind("mouseup",b.stopDrag).unbind("mouseleave",b.stopDrag)};this.stopDrag=function(){b.isDrag=false;$(document).unbind("mousemove",j).unbind("mouseup",b.stopDrag);if(browserIsIE8){$("*").css({"-webkit-user-select":"","-moz-user-select":"","-khtml-user-select":"","user-select":""}).attr("unselectable","")}$(b).trigger("DRAG_END",{targ:d,container:g})};function c(k){b.draged=false;a=$(window).width()-40;h={left:parseInt(d.css("left").replace("px","")),top:parseInt(d.css("top").replace("px",""))};h.left-=$(window).scrollLeft();h.top-=$(window).scrollTop();k=k?k:window.event;f=[k.clientX,k.clientY];$(document).bind("mousemove",j).one("mouseup",b.stopDrag).one("mouseleave",b.stopDrag);if(browserIsIE8){$("*").css({"-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","user-select":"none"}).attr("unselectable","on")}b.isDrag=true;stopPP(k);k.preventDefault()}}function SideMenu(a,l,q){var b=this;var j;var d;this.option={top:0,bottom:0,left:0,maxwidth:120,showTitle:false,width:106,margin:3,hasIcon:true,singleLine:false};this.isOpen=false;this.menuData;var e;var m={};var n=ZINDEX.menu;this.install=function(){$.extend(b.option,l||{});j=$('<div class="fm_mainBackground fm_sideMenuIconBox"><h1 class="fm_mainBackground">'+(l.menuTitle||"MENU")+"</h1></div>");d=$('<div class="fm_sideMenuTreeBox"></div>');a.append(j).append(d);j.css({position:"fixed",top:b.option.top+"px",bottom:b.option.bottom+"px",left:b.option.left+"px",overflow:"visible","z-index":n});d.css({position:"fixed",top:b.option.top+"px",bottom:b.option.bottom+"px",left:b.option.left+"px",overflow:"visible","z-index":n,"max-width":b.option.maxwidth+"px"});j.setRealSize(GLOBAL.windis["leftdis"]);d.css({left:(b.option.left+j.outerWidth())+"px"});d.hide();if(q){var p=$('<div class="fm_sideMenuHomebut  fm_deskBut" title="\u8fd4\u56de\u9996\u9875"><i class="fa fa-th-large"></i></div>');p.css({position:"fixed","z-index":n});a.append(p);p.setRealSize(GLOBAL.windis["leftdis"]);p.bind("click",function(){$(document).trigger("SHOW_HOMEPAGE")})}};this.Load=function(p,s){e=p;$.extend(m,s||{});this.Reload()};this.Reload=function(s){$.extend(m,s||{});var t=new AJAXObj();$(t).one("JSON_LOADED",function(u,v){b.installMenu(v.value);$(b).trigger("MENU_LOADED",v)});var p=creatPostParam("getMenu",m);t.POSTDATA(e,p)};this.installMenu=function(p){d.show();b.creatMenu(p);d.css({left:(b.option.left+j.outerWidth())+"px"});d.hide();j.animate({left:b.option.left+"px"},200)};this.creatMenu=function(t){if(!t){return}d.empty();j.empty().append($('<h1 class="fm_mainBackground">'+(l.menuTitle||"MENU")+"</h1><div></div>"));l.menuTitle==""?j.find(">h1").css("visibility","hidden"):null;b.menuData=t;!b.option.hasIcon?j.addClass("noIconTitle"):null;for(var u=0;u<t.length;u++){var p=$('<dd rel="subtree_'+u+'" '+(b.option.showTitle?'class="havetitle"':"")+' title="'+t[u]["title"]+'" >'+(b.option.hasIcon?("<i "+(t[u]["iconclass"]?' class="'+t[u]["iconclass"]+'"':"")+"></i>"):"")+(b.option.showTitle?"<span>"+t[u]["title"]+"</span>":"")+"</dd>");
j.find(">div").append(p);!b.option.singleLine?p.addClass("textunder"):null;p.css({margin:b.option.margin+"px"});t[u]["id"]?p.attr("id",t[u]["id"]):null;if(b.option.showTitle){p.width(b.option.width)}if(t[u]["menu"]&&t[u]["menu"].length>0){var s=$('<div class="menupart" id="subtree_'+u+'"><h1>'+t[u]["title"]+'</h1><div class="menuContainer"></div></div>');d.append(s);var v=new AnyDropMenu(s.find(".menuContainer"));v.installMenu(t[u]["menu"]);$(v).bind("MENU_CLICK",r).bind("MENU_RIGHT_CLICK",function(x,w){d.hide();$(b).trigger("MENU_RIGHT_CLICK",w)});s.hide()}else{p.addClass("singleBut")}}j.find("dd").bind("mouseenter",c).bind("click",h).bind("contextmenu",k)};function k(s){var p=$(this).index();var t=b.menuData[p];if(t.disabled){stopPP(s);s.preventDefault();return false}$(b).trigger("MENU_RIGHT_CLICK",{data:t,but:$(this)});stopPP(s);s.preventDefault();return false}function h(){var p=$(this).index();var s=b.menuData[p];if(s.disabled){return}j.find(">div >dd.nowid").removeClass("nowid");$(this).addClass("nowid");g(s,$(this))}function r(p,t){var s=t.data;if(s.disabled){return}j.find(">div >dd.nowid").removeClass("nowid");j.find(">div >dd.open").addClass("nowid");g(t.data,t.but)}function g(s,p){var s=$.extend({},s);delete s.menu;$(b).trigger("MENU_CLICK",{option:s,but:p})}function c(){var p=$(this).index();b.chgToMenu(p)}this.chgToMenu=function(s){var u=j.find(">div >dd:eq("+s+")");if(b.option.showTitle){j.find(">div >dd.open").removeClass("open").css({"margin-right":b.option.margin+"px",width:b.option.width+"px"})}else{j.find(">div >dd.open").removeClass("open").css({"margin-right":b.option.margin+"px"})}if(!u.hasClass("singleBut")){u.addClass("open");if(b.option.showTitle){j.find(">div >dd").css({width:b.option.width+"px"});u.css({width:(b.option.width+b.option.margin)+"px"})}u.css({"margin-right":"0px"})}var p=u.attr("rel");var v=d.find(">div#"+p);if(v.length>0){d.find(">div.open").removeClass("open").hide();v.addClass("open").show();var t=function(){d.hide().unbind();j.find(">div >dd.open").removeClass("open").css({"margin-right":b.option.margin+"px"});if(b.option.showTitle){j.find(">div >dd").css({width:b.option.width+"px"})}};d.show();d.unbind().one("mouseleave",t)}else{d.hide()}};this.hide=function(){if(!b.isOpen){return}j.css({left:(-j.outerWidth(true))+"px"});b.isOpen=false};this.show=function(){if(b.isOpen){return}j.css({left:b.option.left+"px"});b.isOpen=true};this.getClicked=function(p){o(b.menuData,p)};function o(p,t){for(var s=0;s<p.length;s++){if(f(p[s],t)){$(b).trigger("MENU_CLICK",{option:p[s],but:null});break}else{if(p[s]["menu"]){o(p[s]["menu"],t)}}}}function f(u,s){var t=true;for(var p in s){if(s[p]!=u[p]){t=false;break}}return t}this.resize=function(){};this.install()}function AnyDropMenu(a){var b=this;this.container;var k=a;this.menuData=null;this.outbut;var o;var c=false;this.option;var f;var m={};this.Load=function(p,r){f=p;$.extend(m,r);this.Reload()};this.Reload=function(r){var s=new AJAXObj();$(s).one("JSON_LOADED",function(t,v){var u=v.value;b.installMenu(u)});var p=creatPostParam("getMenu",m);s.POSTDATA(f,p)};this.installMenu=function(p){b.menuData=p;k.empty();b.container=$('<div class="relpos" id="fm_dropmenu"></div>');k.append(b.container);var r=d(b.menuData);b.container.empty().append(r);b.container.find("ul").hide();b.container.find("li p").bind("click",l).bind("mouseenter",n).bind("contextmenu",g);b.container.find("li.closepart").unbind().bind("click",b.minirizeMenuTree);b.container.find(">ul").show().width(b.container.find(">ul").width());$(b).trigger("MENU_INSTALLED");b.container.bind("mouseenter",h);if(b.outbut){b.outbut.bind("click",b.hideShowMenu)}};function h(){if(o){clearTimeout(o);o=null}b.container.find("li").show();b.container.find("ul.ulclose li").hide();b.container.bind("mouseleave",q);c=false}function q(){if(b.container.find("li.nowid").length<1){return}if(o){clearTimeout(o);o=null}o=setTimeout(b.minirizeMenuTree,2000)}this.minirizeMenuTree=function(){if(o){clearTimeout(o);o=null}if(b.container.find("li.nowid").length<1){return}b.container.find("li>ul").each(function(){$(this).height("auto");if($(this).find(">li.nowid").length>0){$(this).width($(this).width())}else{if($(this).hasClass("ulclose")){$(this).width(26)}else{$(this).width("auto")}}});b.container.find("li").hide();b.container.find(">ul >li").show();b.container.find("ul.ulclose li").hide();b.container.unbind("mouseleave",q);c=true};this.chgMenuTo=function(s){var t=function(u){var v=u.parent().parent();if(v.length>0&&v.attr("id")&&v.attr("id")==b.container.attr("id")){if(c){b.container.find("ul li").show();b.minirizeMenuTree()}return}else{v.show().addClass("nowid").find(">ul").show();t(v)}};var r=b.container.find("p#"+s);if(r.length>0){b.container.find("ul li>ul").hide();b.container.find("li.nowid").removeClass("nowid");var p=r.parent();p.addClass("nowid");t(p)}b.container.find("li").each(function(){var u=$(this).find(">ul");u.width("auto").css({left:$(this).width()+"px"});u.width($(this).find(">ul").width())
})};function l(){var r=$(this).text();var p=$(this).data("data");if(p.disabled){return}var s=$(this).attr("id");b.chgMenuTo(s);$(b).trigger("MENU_CLICK",{data:p,but:$(this)})}function g(p){var r=$(this).data("data");if(r.disabled){stopPP(p);p.preventDefault();return false}$(b).trigger("MENU_RIGHT_CLICK",{data:r,but:$(this)});stopPP(p);p.preventDefault();return false}var j;function e(){$(this).unbind("mouseleave").find("ul").stop().hide()}function n(){var r=$(this).parent().find(">ul");r.addClass("nohide");var p=$(this).parent().parent();p.find("ul:not(.nohide)").hide();r.removeClass("nohide");r.width("auto").css({left:$(this).parent().width()+"px"}).removeClass("ulclose").find("li").show();r.width($(this).parent().find(">ul").width());$(this).parent().unbind("mouseleave").bind("mouseleave",e);r.slideDown("fast")}this.hideShowMenu=function(){if($(this).hasClass("close")){b.container.find(">ul").slideDown("normal");$(this).removeClass("close")}else{b.container.find(">ul").slideUp("fast");$(this).addClass("close")}};this.hidemenu=function(){if(b.outbut){b.outbut.addClass("close")}};function d(u,v,w){if(!u||u.length<1){return""}v=v?v:$("<ul></ul>");w=w?w:"m";for(var t=0;t<u.length;t++){w=w+"_"+t;var p=$("<li></li>");var s=$('<p id="limenu_'+w+'">'+u[t]["title"]+"</p>");s.data("data",u[t]);p.append(s);v.append(p);var r=$("<ul></ul>");p.append(r);d(u[t]["menu"],r,w)}return v}this.resize=function(){};this.destroy=function(){}}function ComSelctor(I,L){var N=this;this.option=$.extend({selectBoxWidth:220},L);var l;var Y;var s;var O;var D;var r;var K;var G=[];var h;var U;var T;var m;var j;var E;this.page=1;var c={prev_show_always:true,next_show_always:true,items_per_page:20,prev_text:'<i class="fa fa-chevron-left" />',countText:true,num_display_entries:5,ellipse_text:'<i class="fa fa-ellipsis-h"/>',num_edge_entries:2,next_text:'<i class="fa fa-chevron-right" />'};this.destroy=function(){if(T){T.del();T=null}if(U){U.destroy();U=null}if(h){h.unbind()}I.clear()};this.install=function(){c.items_per_page=N.option.searchPage?N.option.searchPage:c.items_per_page;I.attr("class","fm_searchSelector").css({position:"relative","box-sizing":"border-box",width:"100%",height:"100%"});l=$('<div class="searchBox"><div class="searchKey relpos"><input name="key" style="float:left" placeholder="\u8f93\u5165\u67e5\u8be2\u5185\u5bb9"  list="inputlist" /><datalist id="inputlist"></datalist><i class="fa fa-clock-o chghistroy" style="float:right"  '+((N.option.selectHistory&&N.option.selectHistory["title"])?'title="'+N.option.selectHistory["title"]+'"':"")+'></i><i class="fa fa-th-list chggroup" style="float:right"  '+((N.option.groupOptions&&N.option.groupOptions["title"])?'title="'+N.option.groupOptions["title"]+'"':"")+'></i><i class="fa fa-sitemap chgtree" style="float:right"  '+((N.option.treeOptions&&N.option.treeOptions["title"])?'title="'+N.option.treeOptions["title"]+'"':"")+'></i><i class="fa fa-search searchbut" style="float:right"  '+(N.option.title?'title="'+N.option.title+'"':"")+'></i><dd class="dropselect"></dd></div><div class="searchList"></div>'+((N.option.searchPage||N.option.mulit)?'<div class="searchPageBox" style="position:absolute;height:26px;left:0px;bottom:0px;right:0px;"><div class="page"></div></div>':"")+'<div class="groupList listSelect"><ul><li><h1 id="title"></h1><p id="content"></p></li></ul>'+((N.option.groupOptions&&N.option.groupOptions["canSelectAll"])?'<div class="selcetAll"><a> \u5168\u9009 <i class="fa fa-chevron-right"></i></a></div></div>':"</div>")+'<div class="treeBox"></div><div class="historyBox listSelect"><ul><li><h1 id="title"></h1><p id="content"></p></li></ul></div></div>');O=l.find(".treeBox");D=l.find("div.groupList");D.css({overflow:"auto"});r=l.find(".historyBox");K=l.find("div.searchList");K.css({overflow:"auto"});Y=$('<div class="selectorBox"><h3><i class="fa fa-star savehistroy" style="float:right" title="\u4fdd\u5b58\u5e38\u7528\u7ec4"></i><a>\u6e05\u7a7a</a>  \u5df2\u9009\u62e9 [ <span>0</span> ]</h3><div class="hissaveform"><a>\u4fdd\u5b58</a><input name="groupname" value="\u65b0\u5efa\u5e38\u7528\u7ec4" maxleng="50" /></div><div class="selectedList"></div></div>');if(!N.option.treeOptions){O.remove();l.find(">.searchKey i.chgtree").remove()}else{O.css({overflow:"auto"}).hide();l.find(">.searchKey i.chgtree").bind("click",function(){o("tree")})}if(!N.option.groupOptions){D.remove();l.find(">.searchKey i.chggroup").remove()}else{D.css({overflow:"auto"}).hide();l.find(">.searchKey i.chggroup").bind("click",function(){o("group")})}if(!N.option.selectHistory){r.remove();Y.find("h3 i").remove();Y.find(".hissaveform").remove();l.find(">.searchKey i.chghistroy").remove()}else{Y.find(".hissaveform").hide();if(N.option.selectHistory["editable"]){Y.find("h3 i").bind("click",function(){if($(this).hasClass("nowid")){$(this).removeClass("nowid");Y.find(".hissaveform").hide()}else{$(this).addClass("nowid");Y.find(".hissaveform").show()}});Y.find(".hissaveform >a").bind("click",M)}else{Y.find("h3 i").remove();
Y.find(".hissaveform").remove()}r.css({overflow:"auto"}).hide();l.find(">.searchKey i.chghistroy").bind("click",function(){o("history")})}Y.find("h3 a").bind("click",N.clear);h=l.find(">.searchKey input");h.bind("keydown",v);l.find(">.searchKey i.searchbut").bind("click",u);E=l.find("div.searchPageBox");s=Y.find(">div.selectedList");s.css({"overflow-x":"hidden","overflow-y":"auto"});I.empty().append(l).append(Y);Y.css({width:N.option.selectBoxWidth+"px",position:"absolute",top:"0px",right:"0px","z-index":1,overflow:"hidden"});l.css({position:"absolute",top:"0px",left:"0px","z-index":2,overflow:"hidden"});var p=l.find("dd.dropselect");p.css({position:"absolute",top:"4px",right:(l.find(">.searchKey >i").outerWidth(true)*l.find(">.searchKey >i").length+5)+"px"});var ac=0;if(N.option.searchClass&&N.option.searchClass.length>0){for(var ab=0;ab<N.option.searchClass.length;ab++){var aa=$('<p rel="'+N.option.searchClass[ab]["value"]+'" rev="'+ab+'">'+N.option.searchClass[ab]["name"]+"</p>");p.append(aa);ac=Math.max(ac,aa.outerWidth());if(ab>0){aa.hide()}}p.width(ac).bind("mouseenter",q)}else{p.remove();p=null}W();if(N.option.startSearch){u()}};function W(){var ab=l.find("#inputlist");ab.empty();try{for(var p=0;p<INPUTHISTORY.length;p++){ab.append($('<option value="'+INPUTHISTORY[p]+'"/>'))}}catch(aa){}}this.formatInput=function(ab,aa,ad){var p;aa=aa?aa:"name";ad=ad?ad:"name";if(ab){var ac=ab.value.split(",");var af=ab.text.split(",");p=[];for(var ae=0;ae<ac.length;ae++){if(ac[ae]){var ag={};ag[aa]=af[ae];ag[ad]=ac[ae];p.push(ag)}}}return p};this.formatOutput=function(ad,p,ab){var aa={text:"",value:""};if(!ad||ad.length==0){return aa}p=p?p:"name";ab=ab?ab:"value";for(var ac=0;ac<ad.length;ac++){aa.text+=ad[ac][p]+",";aa.value+=ad[ac][ab]+","}aa.text=aa.text?aa.text.substr(aa.text,aa.text.length-1):aa.text;aa.value=aa.value?aa.value.substr(aa.value,aa.value.length-1):aa.value;return aa};this.reloadHistory=function(){if(m){m.reload()}};function M(){var aa=Y.find(".hissaveform input[name='groupname']").val();aa=trim(aa);if(aa){var ab=N.getSelected();if(ab.length<1){$.alert("\u8bf7\u9009\u62e9");return}var p={groupname:aa,users:ab};U=new AJAXObj();$(U).one("JSON_LOADED",function(ad,ac){$.success("\u4fdd\u5b58\u6210\u529f");Y.find("i.nowid").removeClass("nowid");Y.find(".hissaveform").hide();if(m){m.reload()}});U.POSTDATA(N.option.selectHistory["url"],creatPostParam("savegroup",null,p))}}var C=true;function o(ab){var aa=l.find("i.chgtree");var p=l.find("i.chggroup");var ac=l.find("i.chghistroy");if(ab=="search"&&!aa.hasClass("active")&&!ac.hasClass("active")&&!p.hasClass("active")){return}O.hide();K.hide();E.hide();r.hide();D.hide();if(ab=="tree"){if(aa.hasClass("active")){ac.removeClass("active");aa.removeClass("active");p.removeClass("active");K.show();return}ac.removeClass("active");p.removeClass("active");aa.addClass("active");O.show();if(!T){T=$('<div id="tree"></div>');T.css({height:"100%",overflow:"auto"});O.append(T);$.extend(N.option.treeOptions,{animate:true,checkbox:true,onCheck:b,onLoadSuccess:X,onExpand:x});if(!N.option.mulit){N.option.treeOptions["cascadeCheck"]=false}T.tree(N.option.treeOptions)}}else{if(ab=="history"){if(ac.hasClass("active")){ac.removeClass("active");aa.removeClass("active");p.removeClass("active");K.show();return}aa.removeClass("active");p.removeClass("active");ac.addClass("active");r.show();if(!m){m=new ListView(r.find(">ul"));$(m).unbind("LI_CLICKED").bind("LI_CLICKED",function(ae,ad){F(ad.data,"history")});m.load(N.option.selectHistory["url"],creatPostParam("getlist",N.option.selectHistory["param"]),N.option.selectHistory["ListFormater"],N.option.selectHistory["ActionFormater"])}}else{if(ab=="group"){if(p.hasClass("active")){ac.removeClass("active");aa.removeClass("active");p.removeClass("active");K.show();return}aa.removeClass("active");ac.removeClass("active");p.addClass("active");D.show();if(!j){j=new ListView(D.find(">ul"));$(j).unbind("LI_CLICKED").bind("LI_CLICKED",function(ae,ad){F(ad.data,"group")});j.load(N.option.groupOptions["url"],creatPostParam("getlist",N.option.groupOptions["param"]),N.option.groupOptions["ListFormater"],N.option.groupOptions["ActionFormater"]);D.find(".selcetAll a").bind("click",function(){B(j.getData(),"group")})}}else{ac.removeClass("active");aa.removeClass("active");p.removeClass("active");K.show();E.show()}}}}function B(ad,ac){var p=[];var aa;switch(ac){case"history":aa=N.option.selectHistory["url"];break;case"group":aa=N.option.groupOptions["url"];break}for(var ab=0;ab<ad.length;ab++){switch(ac){case"history":p.push((typeof N.option.selectHistory["onBeforeLoad"]=="function")?N.option.selectHistory["onBeforeLoad"](ad[ab]):{guid:ad[ab]["guid"]||""});aa=N.option.selectHistory["url"];break;case"group":p.push((typeof N.option.groupOptions["onBeforeLoad"]=="function")?N.option.groupOptions["onBeforeLoad"](ad[ab]):{guid:ad[ab]["guid"]||""});aa=N.option.groupOptions["url"];break}}U=new AJAXObj();$(U).one("JSON_LOADED",function(ag,af){var ae=af.value["rows"];
N.insertToSelect(ae,ac)});U.POSTDATA(aa,creatPostParam("getalluser",p))}function F(ab,ac){var p;var aa;switch(ac){case"history":p=(typeof N.option.selectHistory["onBeforeLoad"]=="function")?N.option.selectHistory["onBeforeLoad"](ab):{guid:ab.guid||""};aa=N.option.selectHistory["url"];break;case"group":p=(typeof N.option.groupOptions["onBeforeLoad"]=="function")?N.option.groupOptions["onBeforeLoad"](ab):{guid:ab.guid||""};aa=N.option.groupOptions["url"];break}U=new AJAXObj();$(U).one("JSON_LOADED",function(af,ae){var ad=ae.value["rows"];N.insertToSelect(ad,ac)});U.POSTDATA(aa,creatPostParam("getuser",p))}function x(aa){if(N.option.mulit&&N.option.treeOptions["cascadeCheck"]&&!T.tree("isLeaf",aa.target)){var p=aa.checked;if(p){T.tree("check",aa.target)}}T.scrollTo(aa.target,300,{axis:"y"})}var e=false;function b(ae,ad){if(e){return}if(!N.option.mulit){e=true;var ab=T.tree("getChecked");for(var ac=0;ac<ab.length;ac++){T.tree("uncheck",ab[ac].target)}T.tree("check",ae.target);e=false}var p=T.tree("getChecked");G.splice(0,G.length);s.empty();var aa=a();N.insertToSelect(aa,"search",true);N.insertToSelect(p,"tree",true)}function Z(ac,p){if(!T){return}e=true;var aa=ac?T.tree("getChecked","unchecked"):T.tree("getChecked");var ad=ac?"check":"uncheck";for(var ab=0;ab<aa.length;ab++){if(P(aa[ab],p)){T.tree(ad,aa[ab].target)}}e=false}function d(ab){if(!T){return}e=true;var p=ab?T.tree("getChecked","unchecked"):T.tree("getChecked");var ac=ab?"check":"uncheck";for(var aa=0;aa<p.length;aa++){T.tree(ac,p[aa].target)}e=false}function X(){for(var aa=0;aa<G.length;aa++){Z(true,G[aa]);z(true,G[aa])}if(C&&T){var p=T.tree("getRoot");T.tree("expand",p.target);C=false}}function v(aa){var p=aa.keyCode;if(p==13){u()}}var S={};var f=false;function u(){var aa=trim(h.val());if(aa||N.option.blankSearch){nowKey=aa;N.page=1;h.unbind().blur();var ac={key:nowKey};var p=l.find("dd.dropselect");if(p.length>0&&p.find(">p").length>0){ac.type=p.find(">p:eq(0)").attr("rel")}if(U){U.destroy();U=null}try{saveToInputHistory(aa);W()}catch(ab){}S=ac;f=false;Q()}}function Q(){o("search");U=new AJAXObj();$(U).one("JSON_LOADED",H);var p=N.option.searchPage?{page:N.page,rows:c.items_per_page}:null;U.POSTDATA(N.option.url,creatPostParam("search",$.extend(S,N.option.param),null,p))}function H(ad,ag){h.unbind().bind("keydown",v);var af=ag.value["rows"];K.empty();if(af&&af.length>0){for(var ab=0;ab<af.length;ab++){var ae;if(N.option.groupSet&&N.option.groupSet["searchGroupBy"]){var aa=af[ab][N.option.groupSet["searchGroupBy"]]||"other";var p=af[ab][N.option.groupSet["searchGroupTitle"]]||"\u5176\u4ed6";ae=K.find(">.selectPart[rel='part_"+aa+"']");if(ae.length==0){ae=$('<div class="selectPart open" rel="part_'+aa+'"><h2><i class="fa fa-arrow-right"></i>'+p+" [ <span>0</span> ]</h2></div>");K.append(ae)}}else{ae=K}var ah=$('<p class="sch_checkli">'+g(af[ab])+"</p>");ah.data("data",af[ab]);af[ab]["item"]=ah;ae.append(ah)}K.find(">.selectPart:gt(0)").removeClass("open").find(">p.sch_checkli").hide();K.find("p").bind("click",w);K.find("h2").bind("click",k);K.find("h2 i").bind("click",R);K.find(">div.selectPart").each(function(){var ai=$(this).find(">p.sch_checkli").length;$(this).find(">h2 span").text(ai)});if(N.option.mulit&&E.find(".selcetAll").length==0){var ac=$('<div class="selcetAll"><a> \u5168\u9009 <i class="fa fa-chevron-right"></i></a></div>');E.append(ac);ac.find("a").bind("click",t)}X()}if(N.option.searchPage&&!f){N.creatPager(ag.value["total"])}}function t(){var p=[];K.find("p.sch_checkli").each(function(){var aa=$(this).data("data");$(this).addClass("selected");p.push(aa)});N.insertToSelect(p,"search")}function R(){var p=$(this).parent().parent();var aa=[];p.find(">p.sch_checkli").each(function(){var ab=$(this).data("data");$(this).addClass("selected");aa.push(ab)});N.insertToSelect(aa,"search");return false}function a(){var p=[];K.find("p.selected").each(function(){var aa=$(this).data("data");p.push(aa)});return p}function w(){var p=$(this).data("data");if(!N.option.mulit){K.find("p.selected").removeClass("selected")}if($(this).hasClass("selected")){$(this).removeClass("selected");N.findAndRemove(p)}else{$(this).addClass("selected");N.insertToSelect([p],"search")}}this.setDefault=function(p){s.empty();if(p&&p.length>0){N.insertToSelect(p,"default")}};function q(){var p=l.find("dd.dropselect");p.find(">p").show().one("click",function(){p.prepend($(this));p.unbind("mouseleave").find(">p:gt(0)").hide()});p.unbind("mouseleave").one("mouseleave",function(){p.find(">p:gt(0)").hide()})}this.resize=function(p,ad){I.setRealSize(null,ad);var ab=p-N.option.selectBoxWidth;ad=I.height();l.setRealSize(ab,ad);Y.setRealSize(N.option.selectBoxWidth,ad);var ac=l.find(".searchKey");var aa=ac.find(">dd.dropselect");var af=aa.length>0?(ac.width()-aa.outerWidth(true)):ac.width();af-=ac.find(">i").outerWidth(true)*ac.find(">i").length;l.find("input[name='key']").setRealSize(af,null);var ae=ad-ac.outerHeight(true);s.setRealSize(null,ae);D.setRealSize(null,ae);O.setRealSize(null,ae);
r.setRealSize(null,ae);ae-=l.find(".searchPageBox").outerHeight(true);K.setRealSize(null,ae)};this.insertToSelect=function(ac,ad,p){if(!N.option.mulit){ac.splice(1,ac.length)}var aa=[];for(var ab=0;ab<ac.length;ab++){if(!y(ac[ab],G)){G.push(ac[ab]);aa.push(ac[ab])}}if(aa.length<1){return}var ae;for(var ab=0;ab<aa.length;ab++){ae=N.insert(aa[ab],ad,p)}s.scrollTo(ae,400)};this.insert=function(ab,ad,p){var aa;if(N.option.groupSet&&N.option.groupSet["groupBy"]){var ae=ab[N.option.groupSet["groupBy"]]||"other";var af=ab[N.option.groupSet["groupTitle"]]||"\u5176\u4ed6";aa=s.find(">.selectPart[rel='part_"+ae+"']");if(aa.length==0){aa=$('<div class="selectPart open" rel="part_'+ae+'"><h2><i class="fa fa-remove"></i> '+af+" [ <span>0</span> ]</h2></div>");s.append(aa);aa.find(">h2").bind("click",k).find("i").one("click",n)}}else{aa=s}var ac=$('<p class="sch_checkli"><i class="fa fa-remove dellibut"></i>'+g(ab)+"</p>");ac.data("data",ab).find("i.dellibut").bind("click",J);ab.item=ac;aa.append(ac);if(!p){if(ad=="tree"){z(true,ab);(!N.option.mulit)?Z(true,ab):null}else{if(ad=="search"){Z(true,ab);(!N.option.mulit)?z(true,ab):null}else{z(true,ab);Z(true,ab)}}}V();return ac};function V(){s.find(">div.selectPart").each(function(){var p=$(this).find(">p.sch_checkli").length;if(p==0){$(this).empty().remove()}else{$(this).find(">h2 span").text(p)}});Y.find("h3 span").text(s.find("p").length)}function n(){var p=$(this).parent().parent();p.find(">p.sch_checkli").each(function(){var aa=$(this).data("data");N.findAndRemove(aa);Z(false,aa)});p.empty().remove();V();return false}function J(){var p=$(this).parent();var ab=p.parent(".selectPart");var aa=p.data("data");N.findAndRemove(aa);Z(false,aa);if(ab.length>0&&ab.find(">p.sch_checkli").length==0){ab.empty().remove();ab=null}V()}this.findAndRemove=function(aa){for(var p=0;p<G.length;p++){if(P(G[p],aa)){G[p]["item"].unbind().remove();G[p]=null;G.splice(p,1);z(false,aa);Z(false,aa);aa=null;V();break}}};function z(p,aa){var ab=p?K.find("p:not(.selected)"):K.find("p.selected");ab.each(function(){if(P($(this).data("data"),aa)){p?$(this).addClass("selected"):$(this).removeClass("selected")}})}function k(){var p=$(this).parent();if(p.hasClass("open")){p.find(">p.sch_checkli").hide();p.removeClass("open")}else{p.find(">p.sch_checkli").show();p.addClass("open");p.parent().scrollTo(p,400)}}function y(p,ab){for(var aa=0;aa<ab.length;aa++){if(P(ab[aa],p)){return true}}return false}function P(aa,p){if(N.option.checkEq.length>0){for(var ab=0;ab<N.option.checkEq.length;ab++){if(aa[N.option.checkEq[ab]]!=p[N.option.checkEq[ab]]){return false}}return true}return false}function g(p){p.name=p.name?p.name:p[N.option.checkField["name"]];if(typeof N.option.listFormator=="function"){return N.option.listFormator(p)}return p.name}this.clear=function(p){G.splice(0,G.length);s.empty();d(false);V();K.find("p.selected").removeClass("selected")};this.getSelected=function(){var p=[];N.option.checkField["value"]=(typeof N.option.checkField["value"]=="string")?[N.option.checkField["value"]]:N.option.checkField["value"];s.find("p.sch_checkli").each(function(){var ac=$(this).data("data");var ad={};for(var ab=0;ab<N.option.checkField["value"].length;ab++){var aa=N.option.checkField["value"][ab];ad[aa]=ac[aa]}p.push(ad)});return p};this.creatPager=function(aa){if(!N.option.searchPage||N.option.searchPage<1){return}if(!aa){E.find(".page").empty();return}var ab=Math.ceil(aa/N.option.searchPage);var p=$.extend({selelct_callback:A,items_total_show:aa+"\u6761 / "+ab+"\u9875",current_page:N.page},c);E.find(".page").fm_pager(aa,p)};function A(p){N.page=p;f=true;Q()}this.install()}function PortalDesktop(l,w){var o=this;var k={w:0,h:0};this.option={nh:18,nv:12,gridminw:40,gridminh:36,canedit:false,blockW:6,blockH:6,minz:2,maxz:997};var y;var j;var d;var u;var z;var r=false;var A;this.selectBlocks;this.install=function(){var p=l.dataOptions();$.extend(o.option,p||{});o.option.blockW=o.option.blockW?o.option.blockW:6;o.option.blockH=o.option.blockH?o.option.blockH:6;y=$("<div></div>");y.css({position:"relative",overflow:"hidden",width:"100%",height:"100%"});l.append(y);o.resize()};this.creatAndInsert=function(p){for(var C=0;C<p.length;C++){var D=cloneJson(p[C]);D.name=D.name||("deskblock_"+new Date().getTime()+"_"+Math.floor(Math.random()*10000));D.id=D.id?D.id:D.name;var E=$('<div class="desktopBlockDiv"></div>');if(D.lockedblock){E.addClass("lockedBlock")}E.dataOptions(D);E.attr("id",D.id);E.data("data",D);D.classname?E.addClass(D.classname):null;E.css({position:"absolute",overflow:"hidden","z-index":D.z||o.option.minz,display:(D.hide?"none":"block")}).addClass("desktop_block");y.append(E);h(E);E.unbind("mousedown").bind("mousedown",g);if(typeof w=="function"){w(E,D)}}o.edit(r);o.resetZIndex();l.find(".desktop_shortcut i").resizeFillFont()};this.resetZIndex=function(){var E=[];var G=y.find(">div.desktopBlockDiv");G.each(function(){var J=$(this);var I=J.css("z-index")||o.option.minz;!E[I]?E[I]=[]:null;E[I].push(J)});var H=o.option.minz;
for(var D=0;D<E.length;D++){if(E[D]){for(var p=0;p<E[D].length;p++){var F=E[D][p];F.css({"z-index":(F.hasClass("desktop_config")?(o.option.maxz+2):H)});var C=F.data("data");C.z=H;F.data("data",C);H++}}}};var n;var b;this.pointTo=function(E){if(n){b?b.css("opacity",1).removeClass("shortcut_flash"):null;clearInterval(n);n=null}var D=y.find(">#"+E);var C=false;var p=0;if(D.length>0){q(D);b=D;D.addClass("shortcut_flash");n=setInterval(function(){D.css("opacity",(C?1:0.5));C=!C;p++;if(p>6){D.css("opacity",1).removeClass("shortcut_flash");clearInterval(n);n=null}},400)}};function q(p){p.css("z-index",o.option.maxz);o.resetZIndex()}function g(){var p=$(this);if(p.hasClass("desktop_config")){return}q(p)}this.edit=function(p){var C=y.find(">div.desktopBlockDiv");if(p){(p!=r)?o.showGrid():null;C.unbind("mousedown",a).bind("mousedown",a).unbind("mouseenter").bind("mouseenter",f);r=true}else{if(j){j.destroy();j=null}o.hideGrid();v();C.unbind("mousedown",a).unbind("mouseenter").unbind("mouseleave");C.find(".desktop_deletebut").unbind().remove();r=false}};function f(){var C=$(this);if(C.hasClass("lockedBlock")){return}var p=C.find(".desktop_deletebut");if(p.length==0){p=$('<div class="desktop_deletebut"><i class="fa fa-remove"></i></div>');p.css({position:"absolute",top:"0px",right:"0px"});C.prepend(p)}p.one("click",s).bind("mousedown",function(D){stopPP(D)});C.one("mouseleave",function(){p.del();p=null})}function s(C){var D=$(this).parent();var p=D.data("data");D.removeWidget();D.del();B();stopPP(C)}function a(){if($(this).hasClass("desktop_config")){return}d=$(this);y.find(">.desk_draging").removeClass("desk_draging");d.addClass("desk_draging");u=$("<div></div>");y.append(u);u.css({position:"absolute",top:d.css("top"),left:d.css("left"),border:"dotted 1px #666",opacity:0.6,"z-index":(o.option.maxz+2)});u.setRealSize(d.outerWidth(true),d.outerHeight(true));z=$("<div></div>");y.append(z);z.css({position:"absolute",top:d.css("top"),left:d.css("left"),border:"solid 1px #333","background-color":"#cccccc",opacity:0.5,"z-index":(o.option.maxz+1),"margin-top":d.css("margin-top"),"margin-left":d.css("margin-left"),"margin-right":d.css("margin-right"),"margin-bottom":d.css("margin-bottom")});z.setRealSize(d.outerWidth(true),d.outerHeight(true));if(j){j.destroy();j=null}j=new dragDivObj();j.install(y,u);$(j).bind("DRAG_MOVE",x).bind("DRAG_END",t)}function x(F,H){if(!z){t();return}var E=d.data("data");var D=Math.round(H.x/k.w);var G=Math.round(H.y/k.h);var C=o.option.nh-E.w;var p=o.option.nv-E.h;D=D<0?0:D>C?C:D;G=G<0?0:G>p?p:G;z.data({x:D,y:G});z.css({left:(k.starth+k.w*D)+"px",top:(k.startv+k.h*G)+"px"})}function t(D,p){if(u){u.remove();u=null}if(z){if(j.draged){d.css({left:z.css("left"),top:z.css("top")}).removeClass("desk_draging");var C=d.data("data");C.x=z.data("x");C.y=z.data("y");d.data("data",C)}q(d);B();z.remove();z=null}}function B(){$(o).trigger("SAVE_CONFIG")}this.resize=function(){var p=l.outerWidth();var C=l.outerHeight();if(p==0||C==0){return}k.w=Math.floor(p/o.option.nh);k.h=Math.floor(C/o.option.nv);k.w=k.w<o.option.gridminw?o.option.gridminw:k.w;k.h=k.h<o.option.gridminh?o.option.gridminh:k.h;k.starth=Math.round((p-o.option.nh*k.w)/2);k.startv=Math.round((C-o.option.nv*k.h)/2);y.fillParent();o.resetPosition();if(r){o.showGrid()}l.find(".desktop_shortcut i").resizeFillFont();$(o).trigger("PORTAL_RESIZE")};this.hideGrid=function(){y.find(".desk_grid").del()};this.showGrid=function(){o.hideGrid();for(var D=0;D<o.option.nh;D++){for(var p=0;p<o.option.nv;p++){var C=$('<div class="desk_grid"></div>');C.css({width:(k.w+1)+"px",height:(k.h+1)+"px",left:(k.starth+k.w*D)+"px",top:(k.startv+k.h*p)+"px",position:"absolute","z-index":(0),"box-sizing":"border-box",padding:"6px"});y.prepend(C);if(o.selectBlocks&&o.selectBlocks.length>0&&D%o.option.blockW==0&&p%o.option.blockH==0){var E=$('<div class="canAddBlock">+</div>');C.append(E);E.data("pos",{x:D,y:p,w:o.option.blockW,h:o.option.blockH});E.css({width:"100%",height:"100%","box-sizing":"border-box","line-height":Math.floor(C.height()-4)+"px","font-size":Math.floor(C.height()-4)+"px",overflow:"hidden","text-align":"center","vertical-align":"middle","border-radius":"4px"})}}}y.find(".canAddBlock").bind("mouseenter",function(){var F=$(this);var G=F.data("pos");e(G)})};var m=[];function e(D){y.find("#blockSelector").del();popList=$('<div id="blockSelector" class="blockSelector"><p></p></div>');y.append(popList);for(var C=0;C<o.selectBlocks.length;C++){var p=$('<a><i class="fa fa-plus"/>'+o.selectBlocks[C]["title"]+"("+o.selectBlocks[C]["w"]+"X"+o.selectBlocks[C]["h"]+")</a>");p.data("option",o.selectBlocks[C]);popList.find(">p").append(p)}popList.bind("mouseleave",v);popList.css({position:"absolute",left:(k.starth+k.w*D.x)+"px",top:(k.startv+k.h*D.y)+"px","background-color":"#ddd","z-index":999999});popList.show();popList.find(">p a").unbind().one("click",function(){c(D,$(this).data("option"))})}function v(){y.find("#blockSelector").del()}function c(C,p){p.x=C.x;p.y=C.y;o.creatAndInsert([p]);
v();B()}this.resetPosition=function(){var p=y.find(">div.desktopBlockDiv");p.each(function(){var C=$(this);h(C)})};function h(C){var p=C.data("data");C.setRealSize(Math.floor(p.w*k.w),Math.floor(p.h*k.h));C.css({left:(k.starth+Math.floor(p.x*k.w))+"px",top:(k.startv+Math.floor(p.y*k.h))+"px",overflow:"hidden"})}this.getBlockConfig=function(){var p=[];var C=y.find(">div.desktopBlockDiv");C.each(function(){var E=$(this);var D=E.data("data");p.push(D)});return p};this.find=function(D){var C=y.find(">div.desktopBlockDiv");var p;C.each(function(){var F=$(this);var E=F.data("data");if(D.title==E.title&&D.url==E.url){p=E;return false}});return p};this.clear=function(){y?y.removeWidget():null;y?y.find(">div.desktopBlockDiv").del():null};this.destroy=function(){o.edit(false);if(u){u.remove();u=null}y?y.removeWidget():null;y?y.clear():null}}function deskTopManage(l,g){var o=this;var n={};var t;var q="ProtalDesktop"+(projectName||"")+(g?"_"+g:"");var r;var b=false;var u=[];var f;var s=[];var h;this.install=function(p){n=$.extend(n,l.dataOptions()||{});f=p;l.find(">*").each(function(){var w=$(this).dataOptions();w.id=w.id||$(this).attr("id");w.content=w.blocktype=="still"?$(this).html():null;s.push(w)});l.empty();t=new PortalDesktop(l,c);t.install();$(t).bind("SAVE_CONFIG",v);d(function(w){if(w){k(w);v()}})};function d(w){var p;if(!n.url){if(n.noSave){w(s);return}p=readFromLocal(q);if(p&&p.config){w(p.config);return}}else{o.load(n.url,f,function(y,x){w(new Array().concat(s,x.value))});return}w(new Array().concat(s))}function a(x){if(!n.url){removeLocal(q);x();return}else{var w=new AJAXObj();$(w).one("JSON_LOADED",x);var p=creatPostParam("REMOVE_DESKTOP_CONFIG",f);w.Post(n.url,p)}}function v(){if(n.noSave){return}var x=t.getBlockConfig();if(!n.url){var w=JSON.stringify({config:x});saveToLocal(q,w);return}else{var y=new AJAXObj();var p=creatPostParam("SAVE_DESKTOP_CONFIG",f,x);y.Post(n.url,p)}}this.load=function(w,x,z){var y=new AJAXObj();$(y).one("JSON_LOADED",z);var p=creatPostParam("GET_DESKTOP_CONFIG",x);y.Post(w,p)};function k(p){for(var w=0;w<p.length;w++){var x=p[w];x.y=x.y?x.y:0;x.x=x.x?x.x:0;x.blocktype=x.blocktype?x.blocktype:"still"}t.creatAndInsert(p);$(o).trigger("DESKTOP_LOADED")}this.findWindowNamesById=function(w){var p=[];l.find(">div>div").each(function(){var y=$(this);var x=y.dataOptions();if(x&&x.id==w){p.push(x.name)}});return p};function c(A,w){switch(w.blocktype){case"widget":A.addClass("fm_outerPage");A.widget(f);A.attr("rel",w.name);break;case"shortcut":A.addClass("desktop_shortcut");A.html('<div><i class="fa fa-rocket"></i></div><p>'+w.title+"</p>").attr("title","\u8df3\u8f6c\u5230:"+w.title);A.menuButton();A.find("i").fillFont({min:12,max:32});break;case"still":switch(w.id){case"memorandum":var y=new MemoWidget(A,w.name,n.url);$(o).bind("PORTAL_RESIZE",y.resize);$(y).bind("SAVE_MEMO",e).bind("LOAD_MEMO",m);y.loadThis();A.attr("rel",w.name);break;case"calander":var p=new CalanderWidget(A,w.name,n.url);$(o).bind("PORTAL_RESIZE",p.resize);$(p).bind("SAVE_CALANDER",e).bind("LOAD_CALANDER",m);p.loadThis();A.attr("rel",w.name);break;case"dateapp":var z=new DateWidget(A);$(o).bind("PORTAL_RESIZE",z.resize);break;case"clockapp":var x=new ClockWidget(A);$(o).bind("PORTAL_RESIZE",x.resize);break;default:console.log(w.content,"----");w.content?A.html(w.content):null;break}break}}function e(x,w){switch(x.type){case"SAVE_MEMO":h.memory[w.id]=w.data;break;case"SAVE_CALANDER":h.calander[w.id]=w.data;break}j();var y=new AJAXObj();var p=creatPostParam("SAVE_USER_DATA",f,h);y.Post(n.url,p)}function j(){for(var p in h.memory){if(l.find(">div>div[rel="+p+"]").length==0){delete h.memory[p]}}for(var p in h.calander){if(l.find(">div>div[rel="+p+"]").length==0){delete h.calander[p]}}}function m(y,x){var w=function(){switch(y.type){case"LOAD_MEMO":x.callback(h.memory[x.id]);break;case"LOAD_CALANDER":x.callback(h.calander[x.id]);break}};if(h){w();return}var z=new AJAXObj();$(z).one("JSON_LOADED",function(B,A){h=$.extend({memory:{},calander:{}},A.value||{});w()});var p=creatPostParam("GET_USER_DATA",f);z.Post(n.url,p)}this.addShortCut=function(y){var w=t.find(y.data);if(w){t.pointTo(w.id);return}var p="shortcut_"+(new Date()).getTime();var x=$.extend({id:p,blocktype:"shortcut",y:0,x:0,w:1,h:1,z:997},y.data);t.creatAndInsert([x]);t.pointTo(p);v()};this.reset=function(p){t.clear();f=p?p:f;a(function(){if(n.url){o.load(n.url,p,function(x,w){k(new Array().concat(s,w.value))})}else{k(new Array().concat(s));v()}})};this.edit=function(){if(!b&&n.url&&!t.selectBlocks){var w=new AJAXObj();$(w).one("JSON_LOADED",function(y,x){u=x.value;t.selectBlocks=u;t.edit(!b);b=!b});var p=creatPostParam("GET_BLOCKLIST",f);w.Post(n.url,p)}else{t.edit(!b);b=!b}};this.resize=function(){if(t){t.resize()}$(o).trigger("PORTAL_RESIZE")};this.destroy=function(){$(o).unbind();if(t){t.destroy();t=null}}}function webChat(Q){var I=this;this.onshow=false;var f;this.option={height:0.8,minheight:300,groupwidth:260,chatminwidth:300,chatwidth:300,userwidth:200,infowidth:240,maxmsg:200,listener:"http",timer:10000,sound:true};
var k=ZINDEX.pop;var v=ZINDEX.popActive;var M=ZINDEX.popLockMask;var C=ZINDEX.frontClass;var b;var c;var L;var D;var t;var y;var n;var F;var r=navigator.userAgent.indexOf("MSIE 8.0")>0?true:false;var j={};var o=false;var m=false;this.install=function(){$.extend(I.option,Q);if(!I.option.hostPort){return}I.option.height=I.option.height<1?Math.floor(I.option.height*$(window).height()):I.option.height;I.option.height=I.option.height>$(window).height()-20?$(window).height()-20:I.option.height;I.option.height=I.option.minheight<I.option.height?I.option.height:I.option.minheight;b={width:I.option.groupwidth,groupwidth:I.option.groupwidth,chatwidth:0,userwidth:0,infowidth:0};var T=Math.floor(($(window).height()-I.option.height)/2);T=T<0?0:T;var U=Math.floor(($(window).width()-I.option.groupwidth)/2);U=U<0?0:U;c=$('<div id="webChatBox"><div class="chatTitleBox">'+I.option.title+'<span><i class="fa fa-remove"></i></span></div><div class="chatGroupWraper"><div class="chatMainMenuBox"><a id="chatbut_creat" title="\u65b0\u5efa"><i class="fa fa-plus"></i></a><a id="chatbut_reload" title="\u5237\u65b0"><i class="fa fa-refresh"></i></a><dd><input name="groupkey" placeholder="\u8f93\u5165\u7ec4\u540d\u67e5\u8be2"/></dd></div><div class="chatGroupContainer"><ul class="chat_listTemp"><li  dir="ltr"><h1><span class="newmsg">0</span><span id="groupname"></span></h1><p id="lastmsg"></p></li></ul></div></div><div class="chatWindowWraper"><div class="chatMainMenuBox"><p><a id="chatbut_close" title="\u5173\u95ed"><i class="fa fa-chevron-left "></i></a><a id="chatbut_info" title="\u8b66\u60c5"><i class="fa fa-exclamation-triangle"></i></a><a id="chatbut_user" title="\u4eba\u5458"><i class="fa fa-users"></i></a></p><span id="chat_groupname"></span></div><div class="chatWindowContainer"><div class="chatMsgBox"><div class="chatMsgContainer"></div><div class="chatSendBox chatfixfoot"></div></div><div class="chatUserListBox"><div class="chatUserListContainer"></div><div class="chatFootMenuBox chatfixfoot"><a id="chatbut_add" title="\u52a0\u4eba"><i class="fa fa-user-plus"></i></a><a id="chatbut_remove" title="\u5220\u9664"><i class="fa fa-user-times"></i></a><a id="chatbut_quit" title="\u9000\u51fa"><i class="fa fa-sign-out"></i></a></div></div><div class="chatInfoBox"><div class="chatInfoContainer"></div><div class="chatFootMenuBox chatfixfoot"><a id="chatbut_reloadinfo" title="\u5237\u65b0"><i class="fa fa-refresh"></i></a><a id="chatbut_detail" title="\u67e5\u770b"><i class="fa fa-file-text"></i></a></div></div><div class="cl"></div></div></div><div class="cl"></div></div>');$("body").append(c);j.groupWraper=c.find(".chatGroupWraper");j.groupContainer=c.find(".chatGroupContainer");j.chatWraper=c.find(".chatWindowWraper");j.chatContainer=j.chatWraper.find(".chatWindowContainer");j.chatbox=j.chatContainer.find(".chatMsgBox");j.userbox=j.chatContainer.find(".chatUserListBox");j.infobox=j.chatContainer.find(".chatInfoBox");j.menuH=36;j.footH=33;j.sendH=36;j.groupWraper.css({"float":"left",width:I.option.groupwidth+"px"});j.chatWraper.css({"float":"right"});j.chatbox.css({position:"relative","float":"left"});j.userbox.css({position:"relative","float":"left"}).hide();j.infobox.css({position:"relative","float":"right","overflow-x":"hidden","overflow-y":"hidden"}).hide();j.groupContainer.css({"overflow-x":"hidden","overflow-y":"auto"});j.groupContainer.find("ul.chat_listTemp").attr("dir","ltr");c.css({position:"fixed",top:T+"px",left:U+"px","min-height":I.option.minheight,"max-height":I.option.maxheight,"z-index":k});c.find(".chatfixfoot").css({position:"absolute",bottom:"0px",left:"0px",right:"0px"});j.chatWraper.hide();I.onshow=false;var V=$('<div class="dragSizeBox"><a></a></div>');c.append(V);V.css({position:"relative",height:"0px",overflow:"visible"}).find("a").css({position:"absolute",top:"-10px",right:"-10px",width:"20px",height:"20px",cursor:"nw-resize"});resizeDrag=new dragWindowSize(V.find(">a"),c);$(resizeDrag).bind("DRAG_RESIZE",I.resize);c.find(".chatMainMenuBox a,.chatFootMenuBox a").bind("click",N);c.find(".chatTitleBox").bind("mousedown",w);c.find(".chatTitleBox span").bind("click",I.hideChat);c.find("input[name=groupkey]").bind("change",G);c.bind("mousedown",I.toFront);n=new chatInfoDetail(c.find(".chatInfoContainer"),I.option.detailPort,I.option.detailTemplete);n.install();y=new ListView(c.find(".chatGroupContainer ul.chat_listTemp"));y.option.classStyle["checked"]="nowid";y.option.enableCheck=true;$(y).unbind("LI_CLICKED").bind("LI_CLICKED",function(Y,X){var W=X.data["groupid"];I.openGroup(W,true)});var S=function(W){W.lastmsg=W.lastmsg?W.lastmsg:"";W.lastmsg=W.jingqing?'[ <a rel="'+W.jingqing+'" class="showJingqing red" title="'+W.jingqing+'">\u8b66\u60c5 '+W.jingqing.substr(W.jingqing.length-4,W.jingqing.length)+"</a>  ]"+W.lastmsg:"[ \u666e\u901a\u4f1a\u8bdd ] "+W.lastmsg;return W};var p=function(W){W.RightPopMenu(function(){return R(W.data("data"))});W.find("a.showJingqing").bind("click",function(){var X=$(this).attr("rel");
$(I).trigger("CHAT_ADDINFO",{jingqing:X});return false})};s();c.hide();f=false;if(I.option.alarmSound){F=GLOBALSOUND?GLOBALSOUND:new SoundPlayer(I.option.alarmSound)}y.load(I.option.groupPort,creatPostParam("getGroupList"),S,p);D=new ChatBox(c.find(".chatMsgContainer"),c.find(".chatUserListContainer"));D.maxmsg=I.option.maxmsg;$(D).bind("CREAT_GROUP",u).bind("DELETE_GROUP",h).bind("OPEN_GROUP",E).bind("CHANGE_GROUP",d).bind("CHAT_VOICE",function(X,W){$(I).trigger("CHAT_VOICE",W)}).bind("CHAT_VIDEO",function(X,W){$(I).trigger("CHAT_VIDEO",W)});t=new ChatInput(c.find(".chatSendBox"));t.uploadUrl=I.option.uploadurl;$(t).bind("SEND_MSG",function(X,W){I.sendMsg(W.msg,W.add)}).bind("ERROR",function(W,X){e(X.msg,2000)}).bind("UPLOAD_START",function(){$.loading(300000)}).bind("UPLOAD_END",function(){$.loaded()});L=new ChatCore(I.option);$(L).bind("ERROR",function(W,X){e(X.msg,2000)}).bind("GOT_MESSAGE",function(X,W){I.gotMsg(W.msg)}).bind("GOT_USERLIST",function(X,W){I.gotList(W.list)}).bind("GOT_GROUP",function(X,W){I.gotGroup(W.groups)}).bind("UPDATE_GROUPNAME",z);L.install();j.groupContainer.bind("mousewheel",O);j.chatWraper.bind("mousewheel",O)};this.toFront=function(){if(!c){I.destroy();return}$("body").find("."+C).css("z-index",k).removeClass(C);c.css("z-index",v).addClass(C)};function R(S){var T=$('<div class="chatlistRightMenu">'+(S.iscreator&&!S.disabled?'<label><input name="newGroupName" value="'+S.groupname+'"/></label>':"")+"<div>"+(S.iscreator&&!S.disabled?'<a id="chatbut_rename"><i class="fa fa-pencil"></i>\u6539\u540d</a>':"")+(S.disabled?'<a id="chatbut_delete"><i class="fa fa-remove"></i>\u5220\u9664</a>':'<a id="chatbut_quit"><i class="fa fa-sign-out"></i>\u9000\u51fa</a>')+'<p class="cl"></p></div></div>');S.iscreator&&!S.disabled?null:T.width(114).find("a").width(110);var p=S.groupid;var U=S.groupname;T.find("a").bind("click",function(){var W=$(this).attr("id");switch(W){case"chatbut_delete":D.destroyGroup(p);$.destroyRightMenu();break;case"chatbut_rename":var V=a(T.find("input[name=newGroupName]").val());if(V!==U){L.updateGroupName(p,V);$.destroyRightMenu()}break;case"chatbut_quit":A(p);$.destroyRightMenu();break}}).data("data",S);return T}function G(){var S=a($(this).val()+"");if(S==""){j.groupContainer.find(".selected").removeClass("selected");return}var U=y.getData(true);var T=false;for(var p=0;p<U.length;p++){if(U[p]["groupname"].indexOf(S)>-1){U[p]["liObject"].addClass("selected");T=true}else{U[p]["liObject"].removeClass("selected")}}if(T){j.groupContainer.scrollTo(j.groupContainer.find(".selected:eq(0)"),300)}}function N(){switch($(this).attr("id")){case"chatbut_creat":$(I).trigger("CHAT_CREATGROUP");break;case"chatbut_reload":var p=D.nowgroupid;y.reload();$(y).one("LOADED",function(){if(!p){return}var T=y.find("groupid",p);if(T){T.addClass("nowid")}});break;case"chatbut_close":I.showChatWindow(false);break;case"chatbut_user":I.showHideUserList(!$(this).hasClass("opened"));$(this).hasClass("opened")?$(this).removeClass("opened"):$(this).addClass("opened");break;case"chatbut_info":I.showHideInfoBox(!$(this).hasClass("opened"));$(this).hasClass("opened")?$(this).removeClass("opened"):$(this).addClass("opened");break;case"chatbut_add":var S=D.getNowGroup();$(I).trigger("CHAT_ADDUSER",{GID:S.groupid,groupname:S.groupname});break;case"chatbut_remove":q();break;case"chatbut_detail":var S=D.getNowGroup();$(I).trigger("CHAT_ADDINFO",{GID:S.groupid,groupname:S.groupname,jingqing:S.jingqing});break;case"chatbut_reloadinfo":n.reload();break;case"chatbut_quit":A(D.nowgroupid);break}}this.showChatWindow=function(p){if(I.onshow==p){return}b.chatwidth=p?I.option.chatwidth:0;b.userwidth=p&&o?I.option.userwidth:0;b.infowidth=p&&m?I.option.infowidth:0;p?j.chatWraper.show():j.chatWraper.hide();p?j.groupContainer.attr("dir","rtl"):j.groupContainer.attr("dir","ltr");s();this.onshow=p};this.showHideUserList=function(p){b.userwidth=!p?0:I.option.userwidth;!p?j.userbox.hide():j.userbox.show();o=p?true:false;s()};this.showHideInfoBox=function(p){b.infowidth=!p?0:I.option.infowidth;!p?j.infobox.hide():j.infobox.show();m=p?true:false;s()};this.resize=function(S,p){if(!I.onshow){b.width=I.option.groupwidth;b.groupwidth=I.option.groupwidth;b.chatwidth=0;b.userwidth=0;b.infowidth=0}else{p.width=p.width>$(window).width()?$(window).width():p.width;b.chatwidth=p.width-b.groupwidth-b.infowidth-b.userwidth;b.chatwidth=b.chatwidth<I.option.chatminwidth?I.option.chatminwidth:b.chatwidth;I.option.chatwidth=b.chatwidth}p.height=p.height>$(window).height()?$(window).height():p.height;I.option.height=p.height;var T=I.option.maxheight?I.option.maxheight:$(window).height();I.option.height=(I.option.height>T)?T:I.option.height;I.option.height=(I.option.height<I.option.minheight)?I.option.minheight:I.option.height;s()};function s(){b.width=b.chatwidth+b.groupwidth+b.userwidth+b.infowidth;c.width(b.width).height(I.option.height);var p=I.option.height-c.find(".chatTitleBox").outerHeight(true);j.groupWraper.setRealSize(I.option.groupwidth,p);
cW=b.width-I.option.groupwidth;j.chatWraper.setRealSize(cW,p);j.groupContainer.setRealSize(j.groupWraper.width(),j.groupWraper.height()-j.menuH);j.chatContainer.setRealSize(j.chatWraper.width(),j.chatWraper.height()-j.menuH);var S=j.chatContainer.width()-b.infowidth-b.userwidth;var T=j.chatContainer.height();j.chatbox.setRealSize(S,T);j.userbox.setRealSize(b.userwidth,T);j.infobox.setRealSize(b.infowidth,T);j.chatbox.find(".chatMsgContainer").setRealSize(j.chatbox.width(),j.chatbox.height()-j.sendH);j.userbox.find(".chatUserListContainer").setRealSize(j.userbox.width(),j.userbox.height()-j.footH);j.infobox.find(".chatInfoContainer").setRealSize(j.infobox.width(),j.infobox.height()-j.footH);if(D){D.resize()}n.resize()}function u(T,p){var S=y.find("groupid",p.groupid);if(S){}else{y.insert(p,0)}}function h(S,p){y.findAndRemove("groupid",p.groupid);if(D.nowgroupid==p.groupid){I.showChatWindow(false)}}function d(S,p){j.chatWraper.find("#chat_groupname").html(p.groupname);y.findAndCheck("groupid",p.groupid,true);H();if(p.group["jingqing"]){n.load({jingqing:p.group["jingqing"]})}else{n.clear()}}this.showChat=function(){I.toFront();if(f){return}c.show();$(I).trigger("CHAT_SHOW");f=true};this.hideChat=function(){if(!f){return}c.hide();$(I).trigger("CHAT_HIDE");f=false};function H(){var p=D.getNowGroup();if(!p){return}p.disabled?j.chatWraper.find("#chatbut_add,#chatbut_remove,#chatbut_quit").hide():j.chatWraper.find("#chatbut_add,#chatbut_remove,#chatbut_quit").show();p.disabled?t.disable(true):t.disable(false);p.disabled?j.chatWraper.find("#chat_groupname").addClass("disabled"):j.chatWraper.find("#chat_groupname").removeClass("disabled");!p.iscreator||p.disabled?j.chatWraper.find("#chatbut_add,#chatbut_remove").hide():j.chatWraper.find("#chatbut_add,#chatbut_remove").show();!p.jingqing?j.chatWraper.find("#chatbut_detail,#chatbut_reloadinfo").hide():j.chatWraper.find("#chatbut_detail,#chatbut_reloadinfo").show();j.userbox.find("li span").removeClass("checked")}function A(S){var U=D.getGroup(S);if(!U){U=y.findRowData("groupid",S)}if(U){var p={groupid:S,delroup:U.iscreator};var T=function(W){U.disabled=true;l(S);H()};var V=U.iscreator?"\u9000\u51fa\u540e\u8be5\u4f1a\u8bdd\u5c06\u4f1a\u89e3\u6563\uff0c\u786e\u5b9a\u5417\uff1f":"\u9000\u51fa\u8be5\u4f1a\u8bdd\u4e0d\u518d\u63a5\u6536\u6d88\u606f\uff0c\u786e\u5b9a\u5417\uff1f";$.confirm(V,function(W){if(W){L.quit(p,T)}})}}function l(S){var p=y.findRowData("groupid",S);if(p){p.disabled=true;p.liObject.addClass("dismissed")}var T=D.getGroup(S);if(T){T.disabled=true}}function x(){if($(this).hasClass("disabled")){return}var p=D.getNowGroup();if($(this).hasClass("addinfo")){$(I).trigger("CHAT_ADDINFO",{GID:p.groupid,groupname:p.groupname,jingqing:p.jingqing})}else{if($(this).hasClass("delren")){q()}else{if($(this).hasClass("addren")){$(I).trigger("CHAT_ADDUSER",{GID:p.groupid,groupname:p.groupname})}}}}this.addUserlist=function(S,p){if(!S||!p){return}var T=function(U){D.addToUserList(U,p)};L.addUser(S,p,T)};this.gotList=function(U){if(!U||U.length<1){return}for(var T=0;T<U.length;T++){if(!U[T]||!U[T]["users"]||U[T]["users"].length<1){}else{var p=U[T]["groupid"];var S=U[T]["users"];D.updateUserList(S,p)}}};this.gotGroup=function(p){if(!p||p.length<1){return}for(var T=0;T<p.length;T++){var S=p[T]["groupid"];g(S,p[T])}};function g(S,p){var U=D.getGroup(S);if(U){$.extend(U,p)}if(D.nowgroupid==S){j.chatWraper.find("#chat_groupname").html(p.groupname);H()}y.update("groupid",S,p,true);var T=y.find("groupid",S);if(p.disabled){T?T.addClass("dismissed"):null}else{T?T.removeClass("dismissed"):null}}function z(V,W){var S=W.groupid;var p=W.groupname;var U=D.getGroup(S);if(U){U.groupname=p}if(D.nowgroupid==S){j.chatWraper.find("#chat_groupname").html(p)}var T=y.find("groupid",S);lidata=T.data("data");lidata.groupname=p;y.update("groupid",S,lidata,true)}function q(){var p=D.prepareDelete();if(!p){return}var S=function(){D.deleteUser(p)};L.delUser(p.delids,p.groupid,S)}var J;function E(W,U){var S=U.open;var p=U.groupid;var V=U.oldmsg;if(J&&J==p){return}var T=function(X){J=null;var Y=0;if(V){X.msg=V;Y=V.length}D.creatGroupObj(X);if(S){D.showGroup(p)}p!=D.nowgroupid?K(p,Y):null};J=p;L.LoadGroup(p,T)}this.openGroup=function(S,p){I.showChat();I.showChatWindow(true);t.focus();D.showGroup(S);K(S)};this.creatGroup=function(p){I.showChat();I.showChatWindow(true);var S=function(T){var U=T.groupid;D.creatGroupObj(T);D.showGroup(U);y.findAndCheck("groupid",U,true);j.groupContainer.scrollTo(0,300);$(I).trigger("CHAT_INSERTGROUP",T)};L.newGroup(p,S)};this.gotMsg=function(V,T){if(!V||V.length<1){return}if(!f&&!T){$(I).trigger("CHAT_NEW_MSG",{num:V.length})}var U={};for(var S=0;S<V.length;S++){var p="g_"+V[S]["groupid"];if(!U[p]){U[p]=[]}U[p].push(V[S])}D.reciveMsg(U);for(var p in U){B(U[p][0]["groupid"],U[p].length)}if(I.option.sound&&!V[0]["self"]&&F&&!T){F.play(true)}};function B(S,p){if(S==D.nowgroupid){return}var U=y.find("groupid",S);if(U){var V=U.find("span.newmsg");var T=parseInt(V.text()+"");T=isNaN(T)?0:T;
T+=p;T=T>99?"99+":T;V.text(T).show()}}function K(p,S){var T=y.find("groupid",p);S=!S?"":S;if(T){var U=T.find("span.newmsg");U.text(S);(S==""||p==D.nowgroupid)?U.hide():U.show()}}this.sendMsg=function(T,p){var S=D.getNowGroup();if(!S){return}if(S.disabled){$.alert("\u4f1a\u8bdd\u7ec4\u5df2\u89e3\u6563");return}L.send(T,S.groupid,p)};var P;function w(T){T=T?T:window.event;P=[T.clientX,T.clientY];var V=c.css("left");V=parseInt(V.replace("px",""));V=V?V:0;var p=c.css("top");p=parseInt(p.replace("px",""));p=p?p:0;var U=function(X){X=X?X:window.event;var W=V+(X.clientX-P[0]);var Y=p+(X.clientY-P[1]);Y=(Y>0)?Y:0;c.css({left:W+"px",top:Y+"px"})};var S=function(W){$(document).unbind("mousemove",U).unbind("mouseup",S)};$(document).bind("mousemove",U).bind("mouseup",S)}this.destroy=function(){if(L){L.destroy();L=null}if(c){c.del();c=null}if(D){D.destroy();D=null}};function e(T,S){c.find("#popShowMessage").stop().del();var p=$('<div id="popShowMessage">'+T+"</div>");c.find(".chatContainer").append(p);p.css({position:"absolute",bottom:"80px",padding:"8px",left:"15%",width:"70%","text-align":"center","z-index":"9999999","background-color":"#000",color:"#fff","border-radius":"6px",opacity:0.6});p.hide().fadeIn("fast").delay(S).fadeOut("slow",function(){c.find("#popShowMessage").stop().del()}).bind("mousedown",function(){c.find("#popShowMessage").stop().del()})}function a(p){return(p+"").replace(/^\s*|\s*$/g,"")}function O(p){p.stopPropagation()}}function ChatCore(j){var l=this;this.option=j;var k;var q;var m="webchatUpload_"+(new Date()).getTime();var r=false;this.install=function(){Loader=new AJAXObj();Loader.silent=true;switch(l.option.listener){case"push":e();break;case"http":s();break}};function e(){var y=l.option.userName||"";var w=l.option.password||"";var v=null;var p={};var x=new JmsConnectionFactory(url);var u=x.createConnection(y,w,function(){try{v=u.getValue();v.setExceptionListener=function(D){$(l).trigger("ERROR",{errmsg:"\u6d88\u606f\u670d\u52a1\u51fa\u9519"})};var C=v.createSession(false,Session.AUTO_ACKNOWLEDGE);var z=C.createTopic(l.option.topic);var A=C.createConsumer(z);A.setMessageListener(h);v.start(function(){})}catch(B){$(l).trigger("ERROR",{errmsg:"\u6d88\u606f\u670d\u52a1\u8fde\u63a5\u5931\u8d25"})}})}function h(p){if(r){return}var v=p.getText();try{v=JSON.parse(v)}catch(u){return}c(t(v)["msg"]);b(t(v)["userlist"])}this.stop=function(){if(q){clearTimeout(q);q=null}r=true};var d=0;this.start=function(){if(l.option.listener=="http"){l.stop();q=setTimeout(function(){var p=g("msg",{});$(k).unbind().one("JSON_LOADED",o).one("SYS_ERROR",function(){d++;d=d>600?600:d;l.start()});k.POSTDATA(l.option.hostPort,p,false)},l.option.timer+d*1000)}r=false};function s(){if(!l.option.timer||!l.option.hostPort){return}k=new AJAXObj();k.silent=true;if(l.option.timeout){k.timeout=l.option.timeout}l.start()}function o(u,p){d=0;c(t(p)["msg"]);b(t(p)["userlist"]);f(t(p)["groups"]);l.start()}function c(u){if(u&&u.length>0){for(var p=0;p<u.length;p++){u[p]["chat"]=formatHtml(u[p]["chat"])}$(l).trigger("GOT_MESSAGE",{msg:u})}}function b(p){if(p&&p.length>0){$(l).trigger("GOT_USERLIST",{list:p})}}function f(p){if(p&&p.length>0){$(l).trigger("GOT_GROUP",{groups:p})}}this.send=function(x,v,y){y=y?y:{};var u=function(z){var A=new Date();A=a(A.getHours())+":"+a(A.getMinutes())+":"+a(A.getSeconds());var B={groupid:v,self:true,chattime:A,chat:""+x,userName:"\u6211"};$.extend(B,y);c([B])};if(!x){return}var w={groupid:v,msg:x};$.extend(w,y);var p=g("send",w);n(p,u,"\u6d88\u606f\u53d1\u9001\u5931\u8d25")};this.quit=function(u,v){var p=g("quit",u);n(p,v,"\u9000\u51fa\u5931\u8d25")};this.addUser=function(v,u,x){if(!v||v.length<1){return}var w=function(y){var z=y.userlist;x(z);if(y.groupname){$(l).trigger("UPDATE_GROUPNAME",{groupname:y.groupname,groupid:u})}};var p=g("addren",{users:v,groupid:u});n(p,w,"\u6dfb\u52a0\u4eba\u5458\u5931\u8d25")};this.delUser=function(v,u,w){var p=g("delren",{guid:v,groupid:u});n(p,w,"\u7ec4\u4eba\u5458\u5220\u9664\u5931\u8d25")};this.newGroup=function(u,v){var p=g("newgroup",u);n(p,v,"\u521b\u5efa\u7ec4\u5931\u8d25")};this.LoadGroup=function(u,v){var p=g("getgroup",{groupid:u});n(p,v,"\u7ec4\u4fe1\u606f\u52a0\u8f7d\u5931\u8d25")};this.updateGroupName=function(v,u){var p=g("renamegroup",{groupid:v,newgroupname:u});n(p,function(x,w){$(l).trigger("UPDATE_GROUPNAME",{groupname:u,groupid:v})},"\u7ec4\u540d\u79f0\u66f4\u65b0\u5931\u8d25")};function n(p,w,u){var v=new AJAXObj();$(v).unbind().one("JSON_LOADED",function(y,x){v.destroy();v=null;var x=t(x);w(x)}).one("SYS_ERROR",function(){v.destroy();v=null;$(l).trigger("ERROR",{errmsg:u})});v.POSTDATA(l.option.hostPort,p)}function g(u,v,w){var p=$.extend({},l.option.param||{},v);return creatPostParam(u,p,w)}function t(p){return p.value}function a(p){p+="";return p.length>1?p:"0"+p}this.destroy=function(){if(q){clearTimeout(q);q=null}if(Loader){$(Loader).unbind();Loader=null}if(k){$(k).unbind();k=null}}}function ChatBox(g,k){var a=this;var c=[];this.nowgroupid;this.maxmsg=100;
this.install=function(){g.css({position:"relative"})};this.resize=function(){k.find(".chatuserlist").height(k.height());g.find(".chatmsglist").height(g.height())};this.getGroup=function(p){for(var q=0;q<c.length;q++){if(c[q]["groupid"]==p){return c[q];break}}return null};this.getNowGroup=function(){return a.getGroup(a.nowgroupid)};this.destroy=function(){c.splice(0,c.length);c=null};this.creatGroupObj=function(p){var r=a.getGroup(p.groupid);if(r){return r}r={creatorid:p.userId,chatbox:null,list:null,iscreator:p.iscreator};$.extend(r,p);r.list=$('<div class="chatuserlist"></div>');k.append(r.list);r.list.hide();r.chatbox=$('<div class="chatmsglist"></div>');g.append(r.chatbox);r.chatbox.hide();c.push(r);r.list.height(r.list.parent().height());r.chatbox.height(r.list.parent().height());a.updateUserList(p.userlist,p.groupid);var q=p.msg;a.reciveMsg({g_oldmsg:q});$(a).trigger("CREAT_GROUP",p);return r};this.destroyGroup=function(p){var r=a.getGroup(p);if(!r){$(a).trigger("DELETE_GROUP",{groupid:p});return}r.chatbox.del();r.chatbox=null;r.list.del();r.list=null;for(var q=0;q<c.length;q++){if(c[q]["groupid"]==p){c[q]=null;c.splice(q,1);break}}$(a).trigger("DELETE_GROUP",{groupid:p})};this.showGroup=function(p){if(!p){return}var q=a.getGroup(p);if(q){g.find(">div").hide();k.find(">div").hide();q.chatbox.show();q.list.show();a.nowgroupid=p;$(a).trigger("CHANGE_GROUP",{groupid:p,groupname:q.groupname,disabled:q.disabled,group:q})}else{$(a).trigger("OPEN_GROUP",{groupid:p,open:true})}};function b(p){chatWindow.find(".chatMsgBox>div").hide();p.chatbox.show()}this.updateUserList=function(q,p){var r=a.getGroup(p);if(!r){return}if(q.length<1){return}r.list.find("ul>li").del();n(q,r.list,r)};function n(r,v,u){for(var s=0;s<r.length;s++){var t=r[s]["orgCode"];t=t?t:"othergroup";var q=v.find("#"+t);if(q.length==0){q=$('<div class="userpart" id="'+t+'"><h1><span></span>'+(r[s]["orgName"]||"\u5176\u4ed6")+"</h1><ul></ul></div>");v.append(q);q.find("h1").bind("click",d);q.find(">ul").hide()}var p=$('<li rel="'+r[s]["userId"]+'">'+r[s]["userName"]+"</li>");q.find("ul").append(p);if(u.iscreator&&r[s]["userId"]!=u.creatorid){p.prepend($("<span></span>"));p.find("span").bind("click",l)}}o(v)}function o(p){p.find(">div.userpart").each(function(){var q=$(this).find(">ul>li").length;if(q==0){$(this).del()}else{$(this).find(">h1>span").text(q+"")}})}function d(){var p=$(this).parent();if($(this).hasClass("open")){p.find(">ul").hide();$(this).removeClass("open")}else{p.find(">ul").show();$(this).addClass("open")}}this.addToUserList=function(r,p){var t=a.getGroup(p);if(!t){return}var q=[];for(var s=0;s<r.length;s++){if(!j(r[s],t)){q.push(r[s])}}if(q.length<1){return}n(q,t.list,t)};function j(p,r){var q=r.list.find("li[rel="+p.userId+"]");if(q.length>0&&q.eq(0).text()==p.userName){return true}return false}this.prepareDelete=function(){var q=a.getGroup(a.nowgroupid);var p=[];q.list.find("li").each(function(){if($(this).find(">span").hasClass("checked")){p.push($(this).attr("rel"))}});if(p.length<1){return}if((q.list.find("li").length-p.length)<2){$.alert("\u4e00\u4e2a\u4f1a\u8bdd\u81f3\u5c11\u6709\u4e24\u4eba\u53c2\u4e0e");return null}return{delids:p,groupid:a.nowgroupid}};this.deleteUser=function(q){var p=q.delids;var s=a.getGroup(q.groupid);for(var r=0;r<p.length;r++){s.list.find("li[rel="+p[r]+"]").del()}o(s.list)};function l(){$(this).hasClass("checked")?$(this).removeClass("checked"):$(this).addClass("checked")}this.reciveMsg=function(s){if(!s){return}for(var p in s){if(s[p]){var q=s[p][0]["groupid"];var t=a.getGroup(q);if(t){for(var r=0;r<s[p].length;r++){f(q,s[p][r],(r==s[p].length-1))}}else{$(a).trigger("OPEN_GROUP",{groupid:q,open:false,oldmsg:s[p]})}}}};function f(r,y,w){var x=a.getGroup(r);var t;var p=x.chatbox.find(">div.msgOutBox:last");var v=(p.length>0)?Math.floor(p.position().top+p.outerHeight(true)-x.chatbox.height()):0;t=(v>60);var q=h(y);x.chatbox.append(q);if(w){var u=x.chatbox.find(">div").length-a.maxmsg;u>0?x.chatbox.find(">div:lt("+u+")").del():null}if(!t&&r==a.nowgroupid){setTimeout(function(){x.chatbox.scrollTo(q,300)},500)}else{if(t&&r==a.nowgroupid){var s=x.chatbox.find(">dd.msgtip");if(s.length==0){s=$('<dd class="msgtip"><p>\u6709\u65b0\u6d88\u606f</p></dd>');g.append(s);x.chatbox.one("scroll",e);s.css({position:"absolute",right:"28px",bottom:"2px","z-index":999});s.hide().fadeIn("slow")}s.unbind().one("click",function(){x.chatbox.scrollTo(q,300);e()})}}}function e(){g.find(">dd.msgtip").stop(true).del()}function h(s){if(s.type&&s.type==9){var r='<div class="systemMsg">'+s.chat+"</div>";var q=$(r);return q}var p=s.type&&s.type>1?true:false;var r;if(p){if(s.type==2){r='<img src="'+s.chat+'" />'}else{if(s.type==3){r='<a class="mediabut msg_sound" rel="'+s.chat+'">'+(s.size||"\u64ad\u653e\u97f3\u9891")+"</a>"}else{if(s.type==4){r='<a class="mediabut msg_video" rel="'+s.chat+'">'+(s.size||"\u64ad\u653e\u89c6\u9891")+"</a>"}else{if(s.type==5){r='<a class="mediabut msg_file" href="'+s.chat+'" target="_blank">\u4e0b\u8f7d\u6587\u4ef6</a>'
}}}}}else{r=s.chat+""}r='<div class="msgOutBox '+(s.self?"selfmsg":"")+'"><div class="msgPopBox"><h5>'+s.chattime+"</h5><h4>"+(s.orgName?"<strong>"+s.orgName+"</strong>":"")+s.userName+": </h4><p>"+r+'</p></div><div class="cl"></div></div>';var q=$(r);q.find("img").ZoomBigPic();q.find("a.mediabut").bind("click",m);q.hide().fadeIn("slow");return q}function m(){var p=$(this).attr("rel");if($(this).hasClass("msg_sound")){$(a).trigger("CHAT_VOICE",{url:p})}else{if($(this).hasClass("msg_video")){$(a).trigger("CHAT_VIDEO",{url:p,butobj:$(this)})}else{if($(this).hasClass("msg_file")){}}}}this.gotList=function(s){if(!s||s.length<1){return}for(var r=0;r<s.length;r++){if(!s[r]||!s[r]["users"]||s[r]["users"].length<1){}else{var p=s[r]["groupid"];var t=a.getGroup(p);if(t){t.list.find("ul").empty();var q=s[r]["users"];a.addToUserList(q,p)}}}};this.install()}function ChatInput(b){var h=this;var a="webchatUpload_"+(new Date()).getTime();this.uploadUrl;var d;this.install=function(){b.empty().html('<div style="width:70%;float:left;"><div id="msginput" contenteditable="true"></div></div><div style="width:10%;float:left;"><dd><input type="file" name="sendPic" id="'+a+'"/></dd></div><div style="width:20%;float:right;"><a>\u53d1\u9001</a></div><div class="cl"></div>');b.find("a").unbind().bind("click",f);b.find("#msginput").unbind().bind("paste",delInputHtml);b.find("input[name=sendPic]").unbind().bind("change",g);d=b.find("#msginput");d.unbind("keydown",e).bind("keydown",e)};this.disable=function(j){if(j){d.attr("contenteditable",false).addClass("disabled");b.find("a").unbind();d.unbind("keydown",e);b.find("input[name=sendPic]").attr("disabled",true)}else{d.attr("contenteditable",true).removeClass("disabled");b.find("a").unbind().bind("click",f);d.unbind("keydown",e).bind("keydown",e);b.find("input[name=sendPic]").attr("disabled",false)}};function e(j){if(j.ctrlKey&&j.keyCode==13){f()}}this.focus=function(){b.find("#msginput").get(0).focus()};function f(){if(trim(d.text())==""){d.html("");return}d.attr("contenteditable",false);var j=trim(d.html());j=clearHtml(j);if(j!=""){$(h).trigger("SEND_MSG",{msg:j,add:null})}d.html("");d.attr("contenteditable",true).get(0).focus()}function g(){var o=$(this);var m=o.val();var n=m.split(".");n=n[n.length-1];n=n.toLowerCase();switch(n){case"jpg":case"jpeg":case"png":case"gif":case"bmp":n=2;break;case"mp3":case"wav":n=3;break;case"flv":case"f4v":case"mp4":n=4;break;default:n=5;break}var j=function(p,q){$(h).trigger("UPLOAD_END");$(h).trigger("ERROR",{msg:"\u4e0a\u4f20\u5931\u8d25"+(q.msg||"")});c(true)};var l=function(p,r){if(r.head["code"]==1){var q=r.value["filename"];$(h).trigger("UPLOAD_END");$(h).trigger("SEND_MSG",{msg:q,add:$.extend({type:n,size:"PLAY"},r.value)})}else{j(r.head["message"])}c(true)};var k=function(){c(false);var q=b.find("input[name=sendPic]");var p=new MAjaxUpload(q,h.uploadUrl);$(p).one("UPLOAD_COMPLETE",l).one("UPLOAD_ERROR",j);p.upLoad()};$(h).trigger("UPLOAD_START");k()}function c(j){if(j){b.find("input[name=sendPic]").show().unbind().val("").bind("change",g)}else{b.find("input[name=sendPic]").hide()}}this.install()}function chatInfoDetail(b,k,d){var c=this;var j;var h;var a;var g;var f;this.install=function(){if(!d||!k){$.errormsg("\u8bf7\u68c0\u67e5\u6a21\u677f\u914d\u7f6e");return}LoadHtml(d,{},function(m,l){j=l});g=$("<div></div>");b.empty().append(g);g.css({"overflow-x":"hidden","overflow-y":"auto"});c.resize()};this.load=function(l){f=l;c.reload()};this.reload=function(){if(a){a.destroy();a=null}a=new AJAXObj();$(a).bind("JSON_LOADED",function(m,l){e(l.value)}).bind("SYS_ERROR",c.clear);a.POSTDATA(k,creatPostParam("chatDetail",f))};this.resize=function(){g.setRealSize(null,b.height())};this.clear=function(){g.empty();b.addClass("noContent")};function e(m){g.empty();b.removeClass("noContent");if(!j){$.errormsg("\u8bf7\u68c0\u67e5\u6a21\u677f");return}var l=$(j);g.append(l);l.bindJsonData(m)}}function swfSocket(b,g){this.config={swffile:"dataExc.swf",bground:"0xffffff"};var o;var m;var f=this;var j;var k;var q;var e;var h=false;var n=false;var d=0;var c=10;this.onConnect=false;this.install=function(p,r){q=p;e=r;if(k){m=f.getswf(k);if(m){m.swfAction("connetct");return}}j=getObjectName(this)||"SWFSOCKET";if(!j){console.log("swfClass is undefined!");return}k="SwfSocket_"+j+"_"+(new Date()).getTime()+"_"+Math.floor(Math.random()*1000);a(k);m=f.getswf(k)};this.close=function(){n=false;d=0;f.onConnect=false;if(m){m.swfAction("close");return}if(k){m=f.getswf(k);if(m){try{m.swfAction("close")}catch(p){}}}};this.destroy=function(){n=false;d=0;if(k){m=f.getswf(k);if(m){try{m.swfAction("destroy");m.clear();m.remove();m=null}catch(p){}}}if(o){o.clear();o.remove();o=null}if(b){b.empty()}f.onConnect=false};function a(p){if(b){b.clear();b.empty()}o=$('<div id="'+p+'" class="fm_swfSocket"></div>');b.append(o);swfobject.embedSWF(g+f.config.swffile,p,"100%","100%","10.2.0",g+"expressInstall.swf",{swfid:j},{quality:"high"})}this.connect=function(){f.onConnect=false;if(m){m.swfAction("connetct");
return}if(k){m=f.getswf(k);if(m){try{m.swfAction("connetct")}catch(p){}}}};this.log=function(p){console.log(p)};this.send=function(p){if(!f.onConnect){$.message("Socket\u53d1\u9001\u5931\u8d25\u3002",2000);return}if(typeof p=="object"){p=JSON.stringify(p)}if(m){m.swfAction("send",p);return}if(k){m=f.getswf(k);if(m){m.swfAction("send",p)}}};this.recieve=function(p,t){switch(p){case"SOCKET_CONNECTED":$(f).trigger("SOCKET_CONNECTED");f.onConnect=true;break;case"SOCKET_FAIL":case"CONNECT_ERROR":if(f.onConnect){f.onConnect=false;$.confirm("Socket\u8fde\u63a5\u5931\u8d25\uff0c\u662f\u5426\u91cd\u65b0\u8fde\u63a5",function(u){if(u){d=0;f.connect()}});return}else{f.onConnect=false;if(d<c){d++;f.connect();return}else{d=0}}case"SECURTY_ERROR":f.onConnect=false;$.confirm("Socket\u8fde\u63a5\u5931\u8d25\uff0c\u662f\u5426\u91cd\u65b0\u8fde\u63a5",function(u){if(u){d=0;f.connect()}});break;case"SOCKET_SEND_FAIL":$.message("Socket\u53d1\u9001\u5931\u8d25\u3002",2000);break;case"GETDATA_ERROR":$.message("Socket\u63a5\u6536\u6570\u636e\u9519\u8bef\u3002",2000);break;case"CONNECT_BREAK":f.onConnect=false;$(f).trigger("SOCKET_CLOSED");$.confirm("Socket\u8fde\u63a5\u4e2d\u65ad\uff0c\u662f\u5426\u91cd\u65b0\u8fde\u63a5",function(u){if(u){d=0;f.connect()}});break;case"SWF_INSTALLED":d=0;f.connect();break;case"SOCKET_RECIEVE":try{var s=JSON.parse(t);$(f).trigger("SOCKET_DATA",{data:s})}catch(r){console.log("JOSN\u683c\u5f0f\u4e0d\u6b63\u786e",t)}break}};this.getswf=function(p){if(navigator.appName.indexOf("Microsoft")!=-1){return window[p]}else{return document[p]}};this.loadSwfStatus=function(p){h=true;$(f).trigger("SWF_INSTALLED");return'{"host":"'+q+'","port":'+e+"}"};function l(p){if(typeof p!="object"||p===null){return false}else{return/(\w+)\(/.exec(p.constructor.toString())[1]}}}(function(a){a.fn.VideoPlayer=function(){a(this).each(function(){var b=a('<div class="fm_videoBox"></div>');a(this).after(b).hide().addClass("fm_leaveit");b.creatVideoPlayer(a(this))})};a.fn.creatVideoPlayer=function(e){var b=e.width();var d=a(this);var g=e.dataOptions();var c=function(){if(e.isDisabled()||e.isReadonly()){return}var h=a(this).dataOptions();if(!VIDEOPLAYER){VIDEOPLAYER=new playFlvVideo((swfPath||framePos+"frame/"))}a.extend(VIDEOPLAYER.option,h);VIDEOPLAYER.play(h.url,a(this))};var f=function(){d.empty();var j=(a(e).is("input"))?e.val():e.text();if(!j){return}j=j.split(",");for(var k=0;k<j.length;k++){var m=a.extend({},g,{url:j[k]});m=JSON.stringify(m);m=m.replace(/\"/g,"'");var l=b<30?'<i class="fa fa-play"></i>':b<70?'<i class="fa fa-play"></i>\u64ad\u653e':'<i class="fa fa-play"></i>\u64ad\u653e\u89c6\u9891';var h=a('<label class="fm_formitemwraper"><a class="playbut inFormBut" data-option="'+m+'">'+l+"</a></label>");d.append(h);h.find(">a").setRealSize(b).bind("click",c)}};f();if(a(e).is("input")){e.bind("change",f)}e.data("disableFun",function(h){e.attr("disabled",h);(h)?d.addClass("disabled"):d.removeClass("disabled")})};a.fn.Mp3Player=function(){a(this).each(function(){var b=a('<div class="fm_voiceBox"></div>');a(this).after(b).hide().addClass("fm_leaveit");b.creatMp3Player(a(this))})};a.fn.creatMp3Player=function(e){var c=e.width();var g=ZINDEX.sound;var b=a(this);var f=e.dataOptions();var d;var h=function(){if(d){d.destroy();d=null}var l=a(".jQueryMp3Player");if(l.length>0){try{palyer.find(".jp-jplayer").jPlayer("destroy")}catch(m){}l.del();l=null}};var k=function(){if(e.isDisabled()||e.isReadonly()){return}h();var m=a(this).dataOptions();var l="player_"+(new Date()).getTime()+Math.floor(Math.random()*100000);player=a('<div class="jQueryMp3Player"><div class="playertitle"><a><i class="fa fa-remove"></i>\u5173\u95ed</a></div><div id="'+l+'" class="jp-jplayer"></div><div id="jp_container_1" class="jp-audio"><div class="jp-type-single"><div class="jp-gui jp-interface"><ul class="jp-controls"><li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li><li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li><li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li><li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li><li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li><li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li></ul><div class="jp-progress"><div class="jp-seek-bar"><div class="jp-play-bar"></div></div></div><div class="jp-volume-bar"><div class="jp-volume-bar-value"></div></div><div class="jp-time-holder"><div class="jp-current-time"></div><div class="jp-duration"></div><ul class="jp-toggles"><li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li><li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li></ul></div></div><div class="jp-no-solution"><span>Update Required</span>To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div></div></div></div>');
a("body").append(player);player.css({position:"fixed","z-index":g});d=new dragDivObj();d.install(player.find(".playertitle"),player);player.centerInWindow();player.find("#"+l).jPlayer({ready:function(){a(this).jPlayer("setMedia",{mp3:m.url,autoPlay:true}).jPlayer("play")},swfPath:framePos+"jPlayer/js",supplied:"mp3",wmode:"window",smoothPlayBar:true,keyEnabled:true});player.find(".playertitle a").unbind().bind("click",h)};var j=function(){b.empty();var m=(a(e).is("input"))?e.val():e.text();if(!m){return}m=m.split(",");for(var n=0;n<m.length;n++){var o=c<30?'<i class="fa fa-volume-up"></i>':c<70?'<i class="fa fa-volume-up"></i>\u64ad\u653e':'<i class="fa fa-volume-up"></i>\u64ad\u653e\u97f3\u9891';var l=a('<label class="fm_formitemwraper"><a class="playbut inFormBut" data-option="{\'url\':\''+m[n]+"'}\">"+o+"</a></label>");b.append(l);l.find(">a").setRealSize(c).bind("click",k)}};j();if(a(e).is("input")){e.bind("change",j)}e.data("disableFun",function(l){e.attr("disabled",l);(l)?b.addClass("disabled"):b.removeClass("disabled")})}})(jQuery);function PlaySound(g,e,d){var f=this;var c;var b;var a=ZINDEX.sound;this.Play=function(){f.destroy();e=e==false?false:true;var h="player_"+(new Date()).getTime()+Math.floor(Math.random()*100000);c=$('<div class="jQueryMp3Player"><div class="playertitle"><a><i class="fa fa-remove"></i>\u5173\u95ed</a></div><div id="'+h+'" class="jp-jplayer"></div><div id="jp_container_1" class="jp-audio"><div class="jp-type-single"><div class="jp-gui jp-interface"><ul class="jp-controls"><li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li><li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li><li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li><li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li><li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li><li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li></ul><div class="jp-progress"><div class="jp-seek-bar"><div class="jp-play-bar"></div></div></div><div class="jp-volume-bar"><div class="jp-volume-bar-value"></div></div><div class="jp-time-holder"><div class="jp-current-time"></div><div class="jp-duration"></div><ul class="jp-toggles"><li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li><li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li></ul></div></div><div class="jp-no-solution"><span>Update Required</span>To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div></div></div></div>');$("body").append(c);c.css({position:"fixed","z-index":a});b=new dragDivObj();b.install(c.find(".playertitle"),c);c.centerInWindow();c.find("#"+h).jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:g,autoPlay:e}).jPlayer("play")},swfPath:d+"jPlayer/js",supplied:"mp3",wmode:"window",smoothPlayBar:true,keyEnabled:true});c.find(".playertitle a").unbind().bind("click",f.destroy)};this.destroy=function(){if(b){b.destroy();b=null}var h=$(".jQueryMp3Player");if(h.length>0){try{palyer.find(".jp-jplayer").jPlayer("destroy")}catch(j){}h.del();h=null}};this.Play()}function SoundPlayer(d){var c=this;var a=true;var b;this.install=function(){b=$("<div></div>");$("body").append(b);b.css({width:"0px",height:"0px",overflow:"hidden",position:"absolute",left:"0px",top:"0px",opacity:0.01});b.jPlayer({ready:function(){},swfPath:framePos+"jPlayer/js",supplied:"mp3",wmode:"window",keyEnabled:false})};this.play=function(g,e){if(!a){return}var f=e||d;b.jPlayer("clearMedia");b.jPlayer("setMedia",{mp3:f,autoPlay:true}).jPlayer("play");g?null:b.jPlayer("repeat")};this.stop=function(){b.jPlayer("stop")};this.enabled=function(){a=true;$(c).trigger("SOUND_DISABLED",{status:false})};this.disabled=function(){a=false;$(c).trigger("SOUND_DISABLED",{status:true})};this.install()}function FlvPlayer(c,e){this.config={swffile:"flvplayer.swf",bground:"0xffffff"};var m;var l;var g="";var d=this;var f;var h;var k=false;this.Play=function(o){if(h){l=d.getswf(h);if(l){l.swfAction("playvideo",o);return}}f=getObjectName(this)||"FLVPlayer";if(!f){alert("swfClass is undefined!");return}g=o;h="PlayerSwf_"+f+"_"+(new Date()).getTime()+"_"+Math.floor(Math.random()*1000);b(h)};this.pause=function(){l=d.getswf(h);if(l){l.swfAction("pause");return}if(h){l=d.getswf(h);if(l){try{l.swfAction("pause")}catch(o){}}}};this.destroy=function(){if(h){l=d.getswf(h);if(l){try{l.swfAction("destroy");l.clear();l.remove();l=null}catch(o){}}}if(m){m.clear();m.remove();m=null}if(c){c.empty()}};function b(o){if(c){c.clear();c.empty()}m=$('<div id="'+o+'" class="fm_flvplayer"></div>');c.append(m);swfobject.embedSWF(e+d.config.swffile,o,"100%","100%","10.2.0",e+"expressInstall.swf",{swfid:f},{quality:"high"});d.resize()}this.getswf=function(o){if(navigator.appName.indexOf("Microsoft")!=-1){return window[o]
}else{return document[o]}};this.playerFullScreen=function(o){k=!o;d.resize()};var n;this.resize=function(){if(n){clearTimeout(n);n=null}n=setTimeout(a,200)};function a(){if(k){c.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%",height:"100%"});swffit.fit(h,$(window).width(),$(window).height(),$(window).width(),$(window).height(),false,false)}else{c.css({position:"",top:"",left:"",bottom:"",right:""});swffit.fit(h,c.width(),c.height(),c.width(),c.height(),false,false)}}this.playEnd=function(){};this.screenShot=function(p){var o=$("<img/>");o.attr("src","data:image/png;base64,"+p);$(d).trigger("SNAP_SHOT",{image:o})};this.loadSwfStatus=function(o){return'{"url":"'+g+'"}'};function j(o){if(typeof o!="object"||o===null){return false}else{return/(\w+)\(/.exec(o.constructor.toString())[1]}}}var FLVPlayer;function playFlvVideo(c,j){var a=this;var h;var d;var f=false;this.option={width:640,height:480,title:"\u89c6\u9891\u64ad\u653e",minw:120,minh:90};var g=ZINDEX.video;var e=flashChecker();this.play=function(l,k){if(!e.f){$.alert("\u64ad\u653e\u89c6\u9891\u9700\u8981\u5b89\u88c5 FlashPlayer");return}if(f){FLVPlayer.Play(l);return}if(!d){d=new popOutWindow(g);d.option=a.option}if(!h){h=$('<div class="fm_FlvPlayerbox">LOADING...</div>')}if(!FLVPlayer){FLVPlayer=new FlvPlayer(h,c);$(FLVPlayer).bind("SNAP_SHOT",b)}d.Show(h,null,[k.offset().left-$(window).scrollLeft(),k.offset().top-$(window).scrollTop()]);f=false;$(d).unbind("WINDOW_RESIZE").bind("WINDOW_RESIZE",function(m,n){h.setRealSize(n.width,n.height);FLVPlayer.resize();if(!f){FLVPlayer.Play(l);f=true}if(browserIsIE9){h.setRealSize(n.width,n.height);FLVPlayer.resize()}}).unbind("WINDOW_BEFORE_CLOSE").one("WINDOW_BEFORE_CLOSE",a.destroy).unbind("WINDOW_MINI").bind("WINDOW_MINI",function(){FLVPlayer.pause()})};function b(l,m){var k=$('<div class="snapshot"><div class="relpos"><i class="fa fa-remove"></i></div></div>');k.append(m.image);k.css({"z-index":g+1,position:"fixed",bottom:"10px",left:"10px"});k.find("i").one("click",function(){m.image.del();m.image=null;k.del();k=null});$("body").append(k)}this.destroy=function(){if(FLVPlayer){FLVPlayer.destroy();FLVPlayer=null}if(d){d.clearContent();d=null}if(h){h.del();h=null}f=false}}function simpleChart(b,h){var d=this;var k;var e;var j;var f;var g="clum";this.install=function(){b.empty();g=h.showtype?h.showtype:g;k=$('<div><div id="chartContainer"/></div>');k.css({position:"relative"});if(h.changeShow!=false){e=$('<div class="chart_butbox"><a id="pie" title="\u997c\u56fe" class="but-small but-blue"><i class="fa fa-pie-chart"></i></a><a id="clum"  title="\u67f1\u56fe" class="but-small but-blue"><i class="fa fa-bar-chart"></i></a><a id="line"  title="\u7ebf\u56fe" class="but-small but-blue"><i class="fa fa-area-chart"></i></a>'+(h.noTable==true?"":'<a id="table"  title="\u8868\u683c" class="but-small but-blue"><i class="fa fa-table"></i></a>')+'<a id="pic"  title="\u5bfc\u51fa\u56fe\u7247" class="but-small but-blue"><i class="fa fa-picture-o"></i></a></div>');e.css({margin:"0px",padding:"3px",position:"absolute",left:"0px",top:"0px","z-index":99,height:"24px"});k.append(e);e.find("a").css({width:"18px","text-align":"center"}).bind("click",a)}b.append(k);d.resize()};this.load=function(o,n){var p=new AJAXObj();$(p).one("JSON_LOADED",function(r,q){$.extend(h,q.extend["chartOption"]||{});d.bindData(g,q.value)});p.Post(o,n)};this.destroy=function(){if(j){j.clear();j.dispose();j=null}};function a(){var o=$(this).attr("id");if(o=="pic"){if(g=="table"){return}var n=j.getDataURL({pixelRatio:2,backgroundColor:"#fff"});new showPopBigPic(n);return}if(g==o){return}d.bindData(o)}this.bindData=function(v,q){f=q?q:f;if(!f){return}g=v?v:g;j?j.clear():null;k.find(".chartTable").del();var r=[];if(g=="pie"&&h.pieAxis!="y"){for(var s=0;s<h.xAxis.length;s++){r.push({name:h.xAxis[s],value:0})}}for(var s=0;s<f.length;s++){var u;switch(g){case"pie":var o=0;if(h.pieAxis=="y"){f[s]["data"]=(typeof f[s]["data"]=="string")?[parseint(f[s]["data"])]:f[s]["data"];for(var p=0;p<f[s]["data"].length;p++){o+=f[s]["data"][p]}u={value:o,name:f[s]["name"],param:f[s]["param"]};r.push(u)}else{f[s]["data"]=(typeof f[s]["data"]=="string")?[parseint(f[s]["data"])]:f[s]["data"];for(var p=0;p<r.length;p++){r[p]["value"]+=(f[s]["data"][p]||0)}}break;case"clum":u={data:f[s]["data"],name:f[s]["name"],param:f[s]["param"]};u.type="bar";u.stack="\u603b\u91cf";u.itemStyle={normal:{label:{show:(h.hideText?false:true),position:"inside"}}};r.push(u);break;case"line":u={data:f[s]["data"],name:f[s]["name"],param:f[s]["param"]};u.type="line";u.stack="\u603b\u91cf";u.areaStyle={normal:{}};r.push(u);break;case"table":u={name:f[s]["name"],param:f[s]["param"]};for(var p=0;p<h.xAxis.length;p++){u[p+""]=f[s]["data"][p]}r.push(u);break}}var w={title:{text:h.title,subtext:h.subtitle,textStyle:{fontSize:14,fontWeight:"normal",color:"#333"},x:"center"},tooltip:{}};if(h.toolbox!=false){w.toolbox={show:true,feature:{dataZoom:{},restore:{}}}}if(h.legend!=false){w.legend={orient:"horizontal",y:"bottom",data:h.parts}
}else{w.legend={show:false}}var n=false;switch(g){case"pie":r={name:"\u5408\u8ba1",type:"pie",radius:"60%",center:["50%","50%"],data:r,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}};w.tooltip["trigger"]="item";w.tooltip["formatter"]="{a} <br/>{b}: {c} ({d}%)";break;case"clum":n=true;case"line":w.grid={left:"3%",right:"2%",bottom:(h.labelh||25)+(h.scrollsize?20:0),containLabel:true};w.tooltip["trigger"]="axis";w.tooltip["axisPointer"]={type:"shadow"};w.xAxis=[{type:"category",boundaryGap:n,data:h.xAxis,axisLabel:(h.axisLabel||{})}];w.yAxis=[{type:"value"}];t=t>100?100:t;if(h.scrollsize||h.scrollsize==0){var t=h.scrollsize==0?100:Math.floor(h.scrollsize*100/h.xAxis.length);w.dataZoom={show:true,bottom:25,height:15,realtime:true,start:0,end:t}}break;case"table":l(r);return;break}w.series=r;j=j?j:echarts.init(k.find("#chartContainer").get(0));j.off("click",m);j.on("click",m);j.setOption(w)};function m(n){var o=[n.event.offsetX,n.event.offsetY];$(d).trigger("ITEM_CLICK",{pos:o,data:n.data})}function l(n){j?j.clear():null;var q=$('<div class="chartTable"></div>');q.css({position:"absolute",top:"32px",left:"0px",right:"0px",bottom:"0px","z-index":9,overflow:"auto"});var u=$('<table  width="100%"></table>');q.append(u);var t="<tr><th>&nbsp;</th>";var r=["name"];for(var p=0;p<h.xAxis.length;p++){t+="<th>"+h.xAxis[p]+"</th>";r.push(p+"")}t+="</tr>";u.append($(t));for(var o=0;o<n.length;o++){var v=n[o];var s="<tr>";for(var p=0;p<r.length;p++){s+='<td align="center">'+v[r[p]]+"</td>"}s+="</tr>";s=$(s);s.data("data",v);u.append(s)}u.find("tr:gt(0)").bind("click",c);k.append(q)}function c(o){var n=$(this);$(d).trigger("ITEM_CLICK",{pos:[o.clientX,o.clientY],data:n.data("data")})}this.resize=function(){k.fillParent();k.find("#chartContainer").fillParent();if(j){j.resize()}};this.install()}(function(f){function g(a){var o=a||window.event,n=[].slice.call(arguments,1),m=0,l=!0,k=0,j=0;return a=f.event.fix(o),a.type="mousewheel",o.wheelDelta&&(m=o.wheelDelta/120),o.detail&&(m=-o.detail/3),j=m,o.axis!==undefined&&o.axis===o.HORIZONTAL_AXIS&&(j=0,k=-1*m),o.wheelDeltaY!==undefined&&(j=o.wheelDeltaY/120),o.wheelDeltaX!==undefined&&(k=-1*o.wheelDeltaX/120),n.unshift(a,m,k,j),(f.event.dispatch||f.event.handle).apply(this,n)}var e=["DOMMouseScroll","mousewheel"];if(f.event.fixHooks){for(var h=e.length;h;){f.event.fixHooks[e[--h]]=f.event.mouseHooks}}f.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var b=e.length;b;){this.addEventListener(e[--b],g,!1)}}else{this.onmousewheel=g}},teardown:function(){if(this.removeEventListener){for(var b=e.length;b;){this.removeEventListener(e[--b],g,!1)}}else{this.onmousewheel=null}}},f.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})})(jQuery);var MENUCTRL;var WINDOW;var PAGER;var SLIDER;var SLIDEWIN;var WEBCHAT;var VIDEOPLAYER;var TAB;var STYLE;var SWFSOCKET;var GLOBALSOUND;var GLOBALCACHE={};var CHECKPOWER=false;var POWERDATA={};var trace=console.log||function(){};var ZINDEX={slide:1,panal:100,popLockMask:204,popActive:205,pop:200,menu:190,tool:800,tips:910,messager:912,picgroup:916,image:920,sound:921,video:922,loadingMask:930,frontClass:"uplayer",popMsg:940};var StyleConfig=[{background:framePos+"images/paper_01.jpg"}];var INPUTHISTORY=[];function AttachJS(a,c,b){if(b){RemoveJS(a)}else{if(checkJsIsOn(a)){if(typeof c=="function"){c(true)}return}}$.getScript(a).done(function(){if(typeof c=="function"){c(true)}}).fail(function(){if(typeof c=="function"){c(false)}})}function AttachCSS(a){if(checkCssIsOn(a)){return}var b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=a;document.getElementsByTagName("head")[0].appendChild(b)}function checkCssIsOn(a){var d="link";var c="href";var e=document.getElementsByTagName(d);for(var b=e.length;b>=0;b--){if(e[b]&&e[b].getAttribute(c)!=null&&e[b].getAttribute(c).indexOf(a)!=-1){return true;break}}return false}function checkJsIsOn(a){var d="script";var c="src";var e=document.getElementsByTagName(d);for(var b=e.length;b>=0;b--){if(e[b]&&e[b].getAttribute(c)!=null&&e[b].getAttribute(c).indexOf(a)!=-1){return true;break}}return false}function RemoveJS(a){var d="script";var c="src";var e=document.getElementsByTagName(d);for(var b=e.length;b>=0;b--){if(e[b]&&e[b].getAttribute(c)!=null&&e[b].getAttribute(c).indexOf(a)!=-1){e[b].parentNode.removeChild(e[b])}}}function RemoveCSS(a){var d="link";var c="href";var e=document.getElementsByTagName(d);for(var b=e.length;b>=0;b--){if(e[b]&&e[b].getAttribute(c)!=null&&e[b].getAttribute(c).indexOf(a)!=-1){e[b].parentNode.removeChild(e[b])}}}function saveToInputHistory(a){if(!a||a.length<2||$.inArray(a,INPUTHISTORY)>-1){return}INPUTHISTORY.unshift(a);if(INPUTHISTORY.length>20){INPUTHISTORY.splice(20,INPUTHISTORY.length)}}function logOut(){var b=loginPort;var a=creatPostParam("logout");var c=new AJAXObj();$(c).one("JSON_LOADED",function(f,d){logoutDeal()
});c.POSTDATA(b,a)}function logoutDeal(b){var c=(b==9||b==8)?true:false;var a=c?window.location.href:host?host:"/";SingleLoginUrl+=(SingleLoginUrl.indexOf("?")>-1)?"&":"?";window.onbeforeunload=function(){};window.location=SingleLoginUrl+"from="+a.replace("#","URIHASH")}$(function(){document.title=projectTitle;easyloader.theme="metro";easyloader.base=framePos+"easyui/";easyloader.locale="zh_CN";CHECKPOWER=!(typeof powerDataFlag=="undefined"||!powerDataFlag);using(["datagrid","tree"],function(){AttachJS(framePos+"easyui/jquery.easyui.datagridBug.min.js");sessionListener();$.parser.auto=false;loadGlobalData(installMainFrame)})});function loadGlobalData(c){var a=(typeof globalPort=="undefined")?null:globalPort;if(a&&a.length>4){var b=new AJAXObj();$(b).bind("JSON_LOADED",function(h,d){GLOBALCACHE=d.value||{};if(CHECKPOWER){var g=GLOBALCACHE[powerDataFlag];if(g&&typeof g=="string"){g=g.split(",")}if(g&&$.isArray(g)){for(var f=0;f<g.length;f++){POWERDATA[g[f]]=1}}}typeof c=="function"?c():null});b.Post(a,creatPostParam("GLOBAL"))}else{typeof c=="function"?c():null}}function installMainFrame(){window.onbeforeunload=function(){if(pageName!="mainframe"){return}(typeof offlinePort!="undefined")?$.get(offlinePort):null;return"\u60a8\u786e\u5b9a\u79bb\u5f00\u6b64\u9875\u9762\u5417\uff1f"};var c={};c.background=GLOBAL.wallpaper?GLOBAL.wallpaper:c.background;STYLE=new UIStyleConfig(c);SLIDER=new PageSlider($(".pagerContainer"));SLIDEWIN={left:new slideWindow(0),right:new slideWindow(2)};if($(".fm_tabContainer").length>0){TAB=new TABObj($(".fm_tabContainer"));TAB.install()}MENUCTRL=new MenuAction();WINDOW=new WindowCtrl();PAGER=new PageCtrl(WINDOW.globalPowerFormat);$(".fm_outerPage").widget();if(browserIsIE6||browserIsIE7||browserIsIE8||browserIsIE9){$(".noselect").bind("selectstart",function(){return false}).bind("drag",function(){return false})}GLOBALSOUND=new SoundPlayer(typeof msgSound!="undefined"?msgSound:"");if(typeof swfSocketOption!="undefined"){var d=$('<div id="webSocket"></div>');d.css({position:"fixed","z-index":-1,width:"1px",height:"1px"});$("body").append(d);SWFSOCKET=new swfSocket(d,swfPath);if(swfSocketOption.autoConnect){SWFSOCKET.install(swfSocketOption.socketHost,swfSocketOption.socketPort)}}if(typeof chatOption!="undefined"){WEBCHAT=new webChat(chatOption);WEBCHAT.install();var b=WEBCHAT.option.zindex+1;var a=new playFlvVideo((swfPath||framePos+"frame/"),b);$(WEBCHAT).bind("CHAT_VIDEO",function(g,f){a.play(f.url,f.butobj)}).bind("CHAT_VOICE",function(h,g){var f=new PlaySound(g.url,true,framePos)})}$(document).trigger("FRAME_LOADED");if(typeof FrameLoaded=="function"){FrameLoaded()}if(typeof InstallMap=="function"){InstallMap()}}function WindowCtrl(){var b=this;this.open=function(d,g,e,c,f){if(CHECKPOWER){if(!b.checkPower(f)){$.message("\u6ca1\u6709\u6388\u6743!",2000);return}}g=(typeof g=="object")?g:{};if(c){g.PARENTNAME=c}return MENUCTRL.open(d,g,e)};this.reload=function(c,d){PAGER.reload(c,d)};this.run=function(c,h,g){try{var d=b.getActionById(c);if(d){if(typeof d[h]=="function"){return d[h](g)}}}catch(f){console.log(f)}};this.getWindowById=function(c){return PAGER.getWindowById(c)};this.getActionById=function(c){return PAGER.getActionById(c)};this.getWraperById=function(c){return PAGER.getWraperById(c)};this.reStore=function(c){var d=PAGER.getWindowById(c);if(d){d.Restore()}};this.getWindowOption=function(d){var c=PAGER.getWindowById(d);return c.option};this.close=function(c){PAGER.destroy(c)};this.hidePanel=function(d){var c=PAGER.getWindowById(d);try{c.close()}catch(f){}};this.hideSide=function(){SLIDER.hide()};this.callback=function(d,c){var e=b.getWindowOption(d);if(e&&typeof e.callback=="function"){e.callback(c)}};this.resize=function(d){var e=b.getWindowById(d);if(e){var c=b.getWraperById(d);c?$(e).trigger("WINDOW_RESIZE",{windowname:d,width:c.width(),height:c.height()}):null}};this.cache=function(c,d){if(!isNull(d)){GLOBALCACHE[c]=d}return GLOBALCACHE[c]};this.globalPowerFormat=function(c){if(!CHECKPOWER){return}powerSign="data-allow";c.find("["+powerSign+"]").each(function(f){var e=$(this);var d=e.powerFlag();if(b.checkPower(d)){e.removeClass("fm_disallow")}else{e.addClass("fm_disallow");switch(e.attr("data-allowStyle")){case"show":break;case"hold":e.css("visibility","hidden");break;case"hide":e.hide();break;default:e.remove();break}}})};this.checkPower=function(e){if(!CHECKPOWER||isNull(e)){return true}var d=false;if(typeof e=="string"){e=e.split("|")}for(var c=0;c<e.length;c++){if(a(e[c])){d=true;break}}return d};function a(c){if(!c){return false}return POWERDATA[c]==1?true:false}};