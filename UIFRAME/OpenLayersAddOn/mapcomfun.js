(function(b){if(browserIsIE9||browserIsIE8){var a=framePos+"OpenLayersAddOn/polyfill.min.js";b.getScript(a)}window.MAP=new openLayerMap();b.fn.creatOlMap=function(c){var d=b(this).eq(0);var e="OLMAP_"+new Date().getTime()+"_"+Math.floor(Math.random()*1000);d.attr("id",e).empty();c["target"]=e;var f=new ol.Map(c);setTimeout(function(){var g=[d.width(),d.height()];f.setSize(g)},100);d.data("map",f);return f};b.fn.resizeMap=function(){var c=b(this);var d=b(this).data("map");if(d){d.updateSize()}}})(jQuery);function openLayerMap(){var a=this;this.creatMap=function(c,b){var d="OLMAP_"+new Date().getTime()+"_"+Math.floor(Math.random()*1000);c.attr("id",d).empty();b["target"]=d;var e=new ol.Map(b);setTimeout(function(){e.updateSize()},100);c.data("map",e);return e};this.addMark=function(c,e,f,b,d){};this.popOut=function(d,j,e,l,f,i,g){var h={"closebut":f?true:false,"autoHide":i?true:false};var k=new mapPopUp(h);k.show(e);var c=$.extend({"positioning":"bottom-center","stopEvent":false},l||{});c["element"]=k.element;var b=new ol.Overlay(c);d.addOverlay(b);b.setPosition(j);g?b.setOffset(g):null;b.destroy=function(){try{k.popElement.parent().del()}catch(m){}};$(k).one("CLOSE_POPUP",b.destroy);return b};this.removePopById=function(d,g){try{var f=d.getOverlayById(g);var b=f["element"];popElement.popElement.parent().del()}catch(c){}}}function mapPopUp(b){var c=this;this.option={"closebut":false,"autoHide":false};this.popElement;this.element;this.install=function(){$.extend(c.option,b||{});c.option["id"]=c.option["id"]?c.option["id"]:"oppop_"+(new Date().getTime())+"_"+Math.floor(Math.random()*10000);c.popElement=$('<div class="op_popUpContainer" id="'+c.option["id"]+'"><div class="op_popUpContent"></div><div class="op_popUpPin"></div>'+(c.option["closebut"]?'<div class="op_popUpClose"></div>':"")+"</div>");c.element=c.popElement.get(0);c.popElement.find(".op_popUpClose").one("click",a);if(c.option["autoHide"]){c.popElement.one("mouseleave",a)}};function a(d){$(c).trigger("CLOSE_POPUP",{"id":c.option["id"]});return false}this.show=function(d){c.popElement.show();if(typeof d=="string"){d=$(d)}c.popElement.find(".op_popUpContent").empty().append(d)};this.hide=function(){c.popElement.hide()};this.destroy=function(){c.popElement.del()};this.install()};